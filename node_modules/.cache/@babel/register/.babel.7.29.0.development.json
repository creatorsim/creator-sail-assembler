{"{\"assumptions\":{},\"sourceRoot\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/\",\"configFile\":false,\"babelrc\":false,\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build\",\"filename\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/transform-as32.js\",\"targets\":{},\"cloneInputAst\":true,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-flow-strip-types\",\"visitor\":{\"Program\":{\"enter\":[null]},\"ImportDeclaration\":{\"enter\":[null,null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"TypeCastExpression\":{\"enter\":[null,null]},\"CallExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"ImportSpecifier\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"AnyTypeAnnotation\":{\"enter\":[null]},\"ArrayTypeAnnotation\":{\"enter\":[null]},\"BooleanTypeAnnotation\":{\"enter\":[null]},\"BooleanLiteralTypeAnnotation\":{\"enter\":[null]},\"NullLiteralTypeAnnotation\":{\"enter\":[null]},\"ClassImplements\":{\"enter\":[null]},\"DeclareClass\":{\"enter\":[null]},\"DeclareFunction\":{\"enter\":[null]},\"DeclareInterface\":{\"enter\":[null]},\"DeclareModule\":{\"enter\":[null]},\"DeclareModuleExports\":{\"enter\":[null]},\"DeclareTypeAlias\":{\"enter\":[null]},\"DeclareOpaqueType\":{\"enter\":[null]},\"DeclareVariable\":{\"enter\":[null]},\"DeclareExportDeclaration\":{\"enter\":[null]},\"DeclareExportAllDeclaration\":{\"enter\":[null]},\"DeclaredPredicate\":{\"enter\":[null]},\"ExistsTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeParam\":{\"enter\":[null]},\"GenericTypeAnnotation\":{\"enter\":[null]},\"InferredPredicate\":{\"enter\":[null]},\"InterfaceExtends\":{\"enter\":[null]},\"InterfaceDeclaration\":{\"enter\":[null]},\"InterfaceTypeAnnotation\":{\"enter\":[null]},\"IntersectionTypeAnnotation\":{\"enter\":[null]},\"MixedTypeAnnotation\":{\"enter\":[null]},\"EmptyTypeAnnotation\":{\"enter\":[null]},\"NullableTypeAnnotation\":{\"enter\":[null]},\"NumberLiteralTypeAnnotation\":{\"enter\":[null]},\"NumberTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeInternalSlot\":{\"enter\":[null]},\"ObjectTypeCallProperty\":{\"enter\":[null]},\"ObjectTypeIndexer\":{\"enter\":[null]},\"ObjectTypeProperty\":{\"enter\":[null]},\"ObjectTypeSpreadProperty\":{\"enter\":[null]},\"OpaqueType\":{\"enter\":[null]},\"QualifiedTypeIdentifier\":{\"enter\":[null]},\"StringLiteralTypeAnnotation\":{\"enter\":[null]},\"StringTypeAnnotation\":{\"enter\":[null]},\"SymbolTypeAnnotation\":{\"enter\":[null]},\"ThisTypeAnnotation\":{\"enter\":[null]},\"TupleTypeAnnotation\":{\"enter\":[null]},\"TypeofTypeAnnotation\":{\"enter\":[null]},\"TypeAlias\":{\"enter\":[null]},\"TypeAnnotation\":{\"enter\":[null]},\"TypeParameter\":{\"enter\":[null]},\"TypeParameterDeclaration\":{\"enter\":[null]},\"TypeParameterInstantiation\":{\"enter\":[null]},\"UnionTypeAnnotation\":{\"enter\":[null]},\"Variance\":{\"enter\":[null]},\"VoidTypeAnnotation\":{\"enter\":[null]},\"EnumDeclaration\":{\"enter\":[null]},\"EnumBooleanBody\":{\"enter\":[null]},\"EnumNumberBody\":{\"enter\":[null]},\"EnumStringBody\":{\"enter\":[null]},\"EnumSymbolBody\":{\"enter\":[null]},\"EnumBooleanMember\":{\"enter\":[null]},\"EnumNumberMember\":{\"enter\":[null]},\"EnumStringMember\":{\"enter\":[null]},\"EnumDefaultedMember\":{\"enter\":[null]},\"IndexedAccessType\":{\"enter\":[null]},\"OptionalIndexedAccessType\":{\"enter\":[null]},\"ExportAllDeclaration\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]}],\"presets\":[]}:7.29.0:development":{"value":{"code":"\"use strict\";\n\n/**\n * jscodeshift transform (text-based): original.js -> deseado.js\n *\n * Run:\n *   npx jscodeshift -t transform.js /mnt/data/original.js\n */\n\nfunction mustReplace(src, from, to, label) {\n  if (!src.includes(from)) {\n    throw new Error(`Pattern not found for: ${label}`);\n  }\n  return src.replace(from, to);\n}\nmodule.exports = function transformer(fileInfo) {\n  let src = fileInfo.source.replace(/\\r\\n/g, \"\\n\");\n\n  // 1) Insert \"let ofile = null;\" at very top (desired has no leading blank line)\n  // If original starts with a blank line, we remove exactly one leading newline.\n  if (src.startsWith(\"\\n\")) src = src.slice(1);\n  if (!src.startsWith(\"let ofile = null;\\n\")) {\n    src = \"let ofile = null;\\n\" + src;\n  }\n\n  // 2) Comment out dependenciesFulfilled block\n  const depFrom = `dependenciesFulfilled = function runCaller() {\n if (!calledRun) run();\n if (!calledRun) dependenciesFulfilled = runCaller;\n};`;\n  const depTo = `// dependenciesFulfilled = function runCaller() {\n//  if (!calledRun) run();\n//  if (!calledRun) dependenciesFulfilled = runCaller;\n// };`;\n  src = mustReplace(src, depFrom, depTo, \"dependenciesFulfilled\");\n\n  // 3) callMain(): insert comment before exit(ret, true);\n  src = mustReplace(src, \"  var ret = entryFunction(argc, argv);\\n  exit(ret, true);\", \"  var ret = entryFunction(argc, argv);\\n\\n    // console.log(FS.readFile(\\\"./out.o\\\"));\\n  exit(ret, true);\", \"callMain insert comment\");\n\n  // 4) run(): insert shouldRunNow/commented block right after function header\n  src = mustReplace(src, \"function run(args) {\\n args = args || arguments_;\", \"function run(args) {\\n  shouldRunNow = true;\\n//  if (args === undefined) {\\n//   readyPromiseResolve(Module);\\n//   return;\\n// }\\n  \\n args = args || arguments_;\", \"run header injection\");\n\n  // 5) run(): after preRun guard, change `return;` to `return run(args);`\n  src = mustReplace(src, \" preRun();\\n if (runDependencies > 0) {\\n  return;\\n }\", \" preRun();\\n if (runDependencies > 0) {\\n  return run(args);\\n }\", \"runDependencies guard after preRun\");\n\n  // 6) doRun(): inject asm_files logic after initRuntime();\n  src = mustReplace(src, \"  initRuntime();\\n  preMain();\", \"  initRuntime();\\n  // at args[2], we have a list of assembly programs to compile\\n  var asm_files = args.pop();\\n  for (let i = 0; i < asm_files.length; i ++ ){\\n    FS.writeFile('./'+asm_files[i].name, asm_files[i].code);\\n    args.push('./'+asm_files[i].name);\\n  }\\n  // for(var i = 2; i < args.length; i++) {\\n  //   FS.writeFile('./code' + (i - 2) + '.s', args[i]);\\n  //   args[i] = 'code' + (i - 2) + '.s';\\n  // }\\n  // console.log(FS.readdir(\\\"./\\\"));\\n  args = [\\\"-o\\\",\\\"out.o\\\", ...args /*\\\"-march=rv32imfdv\\\", \\\"-mabi=ilp32d\\\", \\\"code.s\\\"*/];\\n  preMain();\", \"inject asm_files after initRuntime\");\n\n  // 7) doRun(): comment out readyPromiseResolve(Module) right after preMain()\n  src = mustReplace(src, \"  preMain();\\n  readyPromiseResolve(Module);\", \"  preMain();\\n  // readyPromiseResolve(Module);\", \"comment readyPromiseResolve in doRun\");\n\n  // 8) run(): after checkStackCookie(); add commented lines + return ofile\n  src = mustReplace(src, \" checkStackCookie();\\n}\", \" checkStackCookie();\\n\\n//  readyPromiseResolve(Module);\\n//  return Module.ready;\\n  return ofile;\\n}\", \"return ofile at end of run\");\n\n  // 9) exit(): insert reading out.o and logging at start\n  src = mustReplace(src, \"function exit(status, implicit) {\\n EXITSTATUS = status;\", \"function exit(status, implicit) {\\n  ofile = FS.readFile(\\\"./out.o\\\");\\n  console.log(ofile);\\n EXITSTATUS = status;\", \"exit() insert ofile read/log\");\n\n  // 10) bottom: comment out run(); and add readyPromiseResolve(Module);\n  src = mustReplace(src, \"\\nrun();\\n\\n\\n  return Module.ready\", \"\\n// run(); \\n\\n\\n  readyPromiseResolve(Module);\\n\\n\\n  return Module.ready\", \"bottom run(); -> commented + readyPromiseResolve\");\n  return src;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtdXN0UmVwbGFjZSIsInNyYyIsImZyb20iLCJ0byIsImxhYmVsIiwiaW5jbHVkZXMiLCJFcnJvciIsInJlcGxhY2UiLCJtb2R1bGUiLCJleHBvcnRzIiwidHJhbnNmb3JtZXIiLCJmaWxlSW5mbyIsInNvdXJjZSIsInN0YXJ0c1dpdGgiLCJzbGljZSIsImRlcEZyb20iLCJkZXBUbyJdLCJzb3VyY2VSb290IjoiL2hvbWUvanVhbmNhcmxvcy9Fc2NyaXRvcmlvL3BydWViYS9jcmVhdG9yLXNhaWwtYXNzZW1ibGVyL3Rvb2xjaGFpbl9idWlsZC8iLCJzb3VyY2VzIjpbInRyYW5zZm9ybS1hczMyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICoganNjb2Rlc2hpZnQgdHJhbnNmb3JtICh0ZXh0LWJhc2VkKTogb3JpZ2luYWwuanMgLT4gZGVzZWFkby5qc1xuICpcbiAqIFJ1bjpcbiAqICAgbnB4IGpzY29kZXNoaWZ0IC10IHRyYW5zZm9ybS5qcyAvbW50L2RhdGEvb3JpZ2luYWwuanNcbiAqL1xuXG5mdW5jdGlvbiBtdXN0UmVwbGFjZShzcmMsIGZyb20sIHRvLCBsYWJlbCkge1xuICBpZiAoIXNyYy5pbmNsdWRlcyhmcm9tKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgUGF0dGVybiBub3QgZm91bmQgZm9yOiAke2xhYmVsfWApO1xuICB9XG4gIHJldHVybiBzcmMucmVwbGFjZShmcm9tLCB0byk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJhbnNmb3JtZXIoZmlsZUluZm8pIHtcbiAgbGV0IHNyYyA9IGZpbGVJbmZvLnNvdXJjZS5yZXBsYWNlKC9cXHJcXG4vZywgXCJcXG5cIik7XG5cbiAgLy8gMSkgSW5zZXJ0IFwibGV0IG9maWxlID0gbnVsbDtcIiBhdCB2ZXJ5IHRvcCAoZGVzaXJlZCBoYXMgbm8gbGVhZGluZyBibGFuayBsaW5lKVxuICAvLyBJZiBvcmlnaW5hbCBzdGFydHMgd2l0aCBhIGJsYW5rIGxpbmUsIHdlIHJlbW92ZSBleGFjdGx5IG9uZSBsZWFkaW5nIG5ld2xpbmUuXG4gIGlmIChzcmMuc3RhcnRzV2l0aChcIlxcblwiKSkgc3JjID0gc3JjLnNsaWNlKDEpO1xuXG4gIGlmICghc3JjLnN0YXJ0c1dpdGgoXCJsZXQgb2ZpbGUgPSBudWxsO1xcblwiKSkge1xuICAgIHNyYyA9IFwibGV0IG9maWxlID0gbnVsbDtcXG5cIiArIHNyYztcbiAgfVxuXG4gIC8vIDIpIENvbW1lbnQgb3V0IGRlcGVuZGVuY2llc0Z1bGZpbGxlZCBibG9ja1xuICBjb25zdCBkZXBGcm9tID1cbmBkZXBlbmRlbmNpZXNGdWxmaWxsZWQgPSBmdW5jdGlvbiBydW5DYWxsZXIoKSB7XG4gaWYgKCFjYWxsZWRSdW4pIHJ1bigpO1xuIGlmICghY2FsbGVkUnVuKSBkZXBlbmRlbmNpZXNGdWxmaWxsZWQgPSBydW5DYWxsZXI7XG59O2A7XG5cbiAgY29uc3QgZGVwVG8gPVxuYC8vIGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IGZ1bmN0aW9uIHJ1bkNhbGxlcigpIHtcbi8vICBpZiAoIWNhbGxlZFJ1bikgcnVuKCk7XG4vLyAgaWYgKCFjYWxsZWRSdW4pIGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IHJ1bkNhbGxlcjtcbi8vIH07YDtcblxuICBzcmMgPSBtdXN0UmVwbGFjZShzcmMsIGRlcEZyb20sIGRlcFRvLCBcImRlcGVuZGVuY2llc0Z1bGZpbGxlZFwiKTtcblxuICAvLyAzKSBjYWxsTWFpbigpOiBpbnNlcnQgY29tbWVudCBiZWZvcmUgZXhpdChyZXQsIHRydWUpO1xuICBzcmMgPSBtdXN0UmVwbGFjZShcbiAgICBzcmMsXG4gICAgXCIgIHZhciByZXQgPSBlbnRyeUZ1bmN0aW9uKGFyZ2MsIGFyZ3YpO1xcbiAgZXhpdChyZXQsIHRydWUpO1wiLFxuICAgIFwiICB2YXIgcmV0ID0gZW50cnlGdW5jdGlvbihhcmdjLCBhcmd2KTtcXG5cXG4gICAgLy8gY29uc29sZS5sb2coRlMucmVhZEZpbGUoXFxcIi4vb3V0Lm9cXFwiKSk7XFxuICBleGl0KHJldCwgdHJ1ZSk7XCIsXG4gICAgXCJjYWxsTWFpbiBpbnNlcnQgY29tbWVudFwiXG4gICk7XG5cbiAgLy8gNCkgcnVuKCk6IGluc2VydCBzaG91bGRSdW5Ob3cvY29tbWVudGVkIGJsb2NrIHJpZ2h0IGFmdGVyIGZ1bmN0aW9uIGhlYWRlclxuICBzcmMgPSBtdXN0UmVwbGFjZShcbiAgICBzcmMsXG4gICAgXCJmdW5jdGlvbiBydW4oYXJncykge1xcbiBhcmdzID0gYXJncyB8fCBhcmd1bWVudHNfO1wiLFxuICAgIFwiZnVuY3Rpb24gcnVuKGFyZ3MpIHtcXG4gIHNob3VsZFJ1bk5vdyA9IHRydWU7XFxuLy8gIGlmIChhcmdzID09PSB1bmRlZmluZWQpIHtcXG4vLyAgIHJlYWR5UHJvbWlzZVJlc29sdmUoTW9kdWxlKTtcXG4vLyAgIHJldHVybjtcXG4vLyB9XFxuICBcXG4gYXJncyA9IGFyZ3MgfHwgYXJndW1lbnRzXztcIixcbiAgICBcInJ1biBoZWFkZXIgaW5qZWN0aW9uXCJcbiAgKTtcblxuICAvLyA1KSBydW4oKTogYWZ0ZXIgcHJlUnVuIGd1YXJkLCBjaGFuZ2UgYHJldHVybjtgIHRvIGByZXR1cm4gcnVuKGFyZ3MpO2BcbiAgc3JjID0gbXVzdFJlcGxhY2UoXG4gICAgc3JjLFxuICAgIFwiIHByZVJ1bigpO1xcbiBpZiAocnVuRGVwZW5kZW5jaWVzID4gMCkge1xcbiAgcmV0dXJuO1xcbiB9XCIsXG4gICAgXCIgcHJlUnVuKCk7XFxuIGlmIChydW5EZXBlbmRlbmNpZXMgPiAwKSB7XFxuICByZXR1cm4gcnVuKGFyZ3MpO1xcbiB9XCIsXG4gICAgXCJydW5EZXBlbmRlbmNpZXMgZ3VhcmQgYWZ0ZXIgcHJlUnVuXCJcbiAgKTtcblxuICAvLyA2KSBkb1J1bigpOiBpbmplY3QgYXNtX2ZpbGVzIGxvZ2ljIGFmdGVyIGluaXRSdW50aW1lKCk7XG4gIHNyYyA9IG11c3RSZXBsYWNlKFxuICAgIHNyYyxcbiAgICBcIiAgaW5pdFJ1bnRpbWUoKTtcXG4gIHByZU1haW4oKTtcIixcbiAgICBcIiAgaW5pdFJ1bnRpbWUoKTtcXG4gIC8vIGF0IGFyZ3NbMl0sIHdlIGhhdmUgYSBsaXN0IG9mIGFzc2VtYmx5IHByb2dyYW1zIHRvIGNvbXBpbGVcXG4gIHZhciBhc21fZmlsZXMgPSBhcmdzLnBvcCgpO1xcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhc21fZmlsZXMubGVuZ3RoOyBpICsrICl7XFxuICAgIEZTLndyaXRlRmlsZSgnLi8nK2FzbV9maWxlc1tpXS5uYW1lLCBhc21fZmlsZXNbaV0uY29kZSk7XFxuICAgIGFyZ3MucHVzaCgnLi8nK2FzbV9maWxlc1tpXS5uYW1lKTtcXG4gIH1cXG4gIC8vIGZvcih2YXIgaSA9IDI7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XFxuICAvLyAgIEZTLndyaXRlRmlsZSgnLi9jb2RlJyArIChpIC0gMikgKyAnLnMnLCBhcmdzW2ldKTtcXG4gIC8vICAgYXJnc1tpXSA9ICdjb2RlJyArIChpIC0gMikgKyAnLnMnO1xcbiAgLy8gfVxcbiAgLy8gY29uc29sZS5sb2coRlMucmVhZGRpcihcXFwiLi9cXFwiKSk7XFxuICBhcmdzID0gW1xcXCItb1xcXCIsXFxcIm91dC5vXFxcIiwgLi4uYXJncyAvKlxcXCItbWFyY2g9cnYzMmltZmR2XFxcIiwgXFxcIi1tYWJpPWlscDMyZFxcXCIsIFxcXCJjb2RlLnNcXFwiKi9dO1xcbiAgcHJlTWFpbigpO1wiLFxuICAgIFwiaW5qZWN0IGFzbV9maWxlcyBhZnRlciBpbml0UnVudGltZVwiXG4gICk7XG5cbiAgLy8gNykgZG9SdW4oKTogY29tbWVudCBvdXQgcmVhZHlQcm9taXNlUmVzb2x2ZShNb2R1bGUpIHJpZ2h0IGFmdGVyIHByZU1haW4oKVxuICBzcmMgPSBtdXN0UmVwbGFjZShcbiAgICBzcmMsXG4gICAgXCIgIHByZU1haW4oKTtcXG4gIHJlYWR5UHJvbWlzZVJlc29sdmUoTW9kdWxlKTtcIixcbiAgICBcIiAgcHJlTWFpbigpO1xcbiAgLy8gcmVhZHlQcm9taXNlUmVzb2x2ZShNb2R1bGUpO1wiLFxuICAgIFwiY29tbWVudCByZWFkeVByb21pc2VSZXNvbHZlIGluIGRvUnVuXCJcbiAgKTtcblxuICAvLyA4KSBydW4oKTogYWZ0ZXIgY2hlY2tTdGFja0Nvb2tpZSgpOyBhZGQgY29tbWVudGVkIGxpbmVzICsgcmV0dXJuIG9maWxlXG4gIHNyYyA9IG11c3RSZXBsYWNlKFxuICAgIHNyYyxcbiAgICBcIiBjaGVja1N0YWNrQ29va2llKCk7XFxufVwiLFxuICAgIFwiIGNoZWNrU3RhY2tDb29raWUoKTtcXG5cXG4vLyAgcmVhZHlQcm9taXNlUmVzb2x2ZShNb2R1bGUpO1xcbi8vICByZXR1cm4gTW9kdWxlLnJlYWR5O1xcbiAgcmV0dXJuIG9maWxlO1xcbn1cIixcbiAgICBcInJldHVybiBvZmlsZSBhdCBlbmQgb2YgcnVuXCJcbiAgKTtcblxuICAvLyA5KSBleGl0KCk6IGluc2VydCByZWFkaW5nIG91dC5vIGFuZCBsb2dnaW5nIGF0IHN0YXJ0XG4gIHNyYyA9IG11c3RSZXBsYWNlKFxuICAgIHNyYyxcbiAgICBcImZ1bmN0aW9uIGV4aXQoc3RhdHVzLCBpbXBsaWNpdCkge1xcbiBFWElUU1RBVFVTID0gc3RhdHVzO1wiLFxuICAgIFwiZnVuY3Rpb24gZXhpdChzdGF0dXMsIGltcGxpY2l0KSB7XFxuICBvZmlsZSA9IEZTLnJlYWRGaWxlKFxcXCIuL291dC5vXFxcIik7XFxuICBjb25zb2xlLmxvZyhvZmlsZSk7XFxuIEVYSVRTVEFUVVMgPSBzdGF0dXM7XCIsXG4gICAgXCJleGl0KCkgaW5zZXJ0IG9maWxlIHJlYWQvbG9nXCJcbiAgKTtcblxuICAvLyAxMCkgYm90dG9tOiBjb21tZW50IG91dCBydW4oKTsgYW5kIGFkZCByZWFkeVByb21pc2VSZXNvbHZlKE1vZHVsZSk7XG4gIHNyYyA9IG11c3RSZXBsYWNlKFxuICAgIHNyYyxcbiAgICBcIlxcbnJ1bigpO1xcblxcblxcbiAgcmV0dXJuIE1vZHVsZS5yZWFkeVwiLFxuICAgIFwiXFxuLy8gcnVuKCk7IFxcblxcblxcbiAgcmVhZHlQcm9taXNlUmVzb2x2ZShNb2R1bGUpO1xcblxcblxcbiAgcmV0dXJuIE1vZHVsZS5yZWFkeVwiLFxuICAgIFwiYm90dG9tIHJ1bigpOyAtPiBjb21tZW50ZWQgKyByZWFkeVByb21pc2VSZXNvbHZlXCJcbiAgKTtcblxuICByZXR1cm4gc3JjO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBU0EsV0FBV0EsQ0FBQ0MsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEVBQUUsRUFBRUMsS0FBSyxFQUFFO0VBQ3pDLElBQUksQ0FBQ0gsR0FBRyxDQUFDSSxRQUFRLENBQUNILElBQUksQ0FBQyxFQUFFO0lBQ3ZCLE1BQU0sSUFBSUksS0FBSyxDQUFDLDBCQUEwQkYsS0FBSyxFQUFFLENBQUM7RUFDcEQ7RUFDQSxPQUFPSCxHQUFHLENBQUNNLE9BQU8sQ0FBQ0wsSUFBSSxFQUFFQyxFQUFFLENBQUM7QUFDOUI7QUFFQUssTUFBTSxDQUFDQyxPQUFPLEdBQUcsU0FBU0MsV0FBV0EsQ0FBQ0MsUUFBUSxFQUFFO0VBQzlDLElBQUlWLEdBQUcsR0FBR1UsUUFBUSxDQUFDQyxNQUFNLENBQUNMLE9BQU8sQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDOztFQUVoRDtFQUNBO0VBQ0EsSUFBSU4sR0FBRyxDQUFDWSxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUVaLEdBQUcsR0FBR0EsR0FBRyxDQUFDYSxLQUFLLENBQUMsQ0FBQyxDQUFDO0VBRTVDLElBQUksQ0FBQ2IsR0FBRyxDQUFDWSxVQUFVLENBQUMscUJBQXFCLENBQUMsRUFBRTtJQUMxQ1osR0FBRyxHQUFHLHFCQUFxQixHQUFHQSxHQUFHO0VBQ25DOztFQUVBO0VBQ0EsTUFBTWMsT0FBTyxHQUNmO0FBQ0E7QUFDQTtBQUNBLEdBQUc7RUFFRCxNQUFNQyxLQUFLLEdBQ2I7QUFDQTtBQUNBO0FBQ0EsTUFBTTtFQUVKZixHQUFHLEdBQUdELFdBQVcsQ0FBQ0MsR0FBRyxFQUFFYyxPQUFPLEVBQUVDLEtBQUssRUFBRSx1QkFBdUIsQ0FBQzs7RUFFL0Q7RUFDQWYsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCw0REFBNEQsRUFDNUQsNkdBQTZHLEVBQzdHLHlCQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCxtREFBbUQsRUFDbkQscUtBQXFLLEVBQ3JLLHNCQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCx3REFBd0QsRUFDeEQsa0VBQWtFLEVBQ2xFLG9DQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCxnQ0FBZ0MsRUFDaEMsMmpCQUEyakIsRUFDM2pCLG9DQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCw4Q0FBOEMsRUFDOUMsaURBQWlELEVBQ2pELHNDQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCx5QkFBeUIsRUFDekIsd0dBQXdHLEVBQ3hHLDRCQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCwwREFBMEQsRUFDMUQsc0hBQXNILEVBQ3RILDhCQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCxxQ0FBcUMsRUFDckMsNkVBQTZFLEVBQzdFLGtEQUNGLENBQUM7RUFFRCxPQUFPQSxHQUFHO0FBQ1osQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["mustReplace","src","from","to","label","includes","Error","replace","module","exports","transformer","fileInfo","source","startsWith","slice","depFrom","depTo"],"sourceRoot":"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/","sources":["transform-as32.js"],"sourcesContent":["/**\n * jscodeshift transform (text-based): original.js -> deseado.js\n *\n * Run:\n *   npx jscodeshift -t transform.js /mnt/data/original.js\n */\n\nfunction mustReplace(src, from, to, label) {\n  if (!src.includes(from)) {\n    throw new Error(`Pattern not found for: ${label}`);\n  }\n  return src.replace(from, to);\n}\n\nmodule.exports = function transformer(fileInfo) {\n  let src = fileInfo.source.replace(/\\r\\n/g, \"\\n\");\n\n  // 1) Insert \"let ofile = null;\" at very top (desired has no leading blank line)\n  // If original starts with a blank line, we remove exactly one leading newline.\n  if (src.startsWith(\"\\n\")) src = src.slice(1);\n\n  if (!src.startsWith(\"let ofile = null;\\n\")) {\n    src = \"let ofile = null;\\n\" + src;\n  }\n\n  // 2) Comment out dependenciesFulfilled block\n  const depFrom =\n`dependenciesFulfilled = function runCaller() {\n if (!calledRun) run();\n if (!calledRun) dependenciesFulfilled = runCaller;\n};`;\n\n  const depTo =\n`// dependenciesFulfilled = function runCaller() {\n//  if (!calledRun) run();\n//  if (!calledRun) dependenciesFulfilled = runCaller;\n// };`;\n\n  src = mustReplace(src, depFrom, depTo, \"dependenciesFulfilled\");\n\n  // 3) callMain(): insert comment before exit(ret, true);\n  src = mustReplace(\n    src,\n    \"  var ret = entryFunction(argc, argv);\\n  exit(ret, true);\",\n    \"  var ret = entryFunction(argc, argv);\\n\\n    // console.log(FS.readFile(\\\"./out.o\\\"));\\n  exit(ret, true);\",\n    \"callMain insert comment\"\n  );\n\n  // 4) run(): insert shouldRunNow/commented block right after function header\n  src = mustReplace(\n    src,\n    \"function run(args) {\\n args = args || arguments_;\",\n    \"function run(args) {\\n  shouldRunNow = true;\\n//  if (args === undefined) {\\n//   readyPromiseResolve(Module);\\n//   return;\\n// }\\n  \\n args = args || arguments_;\",\n    \"run header injection\"\n  );\n\n  // 5) run(): after preRun guard, change `return;` to `return run(args);`\n  src = mustReplace(\n    src,\n    \" preRun();\\n if (runDependencies > 0) {\\n  return;\\n }\",\n    \" preRun();\\n if (runDependencies > 0) {\\n  return run(args);\\n }\",\n    \"runDependencies guard after preRun\"\n  );\n\n  // 6) doRun(): inject asm_files logic after initRuntime();\n  src = mustReplace(\n    src,\n    \"  initRuntime();\\n  preMain();\",\n    \"  initRuntime();\\n  // at args[2], we have a list of assembly programs to compile\\n  var asm_files = args.pop();\\n  for (let i = 0; i < asm_files.length; i ++ ){\\n    FS.writeFile('./'+asm_files[i].name, asm_files[i].code);\\n    args.push('./'+asm_files[i].name);\\n  }\\n  // for(var i = 2; i < args.length; i++) {\\n  //   FS.writeFile('./code' + (i - 2) + '.s', args[i]);\\n  //   args[i] = 'code' + (i - 2) + '.s';\\n  // }\\n  // console.log(FS.readdir(\\\"./\\\"));\\n  args = [\\\"-o\\\",\\\"out.o\\\", ...args /*\\\"-march=rv32imfdv\\\", \\\"-mabi=ilp32d\\\", \\\"code.s\\\"*/];\\n  preMain();\",\n    \"inject asm_files after initRuntime\"\n  );\n\n  // 7) doRun(): comment out readyPromiseResolve(Module) right after preMain()\n  src = mustReplace(\n    src,\n    \"  preMain();\\n  readyPromiseResolve(Module);\",\n    \"  preMain();\\n  // readyPromiseResolve(Module);\",\n    \"comment readyPromiseResolve in doRun\"\n  );\n\n  // 8) run(): after checkStackCookie(); add commented lines + return ofile\n  src = mustReplace(\n    src,\n    \" checkStackCookie();\\n}\",\n    \" checkStackCookie();\\n\\n//  readyPromiseResolve(Module);\\n//  return Module.ready;\\n  return ofile;\\n}\",\n    \"return ofile at end of run\"\n  );\n\n  // 9) exit(): insert reading out.o and logging at start\n  src = mustReplace(\n    src,\n    \"function exit(status, implicit) {\\n EXITSTATUS = status;\",\n    \"function exit(status, implicit) {\\n  ofile = FS.readFile(\\\"./out.o\\\");\\n  console.log(ofile);\\n EXITSTATUS = status;\",\n    \"exit() insert ofile read/log\"\n  );\n\n  // 10) bottom: comment out run(); and add readyPromiseResolve(Module);\n  src = mustReplace(\n    src,\n    \"\\nrun();\\n\\n\\n  return Module.ready\",\n    \"\\n// run(); \\n\\n\\n  readyPromiseResolve(Module);\\n\\n\\n  return Module.ready\",\n    \"bottom run(); -> commented + readyPromiseResolve\"\n  );\n\n  return src;\n};\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,WAAWA,CAACC,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAEC,KAAK,EAAE;EACzC,IAAI,CAACH,GAAG,CAACI,QAAQ,CAACH,IAAI,CAAC,EAAE;IACvB,MAAM,IAAII,KAAK,CAAC,0BAA0BF,KAAK,EAAE,CAAC;EACpD;EACA,OAAOH,GAAG,CAACM,OAAO,CAACL,IAAI,EAAEC,EAAE,CAAC;AAC9B;AAEAK,MAAM,CAACC,OAAO,GAAG,SAASC,WAAWA,CAACC,QAAQ,EAAE;EAC9C,IAAIV,GAAG,GAAGU,QAAQ,CAACC,MAAM,CAACL,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC;;EAEhD;EACA;EACA,IAAIN,GAAG,CAACY,UAAU,CAAC,IAAI,CAAC,EAAEZ,GAAG,GAAGA,GAAG,CAACa,KAAK,CAAC,CAAC,CAAC;EAE5C,IAAI,CAACb,GAAG,CAACY,UAAU,CAAC,qBAAqB,CAAC,EAAE;IAC1CZ,GAAG,GAAG,qBAAqB,GAAGA,GAAG;EACnC;;EAEA;EACA,MAAMc,OAAO,GACf;AACA;AACA;AACA,GAAG;EAED,MAAMC,KAAK,GACb;AACA;AACA;AACA,MAAM;EAEJf,GAAG,GAAGD,WAAW,CAACC,GAAG,EAAEc,OAAO,EAAEC,KAAK,EAAE,uBAAuB,CAAC;;EAE/D;EACAf,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,4DAA4D,EAC5D,6GAA6G,EAC7G,yBACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,mDAAmD,EACnD,qKAAqK,EACrK,sBACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,wDAAwD,EACxD,kEAAkE,EAClE,oCACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,gCAAgC,EAChC,2jBAA2jB,EAC3jB,oCACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,8CAA8C,EAC9C,iDAAiD,EACjD,sCACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,yBAAyB,EACzB,wGAAwG,EACxG,4BACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,0DAA0D,EAC1D,sHAAsH,EACtH,8BACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,qCAAqC,EACrC,6EAA6E,EAC7E,kDACF,CAAC;EAED,OAAOA,GAAG;AACZ,CAAC","ignoreList":[]}},"mtime":1770191691103},"{\"assumptions\":{},\"sourceRoot\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/\",\"configFile\":false,\"babelrc\":false,\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build\",\"filename\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/transform-as64.js\",\"targets\":{},\"cloneInputAst\":true,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-flow-strip-types\",\"visitor\":{\"Program\":{\"enter\":[null]},\"ImportDeclaration\":{\"enter\":[null,null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"TypeCastExpression\":{\"enter\":[null,null]},\"CallExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"ImportSpecifier\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"AnyTypeAnnotation\":{\"enter\":[null]},\"ArrayTypeAnnotation\":{\"enter\":[null]},\"BooleanTypeAnnotation\":{\"enter\":[null]},\"BooleanLiteralTypeAnnotation\":{\"enter\":[null]},\"NullLiteralTypeAnnotation\":{\"enter\":[null]},\"ClassImplements\":{\"enter\":[null]},\"DeclareClass\":{\"enter\":[null]},\"DeclareFunction\":{\"enter\":[null]},\"DeclareInterface\":{\"enter\":[null]},\"DeclareModule\":{\"enter\":[null]},\"DeclareModuleExports\":{\"enter\":[null]},\"DeclareTypeAlias\":{\"enter\":[null]},\"DeclareOpaqueType\":{\"enter\":[null]},\"DeclareVariable\":{\"enter\":[null]},\"DeclareExportDeclaration\":{\"enter\":[null]},\"DeclareExportAllDeclaration\":{\"enter\":[null]},\"DeclaredPredicate\":{\"enter\":[null]},\"ExistsTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeParam\":{\"enter\":[null]},\"GenericTypeAnnotation\":{\"enter\":[null]},\"InferredPredicate\":{\"enter\":[null]},\"InterfaceExtends\":{\"enter\":[null]},\"InterfaceDeclaration\":{\"enter\":[null]},\"InterfaceTypeAnnotation\":{\"enter\":[null]},\"IntersectionTypeAnnotation\":{\"enter\":[null]},\"MixedTypeAnnotation\":{\"enter\":[null]},\"EmptyTypeAnnotation\":{\"enter\":[null]},\"NullableTypeAnnotation\":{\"enter\":[null]},\"NumberLiteralTypeAnnotation\":{\"enter\":[null]},\"NumberTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeInternalSlot\":{\"enter\":[null]},\"ObjectTypeCallProperty\":{\"enter\":[null]},\"ObjectTypeIndexer\":{\"enter\":[null]},\"ObjectTypeProperty\":{\"enter\":[null]},\"ObjectTypeSpreadProperty\":{\"enter\":[null]},\"OpaqueType\":{\"enter\":[null]},\"QualifiedTypeIdentifier\":{\"enter\":[null]},\"StringLiteralTypeAnnotation\":{\"enter\":[null]},\"StringTypeAnnotation\":{\"enter\":[null]},\"SymbolTypeAnnotation\":{\"enter\":[null]},\"ThisTypeAnnotation\":{\"enter\":[null]},\"TupleTypeAnnotation\":{\"enter\":[null]},\"TypeofTypeAnnotation\":{\"enter\":[null]},\"TypeAlias\":{\"enter\":[null]},\"TypeAnnotation\":{\"enter\":[null]},\"TypeParameter\":{\"enter\":[null]},\"TypeParameterDeclaration\":{\"enter\":[null]},\"TypeParameterInstantiation\":{\"enter\":[null]},\"UnionTypeAnnotation\":{\"enter\":[null]},\"Variance\":{\"enter\":[null]},\"VoidTypeAnnotation\":{\"enter\":[null]},\"EnumDeclaration\":{\"enter\":[null]},\"EnumBooleanBody\":{\"enter\":[null]},\"EnumNumberBody\":{\"enter\":[null]},\"EnumStringBody\":{\"enter\":[null]},\"EnumSymbolBody\":{\"enter\":[null]},\"EnumBooleanMember\":{\"enter\":[null]},\"EnumNumberMember\":{\"enter\":[null]},\"EnumStringMember\":{\"enter\":[null]},\"EnumDefaultedMember\":{\"enter\":[null]},\"IndexedAccessType\":{\"enter\":[null]},\"OptionalIndexedAccessType\":{\"enter\":[null]},\"ExportAllDeclaration\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]}],\"presets\":[]}:7.29.0:development":{"value":{"code":"\"use strict\";\n\n/**\n * jscodeshift transform (text-based): NOMBRES INVERTIDOS\n * Convierte el fichero que ahora tienes como /mnt/data/deseado.js\n * al contenido del que ahora tienes como /mnt/data/original.js\n *\n * Run:\n *   npx jscodeshift -t transform.js /mnt/data/deseado.js > /mnt/data/salida.js\n *   diff -u /mnt/data/salida.js /mnt/data/original.js\n */\n\nfunction mustReplace(src, from, to, label) {\n  if (!src.includes(from)) {\n    throw new Error(`Pattern not found for: ${label}`);\n  }\n  return src.replace(from, to);\n}\nmodule.exports = function transformer(fileInfo) {\n  let src = fileInfo.source.replace(/\\r\\n/g, \"\\n\");\n\n  // 1) Insert \"let ofile = null;\" at top if missing\n  if (!src.startsWith(\"let ofile = null;\\n\")) {\n    src = src.replace(/^\\uFEFF?/, \"let ofile = null;\\n\");\n  }\n\n  // 2) wasm rename: as-new.wasm -> as-new64.wasm (all occurrences)\n  src = src.replaceAll(\"as-new.wasm\", \"as-new64.wasm\");\n\n  // 3) exitJS: add ofile read/log right after function header\n  src = mustReplace(src, `/** @suppress {duplicate } */ /** @param {boolean|number=} implicit */ var exitJS = (status, implicit) => {\\n  EXITSTATUS = status;`, `/** @suppress {duplicate } */ /** @param {boolean|number=} implicit */ var exitJS = (status, implicit) => {\\n  ofile = FS.readFile(\"./out.o\");\\n  console.log(ofile);\\n  EXITSTATUS = status;`, \"exitJS add ofile read/log\");\n\n  // 4) callMain try: add ofile read/log after entryFunction\n  src = mustReplace(src, `  try {\\n    var ret = entryFunction(argc, BigInt(argv));\\n    // if we're not running an evented main loop, it's time to exit`, `  try {\\n    var ret = entryFunction(argc, BigInt(argv));\\n    ofile = FS.readFile(\"./out.o\");\\n    console.log(ofile);\\n    // if we're not running an evented main loop, it's time to exit`, \"callMain try add ofile read/log\");\n\n  // 5) callMain catch: add ofile read/log\n  src = mustReplace(src, `  } catch (e) {\\n    return handleException(e);\\n  }`, `  } catch (e) {\\n    ofile = FS.readFile(\"./out.o\");\\n    console.log(ofile);\\n    return handleException(e);\\n  }`, \"callMain catch add ofile read/log\");\n\n  // 6) run(): comment dependenciesFulfilled assignment in first guard\n  src = mustReplace(src, `  if (runDependencies > 0) {\\n    dependenciesFulfilled = run;\\n    return;\\n  }`, `  if (runDependencies > 0) {\\n    // dependenciesFulfilled = run;\\n    return;\\n  }`, \"run(): comment dependenciesFulfilled in first guard\");\n\n  // 7) doRun(): inject asm_files block after initRuntime(); and comment readyPromiseResolve\n  src = mustReplace(src, `    initRuntime();\\n    preMain();\\n    readyPromiseResolve(Module);\\n    Module[\"onRuntimeInitialized\"]?.();`, `    initRuntime();\\n    var asm_files = args.pop();\\n    for (let i = 0; i < asm_files.length; i ++ ){\\n      FS.writeFile('./'+asm_files[i].name, asm_files[i].code);\\n      args.push('./'+asm_files[i].name);\\n    }\\n    // for(var i = 2; i < args.length; i++) {\\n    //   FS.writeFile('./code' + (i - 2) + '.s', args[i]);\\n    //   args[i] = 'code' + (i - 2) + '.s';\\n    // }\\n    args = [\\\"-o\\\",\\\"out.o\\\", ...args, /*\\\"-march=rv64imfdv\\\", \\\"-mabi=lp64d\\\", \\\"code.s\\\"*/];\\n    preMain();\\n    // readyPromiseResolve(Module);\\n    Module[\\\"onRuntimeInitialized\\\"]?.();`, \"doRun(): inject asm_files + comment readyPromiseResolve\");\n\n  // 8) run(): revert conditional callMain back to direct callMain(args);\n  src = mustReplace(src, `    if (!noInitialRun) callMain(args);`, `    callMain(args);`, \"run(): callMain unconditional\");\n\n  // 9) bottom: comment out run();\n  src = mustReplace(src, `\\nrun();\\n`, `\\n// run();\\n`, \"comment run() at bottom\");\n\n  // 10) add readyPromiseResolve(Module); near end before return moduleRtn\n  // (dejamos el mismo espaciado típico del fichero “original”)\n  src = mustReplace(src, `\\n\\n\\n  return moduleRtn;`, `\\n\\n  readyPromiseResolve(Module);\\n  return moduleRtn;`, \"add final readyPromiseResolve before return moduleRtn\");\n\n  // 11) Deactivate the final wrapper IIFE (comment it out)\n  src = mustReplace(src, `(() => {\\n  // Create a small, never-async wrapper around Module which\\n  // checks for callers incorrectly using it with \\`new\\`.\\n  var real_Module = Module;\\n  Module = function(arg) {\\n    if (new.target) throw new Error(\"Module() should not be called with \\`new Module()\\`\");\\n    return real_Module(arg);\\n  }\\n})();`, `// (() => {\\n//   // Create a small, never-async wrapper around Module which\\n//   // checks for callers incorrectly using it with \\`new\\`.\\n//   var real_Module = Module;\\n//   Module = function(arg) {\\n//     if (new.target) throw new Error(\"Module() should not be called with \\`new Module()\\`\");\\n//     return real_Module(arg);\\n//   }\\n// })();`, \"comment Module wrapper IIFE\");\n\n  // 12) Add extra blank line before missingLibrarySymbols (como en el otro fichero)\n  src = src.replace(`Module[\"FS\"] = FS;\\n\\nvar missingLibrarySymbols = [`, `Module[\"FS\"] = FS;\\n\\n\\nvar missingLibrarySymbols = [`);\n\n  // ------------------------------------------------------------------\n  // FIX ROBUSTO: asegurar \"return ofile;\" dentro de function run(...)\n  // (sin depender de que el patrón \"checkStackCookie();\\n}\" sea exacto)\n  // ------------------------------------------------------------------\n  (function ensureReturnOfileInRun() {\n    if (src.includes(\"return ofile;\")) return;\n\n    // Busca el bloque de run() y mete el return tras checkStackCookie();\n    const re = /(function run\\s*\\([^)]*\\)\\s*\\{[\\s\\S]*?checkStackCookie\\(\\);\\s*\\n)([\\t ]*)\\}/m;\n    if (!re.test(src)) {\n      throw new Error(\"run() with checkStackCookie() not found to inject return ofile;\");\n    }\n    src = src.replace(re, `$1$2  return ofile;\\n$2}`);\n  })();\n  return src;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtdXN0UmVwbGFjZSIsInNyYyIsImZyb20iLCJ0byIsImxhYmVsIiwiaW5jbHVkZXMiLCJFcnJvciIsInJlcGxhY2UiLCJtb2R1bGUiLCJleHBvcnRzIiwidHJhbnNmb3JtZXIiLCJmaWxlSW5mbyIsInNvdXJjZSIsInN0YXJ0c1dpdGgiLCJyZXBsYWNlQWxsIiwiZW5zdXJlUmV0dXJuT2ZpbGVJblJ1biIsInJlIiwidGVzdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvanVhbmNhcmxvcy9Fc2NyaXRvcmlvL3BydWViYS9jcmVhdG9yLXNhaWwtYXNzZW1ibGVyL3Rvb2xjaGFpbl9idWlsZC8iLCJzb3VyY2VzIjpbInRyYW5zZm9ybS1hczY0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICoganNjb2Rlc2hpZnQgdHJhbnNmb3JtICh0ZXh0LWJhc2VkKTogTk9NQlJFUyBJTlZFUlRJRE9TXG4gKiBDb252aWVydGUgZWwgZmljaGVybyBxdWUgYWhvcmEgdGllbmVzIGNvbW8gL21udC9kYXRhL2Rlc2VhZG8uanNcbiAqIGFsIGNvbnRlbmlkbyBkZWwgcXVlIGFob3JhIHRpZW5lcyBjb21vIC9tbnQvZGF0YS9vcmlnaW5hbC5qc1xuICpcbiAqIFJ1bjpcbiAqICAgbnB4IGpzY29kZXNoaWZ0IC10IHRyYW5zZm9ybS5qcyAvbW50L2RhdGEvZGVzZWFkby5qcyA+IC9tbnQvZGF0YS9zYWxpZGEuanNcbiAqICAgZGlmZiAtdSAvbW50L2RhdGEvc2FsaWRhLmpzIC9tbnQvZGF0YS9vcmlnaW5hbC5qc1xuICovXG5cbmZ1bmN0aW9uIG11c3RSZXBsYWNlKHNyYywgZnJvbSwgdG8sIGxhYmVsKSB7XG4gIGlmICghc3JjLmluY2x1ZGVzKGZyb20pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBQYXR0ZXJuIG5vdCBmb3VuZCBmb3I6ICR7bGFiZWx9YCk7XG4gIH1cbiAgcmV0dXJuIHNyYy5yZXBsYWNlKGZyb20sIHRvKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0cmFuc2Zvcm1lcihmaWxlSW5mbykge1xuICBsZXQgc3JjID0gZmlsZUluZm8uc291cmNlLnJlcGxhY2UoL1xcclxcbi9nLCBcIlxcblwiKTtcblxuICAvLyAxKSBJbnNlcnQgXCJsZXQgb2ZpbGUgPSBudWxsO1wiIGF0IHRvcCBpZiBtaXNzaW5nXG4gIGlmICghc3JjLnN0YXJ0c1dpdGgoXCJsZXQgb2ZpbGUgPSBudWxsO1xcblwiKSkge1xuICAgIHNyYyA9IHNyYy5yZXBsYWNlKC9eXFx1RkVGRj8vLCBcImxldCBvZmlsZSA9IG51bGw7XFxuXCIpO1xuICB9XG5cbiAgLy8gMikgd2FzbSByZW5hbWU6IGFzLW5ldy53YXNtIC0+IGFzLW5ldzY0Lndhc20gKGFsbCBvY2N1cnJlbmNlcylcbiAgc3JjID0gc3JjLnJlcGxhY2VBbGwoXCJhcy1uZXcud2FzbVwiLCBcImFzLW5ldzY0Lndhc21cIik7XG5cbiAgLy8gMykgZXhpdEpTOiBhZGQgb2ZpbGUgcmVhZC9sb2cgcmlnaHQgYWZ0ZXIgZnVuY3Rpb24gaGVhZGVyXG4gIHNyYyA9IG11c3RSZXBsYWNlKFxuICAgIHNyYyxcbiAgICBgLyoqIEBzdXBwcmVzcyB7ZHVwbGljYXRlIH0gKi8gLyoqIEBwYXJhbSB7Ym9vbGVhbnxudW1iZXI9fSBpbXBsaWNpdCAqLyB2YXIgZXhpdEpTID0gKHN0YXR1cywgaW1wbGljaXQpID0+IHtcXG4gIEVYSVRTVEFUVVMgPSBzdGF0dXM7YCxcbiAgICBgLyoqIEBzdXBwcmVzcyB7ZHVwbGljYXRlIH0gKi8gLyoqIEBwYXJhbSB7Ym9vbGVhbnxudW1iZXI9fSBpbXBsaWNpdCAqLyB2YXIgZXhpdEpTID0gKHN0YXR1cywgaW1wbGljaXQpID0+IHtcXG4gIG9maWxlID0gRlMucmVhZEZpbGUoXCIuL291dC5vXCIpO1xcbiAgY29uc29sZS5sb2cob2ZpbGUpO1xcbiAgRVhJVFNUQVRVUyA9IHN0YXR1cztgLFxuICAgIFwiZXhpdEpTIGFkZCBvZmlsZSByZWFkL2xvZ1wiXG4gICk7XG5cbiAgLy8gNCkgY2FsbE1haW4gdHJ5OiBhZGQgb2ZpbGUgcmVhZC9sb2cgYWZ0ZXIgZW50cnlGdW5jdGlvblxuICBzcmMgPSBtdXN0UmVwbGFjZShcbiAgICBzcmMsXG4gICAgYCAgdHJ5IHtcXG4gICAgdmFyIHJldCA9IGVudHJ5RnVuY3Rpb24oYXJnYywgQmlnSW50KGFyZ3YpKTtcXG4gICAgLy8gaWYgd2UncmUgbm90IHJ1bm5pbmcgYW4gZXZlbnRlZCBtYWluIGxvb3AsIGl0J3MgdGltZSB0byBleGl0YCxcbiAgICBgICB0cnkge1xcbiAgICB2YXIgcmV0ID0gZW50cnlGdW5jdGlvbihhcmdjLCBCaWdJbnQoYXJndikpO1xcbiAgICBvZmlsZSA9IEZTLnJlYWRGaWxlKFwiLi9vdXQub1wiKTtcXG4gICAgY29uc29sZS5sb2cob2ZpbGUpO1xcbiAgICAvLyBpZiB3ZSdyZSBub3QgcnVubmluZyBhbiBldmVudGVkIG1haW4gbG9vcCwgaXQncyB0aW1lIHRvIGV4aXRgLFxuICAgIFwiY2FsbE1haW4gdHJ5IGFkZCBvZmlsZSByZWFkL2xvZ1wiXG4gICk7XG5cbiAgLy8gNSkgY2FsbE1haW4gY2F0Y2g6IGFkZCBvZmlsZSByZWFkL2xvZ1xuICBzcmMgPSBtdXN0UmVwbGFjZShcbiAgICBzcmMsXG4gICAgYCAgfSBjYXRjaCAoZSkge1xcbiAgICByZXR1cm4gaGFuZGxlRXhjZXB0aW9uKGUpO1xcbiAgfWAsXG4gICAgYCAgfSBjYXRjaCAoZSkge1xcbiAgICBvZmlsZSA9IEZTLnJlYWRGaWxlKFwiLi9vdXQub1wiKTtcXG4gICAgY29uc29sZS5sb2cob2ZpbGUpO1xcbiAgICByZXR1cm4gaGFuZGxlRXhjZXB0aW9uKGUpO1xcbiAgfWAsXG4gICAgXCJjYWxsTWFpbiBjYXRjaCBhZGQgb2ZpbGUgcmVhZC9sb2dcIlxuICApO1xuXG4gIC8vIDYpIHJ1bigpOiBjb21tZW50IGRlcGVuZGVuY2llc0Z1bGZpbGxlZCBhc3NpZ25tZW50IGluIGZpcnN0IGd1YXJkXG4gIHNyYyA9IG11c3RSZXBsYWNlKFxuICAgIHNyYyxcbiAgICBgICBpZiAocnVuRGVwZW5kZW5jaWVzID4gMCkge1xcbiAgICBkZXBlbmRlbmNpZXNGdWxmaWxsZWQgPSBydW47XFxuICAgIHJldHVybjtcXG4gIH1gLFxuICAgIGAgIGlmIChydW5EZXBlbmRlbmNpZXMgPiAwKSB7XFxuICAgIC8vIGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IHJ1bjtcXG4gICAgcmV0dXJuO1xcbiAgfWAsXG4gICAgXCJydW4oKTogY29tbWVudCBkZXBlbmRlbmNpZXNGdWxmaWxsZWQgaW4gZmlyc3QgZ3VhcmRcIlxuICApO1xuXG4gIC8vIDcpIGRvUnVuKCk6IGluamVjdCBhc21fZmlsZXMgYmxvY2sgYWZ0ZXIgaW5pdFJ1bnRpbWUoKTsgYW5kIGNvbW1lbnQgcmVhZHlQcm9taXNlUmVzb2x2ZVxuICBzcmMgPSBtdXN0UmVwbGFjZShcbiAgICBzcmMsXG4gICAgYCAgICBpbml0UnVudGltZSgpO1xcbiAgICBwcmVNYWluKCk7XFxuICAgIHJlYWR5UHJvbWlzZVJlc29sdmUoTW9kdWxlKTtcXG4gICAgTW9kdWxlW1wib25SdW50aW1lSW5pdGlhbGl6ZWRcIl0/LigpO2AsXG4gICAgYCAgICBpbml0UnVudGltZSgpO1xcbiAgICB2YXIgYXNtX2ZpbGVzID0gYXJncy5wb3AoKTtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhc21fZmlsZXMubGVuZ3RoOyBpICsrICl7XFxuICAgICAgRlMud3JpdGVGaWxlKCcuLycrYXNtX2ZpbGVzW2ldLm5hbWUsIGFzbV9maWxlc1tpXS5jb2RlKTtcXG4gICAgICBhcmdzLnB1c2goJy4vJythc21fZmlsZXNbaV0ubmFtZSk7XFxuICAgIH1cXG4gICAgLy8gZm9yKHZhciBpID0gMjsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcXG4gICAgLy8gICBGUy53cml0ZUZpbGUoJy4vY29kZScgKyAoaSAtIDIpICsgJy5zJywgYXJnc1tpXSk7XFxuICAgIC8vICAgYXJnc1tpXSA9ICdjb2RlJyArIChpIC0gMikgKyAnLnMnO1xcbiAgICAvLyB9XFxuICAgIGFyZ3MgPSBbXFxcIi1vXFxcIixcXFwib3V0Lm9cXFwiLCAuLi5hcmdzLCAvKlxcXCItbWFyY2g9cnY2NGltZmR2XFxcIiwgXFxcIi1tYWJpPWxwNjRkXFxcIiwgXFxcImNvZGUuc1xcXCIqL107XFxuICAgIHByZU1haW4oKTtcXG4gICAgLy8gcmVhZHlQcm9taXNlUmVzb2x2ZShNb2R1bGUpO1xcbiAgICBNb2R1bGVbXFxcIm9uUnVudGltZUluaXRpYWxpemVkXFxcIl0/LigpO2AsXG4gICAgXCJkb1J1bigpOiBpbmplY3QgYXNtX2ZpbGVzICsgY29tbWVudCByZWFkeVByb21pc2VSZXNvbHZlXCJcbiAgKTtcblxuICAvLyA4KSBydW4oKTogcmV2ZXJ0IGNvbmRpdGlvbmFsIGNhbGxNYWluIGJhY2sgdG8gZGlyZWN0IGNhbGxNYWluKGFyZ3MpO1xuICBzcmMgPSBtdXN0UmVwbGFjZShcbiAgICBzcmMsXG4gICAgYCAgICBpZiAoIW5vSW5pdGlhbFJ1bikgY2FsbE1haW4oYXJncyk7YCxcbiAgICBgICAgIGNhbGxNYWluKGFyZ3MpO2AsXG4gICAgXCJydW4oKTogY2FsbE1haW4gdW5jb25kaXRpb25hbFwiXG4gICk7XG5cbiAgLy8gOSkgYm90dG9tOiBjb21tZW50IG91dCBydW4oKTtcbiAgc3JjID0gbXVzdFJlcGxhY2UoXG4gICAgc3JjLFxuICAgIGBcXG5ydW4oKTtcXG5gLFxuICAgIGBcXG4vLyBydW4oKTtcXG5gLFxuICAgIFwiY29tbWVudCBydW4oKSBhdCBib3R0b21cIlxuICApO1xuXG4gIC8vIDEwKSBhZGQgcmVhZHlQcm9taXNlUmVzb2x2ZShNb2R1bGUpOyBuZWFyIGVuZCBiZWZvcmUgcmV0dXJuIG1vZHVsZVJ0blxuICAvLyAoZGVqYW1vcyBlbCBtaXNtbyBlc3BhY2lhZG8gdMOtcGljbyBkZWwgZmljaGVybyDigJxvcmlnaW5hbOKAnSlcbiAgc3JjID0gbXVzdFJlcGxhY2UoXG4gICAgc3JjLFxuICAgIGBcXG5cXG5cXG4gIHJldHVybiBtb2R1bGVSdG47YCxcbiAgICBgXFxuXFxuICByZWFkeVByb21pc2VSZXNvbHZlKE1vZHVsZSk7XFxuICByZXR1cm4gbW9kdWxlUnRuO2AsXG4gICAgXCJhZGQgZmluYWwgcmVhZHlQcm9taXNlUmVzb2x2ZSBiZWZvcmUgcmV0dXJuIG1vZHVsZVJ0blwiXG4gICk7XG5cbiAgLy8gMTEpIERlYWN0aXZhdGUgdGhlIGZpbmFsIHdyYXBwZXIgSUlGRSAoY29tbWVudCBpdCBvdXQpXG4gIHNyYyA9IG11c3RSZXBsYWNlKFxuICAgIHNyYyxcbiAgICBgKCgpID0+IHtcXG4gIC8vIENyZWF0ZSBhIHNtYWxsLCBuZXZlci1hc3luYyB3cmFwcGVyIGFyb3VuZCBNb2R1bGUgd2hpY2hcXG4gIC8vIGNoZWNrcyBmb3IgY2FsbGVycyBpbmNvcnJlY3RseSB1c2luZyBpdCB3aXRoIFxcYG5ld1xcYC5cXG4gIHZhciByZWFsX01vZHVsZSA9IE1vZHVsZTtcXG4gIE1vZHVsZSA9IGZ1bmN0aW9uKGFyZykge1xcbiAgICBpZiAobmV3LnRhcmdldCkgdGhyb3cgbmV3IEVycm9yKFwiTW9kdWxlKCkgc2hvdWxkIG5vdCBiZSBjYWxsZWQgd2l0aCBcXGBuZXcgTW9kdWxlKClcXGBcIik7XFxuICAgIHJldHVybiByZWFsX01vZHVsZShhcmcpO1xcbiAgfVxcbn0pKCk7YCxcbiAgICBgLy8gKCgpID0+IHtcXG4vLyAgIC8vIENyZWF0ZSBhIHNtYWxsLCBuZXZlci1hc3luYyB3cmFwcGVyIGFyb3VuZCBNb2R1bGUgd2hpY2hcXG4vLyAgIC8vIGNoZWNrcyBmb3IgY2FsbGVycyBpbmNvcnJlY3RseSB1c2luZyBpdCB3aXRoIFxcYG5ld1xcYC5cXG4vLyAgIHZhciByZWFsX01vZHVsZSA9IE1vZHVsZTtcXG4vLyAgIE1vZHVsZSA9IGZ1bmN0aW9uKGFyZykge1xcbi8vICAgICBpZiAobmV3LnRhcmdldCkgdGhyb3cgbmV3IEVycm9yKFwiTW9kdWxlKCkgc2hvdWxkIG5vdCBiZSBjYWxsZWQgd2l0aCBcXGBuZXcgTW9kdWxlKClcXGBcIik7XFxuLy8gICAgIHJldHVybiByZWFsX01vZHVsZShhcmcpO1xcbi8vICAgfVxcbi8vIH0pKCk7YCxcbiAgICBcImNvbW1lbnQgTW9kdWxlIHdyYXBwZXIgSUlGRVwiXG4gICk7XG5cbiAgLy8gMTIpIEFkZCBleHRyYSBibGFuayBsaW5lIGJlZm9yZSBtaXNzaW5nTGlicmFyeVN5bWJvbHMgKGNvbW8gZW4gZWwgb3RybyBmaWNoZXJvKVxuICBzcmMgPSBzcmMucmVwbGFjZShcbiAgICBgTW9kdWxlW1wiRlNcIl0gPSBGUztcXG5cXG52YXIgbWlzc2luZ0xpYnJhcnlTeW1ib2xzID0gW2AsXG4gICAgYE1vZHVsZVtcIkZTXCJdID0gRlM7XFxuXFxuXFxudmFyIG1pc3NpbmdMaWJyYXJ5U3ltYm9scyA9IFtgXG4gICk7XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEZJWCBST0JVU1RPOiBhc2VndXJhciBcInJldHVybiBvZmlsZTtcIiBkZW50cm8gZGUgZnVuY3Rpb24gcnVuKC4uLilcbiAgLy8gKHNpbiBkZXBlbmRlciBkZSBxdWUgZWwgcGF0csOzbiBcImNoZWNrU3RhY2tDb29raWUoKTtcXG59XCIgc2VhIGV4YWN0bylcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIChmdW5jdGlvbiBlbnN1cmVSZXR1cm5PZmlsZUluUnVuKCkge1xuICAgIGlmIChzcmMuaW5jbHVkZXMoXCJyZXR1cm4gb2ZpbGU7XCIpKSByZXR1cm47XG5cbiAgICAvLyBCdXNjYSBlbCBibG9xdWUgZGUgcnVuKCkgeSBtZXRlIGVsIHJldHVybiB0cmFzIGNoZWNrU3RhY2tDb29raWUoKTtcbiAgICBjb25zdCByZSA9IC8oZnVuY3Rpb24gcnVuXFxzKlxcKFteKV0qXFwpXFxzKlxce1tcXHNcXFNdKj9jaGVja1N0YWNrQ29va2llXFwoXFwpO1xccypcXG4pKFtcXHQgXSopXFx9L207XG4gICAgaWYgKCFyZS50ZXN0KHNyYykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInJ1bigpIHdpdGggY2hlY2tTdGFja0Nvb2tpZSgpIG5vdCBmb3VuZCB0byBpbmplY3QgcmV0dXJuIG9maWxlO1wiKTtcbiAgICB9XG4gICAgc3JjID0gc3JjLnJlcGxhY2UocmUsIGAkMSQyICByZXR1cm4gb2ZpbGU7XFxuJDJ9YCk7XG4gIH0pKCk7XG5cbiAgcmV0dXJuIHNyYztcbn07XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVNBLFdBQVdBLENBQUNDLEdBQUcsRUFBRUMsSUFBSSxFQUFFQyxFQUFFLEVBQUVDLEtBQUssRUFBRTtFQUN6QyxJQUFJLENBQUNILEdBQUcsQ0FBQ0ksUUFBUSxDQUFDSCxJQUFJLENBQUMsRUFBRTtJQUN2QixNQUFNLElBQUlJLEtBQUssQ0FBQywwQkFBMEJGLEtBQUssRUFBRSxDQUFDO0VBQ3BEO0VBQ0EsT0FBT0gsR0FBRyxDQUFDTSxPQUFPLENBQUNMLElBQUksRUFBRUMsRUFBRSxDQUFDO0FBQzlCO0FBRUFLLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLFNBQVNDLFdBQVdBLENBQUNDLFFBQVEsRUFBRTtFQUM5QyxJQUFJVixHQUFHLEdBQUdVLFFBQVEsQ0FBQ0MsTUFBTSxDQUFDTCxPQUFPLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQzs7RUFFaEQ7RUFDQSxJQUFJLENBQUNOLEdBQUcsQ0FBQ1ksVUFBVSxDQUFDLHFCQUFxQixDQUFDLEVBQUU7SUFDMUNaLEdBQUcsR0FBR0EsR0FBRyxDQUFDTSxPQUFPLENBQUMsVUFBVSxFQUFFLHFCQUFxQixDQUFDO0VBQ3REOztFQUVBO0VBQ0FOLEdBQUcsR0FBR0EsR0FBRyxDQUFDYSxVQUFVLENBQUMsYUFBYSxFQUFFLGVBQWUsQ0FBQzs7RUFFcEQ7RUFDQWIsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCxxSUFBcUksRUFDckksK0xBQStMLEVBQy9MLDJCQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCxnSUFBZ0ksRUFDaEksOExBQThMLEVBQzlMLGlDQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCxzREFBc0QsRUFDdEQsb0hBQW9ILEVBQ3BILG1DQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCxrRkFBa0YsRUFDbEYscUZBQXFGLEVBQ3JGLHFEQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCwrR0FBK0csRUFDL0csMmpCQUEyakIsRUFDM2pCLHlEQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCx3Q0FBd0MsRUFDeEMscUJBQXFCLEVBQ3JCLCtCQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCxZQUFZLEVBQ1osZUFBZSxFQUNmLHlCQUNGLENBQUM7O0VBRUQ7RUFDQTtFQUNBQSxHQUFHLEdBQUdELFdBQVcsQ0FDZkMsR0FBRyxFQUNILDJCQUEyQixFQUMzQix5REFBeUQsRUFDekQsdURBQ0YsQ0FBQzs7RUFFRDtFQUNBQSxHQUFHLEdBQUdELFdBQVcsQ0FDZkMsR0FBRyxFQUNILG9VQUFvVSxFQUNwVSwrVkFBK1YsRUFDL1YsNkJBQ0YsQ0FBQzs7RUFFRDtFQUNBQSxHQUFHLEdBQUdBLEdBQUcsQ0FBQ00sT0FBTyxDQUNmLHFEQUFxRCxFQUNyRCx1REFDRixDQUFDOztFQUVEO0VBQ0E7RUFDQTtFQUNBO0VBQ0EsQ0FBQyxTQUFTUSxzQkFBc0JBLENBQUEsRUFBRztJQUNqQyxJQUFJZCxHQUFHLENBQUNJLFFBQVEsQ0FBQyxlQUFlLENBQUMsRUFBRTs7SUFFbkM7SUFDQSxNQUFNVyxFQUFFLEdBQUcsOEVBQThFO0lBQ3pGLElBQUksQ0FBQ0EsRUFBRSxDQUFDQyxJQUFJLENBQUNoQixHQUFHLENBQUMsRUFBRTtNQUNqQixNQUFNLElBQUlLLEtBQUssQ0FBQyxpRUFBaUUsQ0FBQztJQUNwRjtJQUNBTCxHQUFHLEdBQUdBLEdBQUcsQ0FBQ00sT0FBTyxDQUFDUyxFQUFFLEVBQUUsMEJBQTBCLENBQUM7RUFDbkQsQ0FBQyxFQUFFLENBQUM7RUFFSixPQUFPZixHQUFHO0FBQ1osQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["mustReplace","src","from","to","label","includes","Error","replace","module","exports","transformer","fileInfo","source","startsWith","replaceAll","ensureReturnOfileInRun","re","test"],"sourceRoot":"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/","sources":["transform-as64.js"],"sourcesContent":["/**\n * jscodeshift transform (text-based): NOMBRES INVERTIDOS\n * Convierte el fichero que ahora tienes como /mnt/data/deseado.js\n * al contenido del que ahora tienes como /mnt/data/original.js\n *\n * Run:\n *   npx jscodeshift -t transform.js /mnt/data/deseado.js > /mnt/data/salida.js\n *   diff -u /mnt/data/salida.js /mnt/data/original.js\n */\n\nfunction mustReplace(src, from, to, label) {\n  if (!src.includes(from)) {\n    throw new Error(`Pattern not found for: ${label}`);\n  }\n  return src.replace(from, to);\n}\n\nmodule.exports = function transformer(fileInfo) {\n  let src = fileInfo.source.replace(/\\r\\n/g, \"\\n\");\n\n  // 1) Insert \"let ofile = null;\" at top if missing\n  if (!src.startsWith(\"let ofile = null;\\n\")) {\n    src = src.replace(/^\\uFEFF?/, \"let ofile = null;\\n\");\n  }\n\n  // 2) wasm rename: as-new.wasm -> as-new64.wasm (all occurrences)\n  src = src.replaceAll(\"as-new.wasm\", \"as-new64.wasm\");\n\n  // 3) exitJS: add ofile read/log right after function header\n  src = mustReplace(\n    src,\n    `/** @suppress {duplicate } */ /** @param {boolean|number=} implicit */ var exitJS = (status, implicit) => {\\n  EXITSTATUS = status;`,\n    `/** @suppress {duplicate } */ /** @param {boolean|number=} implicit */ var exitJS = (status, implicit) => {\\n  ofile = FS.readFile(\"./out.o\");\\n  console.log(ofile);\\n  EXITSTATUS = status;`,\n    \"exitJS add ofile read/log\"\n  );\n\n  // 4) callMain try: add ofile read/log after entryFunction\n  src = mustReplace(\n    src,\n    `  try {\\n    var ret = entryFunction(argc, BigInt(argv));\\n    // if we're not running an evented main loop, it's time to exit`,\n    `  try {\\n    var ret = entryFunction(argc, BigInt(argv));\\n    ofile = FS.readFile(\"./out.o\");\\n    console.log(ofile);\\n    // if we're not running an evented main loop, it's time to exit`,\n    \"callMain try add ofile read/log\"\n  );\n\n  // 5) callMain catch: add ofile read/log\n  src = mustReplace(\n    src,\n    `  } catch (e) {\\n    return handleException(e);\\n  }`,\n    `  } catch (e) {\\n    ofile = FS.readFile(\"./out.o\");\\n    console.log(ofile);\\n    return handleException(e);\\n  }`,\n    \"callMain catch add ofile read/log\"\n  );\n\n  // 6) run(): comment dependenciesFulfilled assignment in first guard\n  src = mustReplace(\n    src,\n    `  if (runDependencies > 0) {\\n    dependenciesFulfilled = run;\\n    return;\\n  }`,\n    `  if (runDependencies > 0) {\\n    // dependenciesFulfilled = run;\\n    return;\\n  }`,\n    \"run(): comment dependenciesFulfilled in first guard\"\n  );\n\n  // 7) doRun(): inject asm_files block after initRuntime(); and comment readyPromiseResolve\n  src = mustReplace(\n    src,\n    `    initRuntime();\\n    preMain();\\n    readyPromiseResolve(Module);\\n    Module[\"onRuntimeInitialized\"]?.();`,\n    `    initRuntime();\\n    var asm_files = args.pop();\\n    for (let i = 0; i < asm_files.length; i ++ ){\\n      FS.writeFile('./'+asm_files[i].name, asm_files[i].code);\\n      args.push('./'+asm_files[i].name);\\n    }\\n    // for(var i = 2; i < args.length; i++) {\\n    //   FS.writeFile('./code' + (i - 2) + '.s', args[i]);\\n    //   args[i] = 'code' + (i - 2) + '.s';\\n    // }\\n    args = [\\\"-o\\\",\\\"out.o\\\", ...args, /*\\\"-march=rv64imfdv\\\", \\\"-mabi=lp64d\\\", \\\"code.s\\\"*/];\\n    preMain();\\n    // readyPromiseResolve(Module);\\n    Module[\\\"onRuntimeInitialized\\\"]?.();`,\n    \"doRun(): inject asm_files + comment readyPromiseResolve\"\n  );\n\n  // 8) run(): revert conditional callMain back to direct callMain(args);\n  src = mustReplace(\n    src,\n    `    if (!noInitialRun) callMain(args);`,\n    `    callMain(args);`,\n    \"run(): callMain unconditional\"\n  );\n\n  // 9) bottom: comment out run();\n  src = mustReplace(\n    src,\n    `\\nrun();\\n`,\n    `\\n// run();\\n`,\n    \"comment run() at bottom\"\n  );\n\n  // 10) add readyPromiseResolve(Module); near end before return moduleRtn\n  // (dejamos el mismo espaciado típico del fichero “original”)\n  src = mustReplace(\n    src,\n    `\\n\\n\\n  return moduleRtn;`,\n    `\\n\\n  readyPromiseResolve(Module);\\n  return moduleRtn;`,\n    \"add final readyPromiseResolve before return moduleRtn\"\n  );\n\n  // 11) Deactivate the final wrapper IIFE (comment it out)\n  src = mustReplace(\n    src,\n    `(() => {\\n  // Create a small, never-async wrapper around Module which\\n  // checks for callers incorrectly using it with \\`new\\`.\\n  var real_Module = Module;\\n  Module = function(arg) {\\n    if (new.target) throw new Error(\"Module() should not be called with \\`new Module()\\`\");\\n    return real_Module(arg);\\n  }\\n})();`,\n    `// (() => {\\n//   // Create a small, never-async wrapper around Module which\\n//   // checks for callers incorrectly using it with \\`new\\`.\\n//   var real_Module = Module;\\n//   Module = function(arg) {\\n//     if (new.target) throw new Error(\"Module() should not be called with \\`new Module()\\`\");\\n//     return real_Module(arg);\\n//   }\\n// })();`,\n    \"comment Module wrapper IIFE\"\n  );\n\n  // 12) Add extra blank line before missingLibrarySymbols (como en el otro fichero)\n  src = src.replace(\n    `Module[\"FS\"] = FS;\\n\\nvar missingLibrarySymbols = [`,\n    `Module[\"FS\"] = FS;\\n\\n\\nvar missingLibrarySymbols = [`\n  );\n\n  // ------------------------------------------------------------------\n  // FIX ROBUSTO: asegurar \"return ofile;\" dentro de function run(...)\n  // (sin depender de que el patrón \"checkStackCookie();\\n}\" sea exacto)\n  // ------------------------------------------------------------------\n  (function ensureReturnOfileInRun() {\n    if (src.includes(\"return ofile;\")) return;\n\n    // Busca el bloque de run() y mete el return tras checkStackCookie();\n    const re = /(function run\\s*\\([^)]*\\)\\s*\\{[\\s\\S]*?checkStackCookie\\(\\);\\s*\\n)([\\t ]*)\\}/m;\n    if (!re.test(src)) {\n      throw new Error(\"run() with checkStackCookie() not found to inject return ofile;\");\n    }\n    src = src.replace(re, `$1$2  return ofile;\\n$2}`);\n  })();\n\n  return src;\n};\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,WAAWA,CAACC,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAEC,KAAK,EAAE;EACzC,IAAI,CAACH,GAAG,CAACI,QAAQ,CAACH,IAAI,CAAC,EAAE;IACvB,MAAM,IAAII,KAAK,CAAC,0BAA0BF,KAAK,EAAE,CAAC;EACpD;EACA,OAAOH,GAAG,CAACM,OAAO,CAACL,IAAI,EAAEC,EAAE,CAAC;AAC9B;AAEAK,MAAM,CAACC,OAAO,GAAG,SAASC,WAAWA,CAACC,QAAQ,EAAE;EAC9C,IAAIV,GAAG,GAAGU,QAAQ,CAACC,MAAM,CAACL,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC;;EAEhD;EACA,IAAI,CAACN,GAAG,CAACY,UAAU,CAAC,qBAAqB,CAAC,EAAE;IAC1CZ,GAAG,GAAGA,GAAG,CAACM,OAAO,CAAC,UAAU,EAAE,qBAAqB,CAAC;EACtD;;EAEA;EACAN,GAAG,GAAGA,GAAG,CAACa,UAAU,CAAC,aAAa,EAAE,eAAe,CAAC;;EAEpD;EACAb,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,qIAAqI,EACrI,+LAA+L,EAC/L,2BACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,gIAAgI,EAChI,8LAA8L,EAC9L,iCACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,sDAAsD,EACtD,oHAAoH,EACpH,mCACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,kFAAkF,EAClF,qFAAqF,EACrF,qDACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,+GAA+G,EAC/G,2jBAA2jB,EAC3jB,yDACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,wCAAwC,EACxC,qBAAqB,EACrB,+BACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,YAAY,EACZ,eAAe,EACf,yBACF,CAAC;;EAED;EACA;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,2BAA2B,EAC3B,yDAAyD,EACzD,uDACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,oUAAoU,EACpU,+VAA+V,EAC/V,6BACF,CAAC;;EAED;EACAA,GAAG,GAAGA,GAAG,CAACM,OAAO,CACf,qDAAqD,EACrD,uDACF,CAAC;;EAED;EACA;EACA;EACA;EACA,CAAC,SAASQ,sBAAsBA,CAAA,EAAG;IACjC,IAAId,GAAG,CAACI,QAAQ,CAAC,eAAe,CAAC,EAAE;;IAEnC;IACA,MAAMW,EAAE,GAAG,8EAA8E;IACzF,IAAI,CAACA,EAAE,CAACC,IAAI,CAAChB,GAAG,CAAC,EAAE;MACjB,MAAM,IAAIK,KAAK,CAAC,iEAAiE,CAAC;IACpF;IACAL,GAAG,GAAGA,GAAG,CAACM,OAAO,CAACS,EAAE,EAAE,0BAA0B,CAAC;EACnD,CAAC,EAAE,CAAC;EAEJ,OAAOf,GAAG;AACZ,CAAC","ignoreList":[]}},"mtime":1770192536790},"{\"assumptions\":{},\"sourceRoot\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/\",\"configFile\":false,\"babelrc\":false,\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build\",\"filename\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/transform-ld32.js\",\"targets\":{},\"cloneInputAst\":true,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-flow-strip-types\",\"visitor\":{\"Program\":{\"enter\":[null]},\"ImportDeclaration\":{\"enter\":[null,null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"TypeCastExpression\":{\"enter\":[null,null]},\"CallExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"ImportSpecifier\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"AnyTypeAnnotation\":{\"enter\":[null]},\"ArrayTypeAnnotation\":{\"enter\":[null]},\"BooleanTypeAnnotation\":{\"enter\":[null]},\"BooleanLiteralTypeAnnotation\":{\"enter\":[null]},\"NullLiteralTypeAnnotation\":{\"enter\":[null]},\"ClassImplements\":{\"enter\":[null]},\"DeclareClass\":{\"enter\":[null]},\"DeclareFunction\":{\"enter\":[null]},\"DeclareInterface\":{\"enter\":[null]},\"DeclareModule\":{\"enter\":[null]},\"DeclareModuleExports\":{\"enter\":[null]},\"DeclareTypeAlias\":{\"enter\":[null]},\"DeclareOpaqueType\":{\"enter\":[null]},\"DeclareVariable\":{\"enter\":[null]},\"DeclareExportDeclaration\":{\"enter\":[null]},\"DeclareExportAllDeclaration\":{\"enter\":[null]},\"DeclaredPredicate\":{\"enter\":[null]},\"ExistsTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeParam\":{\"enter\":[null]},\"GenericTypeAnnotation\":{\"enter\":[null]},\"InferredPredicate\":{\"enter\":[null]},\"InterfaceExtends\":{\"enter\":[null]},\"InterfaceDeclaration\":{\"enter\":[null]},\"InterfaceTypeAnnotation\":{\"enter\":[null]},\"IntersectionTypeAnnotation\":{\"enter\":[null]},\"MixedTypeAnnotation\":{\"enter\":[null]},\"EmptyTypeAnnotation\":{\"enter\":[null]},\"NullableTypeAnnotation\":{\"enter\":[null]},\"NumberLiteralTypeAnnotation\":{\"enter\":[null]},\"NumberTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeInternalSlot\":{\"enter\":[null]},\"ObjectTypeCallProperty\":{\"enter\":[null]},\"ObjectTypeIndexer\":{\"enter\":[null]},\"ObjectTypeProperty\":{\"enter\":[null]},\"ObjectTypeSpreadProperty\":{\"enter\":[null]},\"OpaqueType\":{\"enter\":[null]},\"QualifiedTypeIdentifier\":{\"enter\":[null]},\"StringLiteralTypeAnnotation\":{\"enter\":[null]},\"StringTypeAnnotation\":{\"enter\":[null]},\"SymbolTypeAnnotation\":{\"enter\":[null]},\"ThisTypeAnnotation\":{\"enter\":[null]},\"TupleTypeAnnotation\":{\"enter\":[null]},\"TypeofTypeAnnotation\":{\"enter\":[null]},\"TypeAlias\":{\"enter\":[null]},\"TypeAnnotation\":{\"enter\":[null]},\"TypeParameter\":{\"enter\":[null]},\"TypeParameterDeclaration\":{\"enter\":[null]},\"TypeParameterInstantiation\":{\"enter\":[null]},\"UnionTypeAnnotation\":{\"enter\":[null]},\"Variance\":{\"enter\":[null]},\"VoidTypeAnnotation\":{\"enter\":[null]},\"EnumDeclaration\":{\"enter\":[null]},\"EnumBooleanBody\":{\"enter\":[null]},\"EnumNumberBody\":{\"enter\":[null]},\"EnumStringBody\":{\"enter\":[null]},\"EnumSymbolBody\":{\"enter\":[null]},\"EnumBooleanMember\":{\"enter\":[null]},\"EnumNumberMember\":{\"enter\":[null]},\"EnumStringMember\":{\"enter\":[null]},\"EnumDefaultedMember\":{\"enter\":[null]},\"IndexedAccessType\":{\"enter\":[null]},\"OptionalIndexedAccessType\":{\"enter\":[null]},\"ExportAllDeclaration\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]}],\"presets\":[]}:7.29.0:development":{"value":{"code":"\"use strict\";\n\n/**\n * jscodeshift transform (text-based): /mnt/data/original.js -> /mnt/data/deseado.js\n *\n * Run:\n *   npx jscodeshift -t transform.js /mnt/data/original.js > /mnt/data/salida.js\n *   diff -u /mnt/data/salida.js /mnt/data/deseado.js\n */\n\nfunction mustReplace(src, from, to, label) {\n  if (!src.includes(from)) {\n    throw new Error(`Pattern not found for: ${label}`);\n  }\n  return src.replace(from, to);\n}\nmodule.exports = function transformer(fileInfo) {\n  let src = fileInfo.source.replace(/\\r\\n/g, \"\\n\");\n\n  // 0) Normaliza: quita 1 newline inicial si existe (tu original empieza con '\\n')\n  if (src.startsWith(\"\\n\")) src = src.slice(1);\n\n  // 1) Header: añade let elfile + import libs_to_load antes de Module\n  if (!src.startsWith('let elfile = null;\\n')) {\n    src = mustReplace(src, \"var Module = (() => {\\n\", 'let elfile = null;\\nimport { libs_to_load } from \"../CNAssambler.mjs\";\\nvar Module = (() => {\\n', \"prepend elfile + import\");\n  }\n\n  // 2) Comment out dependenciesFulfilled block\n  const depFrom = `dependenciesFulfilled = function runCaller() {\n if (!calledRun) run();\n if (!calledRun) dependenciesFulfilled = runCaller;\n};`;\n  const depTo = `// dependenciesFulfilled = function runCaller() {\n//  if (!calledRun) run();\n//  if (!calledRun) dependenciesFulfilled = runCaller;\n// };`;\n  src = mustReplace(src, depFrom, depTo, \"dependenciesFulfilled comment-out\");\n\n  // 3) run(): insert shouldRunNow = true; at top\n  src = mustReplace(src, \"function run(args) {\\n args = args || arguments_;\", \"function run(args) {\\n  shouldRunNow = true;\\n args = args || arguments_;\", \"run() insert shouldRunNow=true\");\n\n  // 4) doRun(): after initRuntime(), write linker.ld + input.o + libs_to_load\n  src = mustReplace(src, \"  initRuntime();\\n  preMain();\\n  readyPromiseResolve(Module);\", \"  initRuntime();\\n  FS.writeFile(\\\"./linker.ld\\\", args[0]);\\n  args.shift();\\n  FS.writeFile(\\\"./input.o\\\", args[0]);\\n  args.shift();\\n  for (let i = 0; i < libs_to_load.length; i++){\\n    FS.writeFile(\\\"./\\\" + libs_to_load[i].name, libs_to_load[i].file);\\n  }\\n  preMain();\\n  readyPromiseResolve(Module);\", \"inject linker.ld/input.o/libs_to_load after initRuntime\");\n\n  // 5) exit(): read output.elf + log at function start\n  src = mustReplace(src, \"function exit(status, implicit) {\\n EXITSTATUS = status;\", \"function exit(status, implicit) {\\n  elfile = FS.readFile(\\\"./output.elf\\\");\\n  console.log(elfile);\\n EXITSTATUS = status;\", \"exit() insert elfile read/log\");\n\n  // 6) bottom: comment out run(); and add readyPromiseResolve(Module);\n  src = mustReplace(src, \"\\nrun();\\n\\n\\n  return Module.ready\", \"\\n// run();\\n  readyPromiseResolve(Module);\\n\\n  return Module.ready\", \"bottom run() -> commented + readyPromiseResolve\");\n\n  // 7) ROBUST: asegurar que run() devuelve elfile tras checkStackCookie()\n  // (no dependemos de que el bloque final sea exactamente igual)\n  (function ensureReturnElfileInRun() {\n    if (src.includes(\"return elfile;\")) return;\n    const re = /(function run\\s*\\([^)]*\\)\\s*\\{[\\s\\S]*?checkStackCookie\\(\\);\\s*\\n)([\\t ]*)\\}/m;\n    if (!re.test(src)) {\n      throw new Error(\"run() with checkStackCookie() not found to inject return elfile;\");\n    }\n\n    // Inserta exactamente como en deseado:\n    // //  FS.readFile(\"./output.elf\");\n    // return elfile;\n    src = src.replace(re, `$1$2//  FS.readFile(\"./output.elf\");\\n$2return elfile;\\n$2}`);\n  })();\n  return src;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtdXN0UmVwbGFjZSIsInNyYyIsImZyb20iLCJ0byIsImxhYmVsIiwiaW5jbHVkZXMiLCJFcnJvciIsInJlcGxhY2UiLCJtb2R1bGUiLCJleHBvcnRzIiwidHJhbnNmb3JtZXIiLCJmaWxlSW5mbyIsInNvdXJjZSIsInN0YXJ0c1dpdGgiLCJzbGljZSIsImRlcEZyb20iLCJkZXBUbyIsImVuc3VyZVJldHVybkVsZmlsZUluUnVuIiwicmUiLCJ0ZXN0Il0sInNvdXJjZVJvb3QiOiIvaG9tZS9qdWFuY2FybG9zL0VzY3JpdG9yaW8vcHJ1ZWJhL2NyZWF0b3Itc2FpbC1hc3NlbWJsZXIvdG9vbGNoYWluX2J1aWxkLyIsInNvdXJjZXMiOlsidHJhbnNmb3JtLWxkMzIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBqc2NvZGVzaGlmdCB0cmFuc2Zvcm0gKHRleHQtYmFzZWQpOiAvbW50L2RhdGEvb3JpZ2luYWwuanMgLT4gL21udC9kYXRhL2Rlc2VhZG8uanNcbiAqXG4gKiBSdW46XG4gKiAgIG5weCBqc2NvZGVzaGlmdCAtdCB0cmFuc2Zvcm0uanMgL21udC9kYXRhL29yaWdpbmFsLmpzID4gL21udC9kYXRhL3NhbGlkYS5qc1xuICogICBkaWZmIC11IC9tbnQvZGF0YS9zYWxpZGEuanMgL21udC9kYXRhL2Rlc2VhZG8uanNcbiAqL1xuXG5mdW5jdGlvbiBtdXN0UmVwbGFjZShzcmMsIGZyb20sIHRvLCBsYWJlbCkge1xuICBpZiAoIXNyYy5pbmNsdWRlcyhmcm9tKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgUGF0dGVybiBub3QgZm91bmQgZm9yOiAke2xhYmVsfWApO1xuICB9XG4gIHJldHVybiBzcmMucmVwbGFjZShmcm9tLCB0byk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJhbnNmb3JtZXIoZmlsZUluZm8pIHtcbiAgbGV0IHNyYyA9IGZpbGVJbmZvLnNvdXJjZS5yZXBsYWNlKC9cXHJcXG4vZywgXCJcXG5cIik7XG5cbiAgLy8gMCkgTm9ybWFsaXphOiBxdWl0YSAxIG5ld2xpbmUgaW5pY2lhbCBzaSBleGlzdGUgKHR1IG9yaWdpbmFsIGVtcGllemEgY29uICdcXG4nKVxuICBpZiAoc3JjLnN0YXJ0c1dpdGgoXCJcXG5cIikpIHNyYyA9IHNyYy5zbGljZSgxKTtcblxuICAvLyAxKSBIZWFkZXI6IGHDsWFkZSBsZXQgZWxmaWxlICsgaW1wb3J0IGxpYnNfdG9fbG9hZCBhbnRlcyBkZSBNb2R1bGVcbiAgaWYgKCFzcmMuc3RhcnRzV2l0aCgnbGV0IGVsZmlsZSA9IG51bGw7XFxuJykpIHtcbiAgICBzcmMgPSBtdXN0UmVwbGFjZShcbiAgICAgIHNyYyxcbiAgICAgIFwidmFyIE1vZHVsZSA9ICgoKSA9PiB7XFxuXCIsXG4gICAgICAnbGV0IGVsZmlsZSA9IG51bGw7XFxuaW1wb3J0IHsgbGlic190b19sb2FkIH0gZnJvbSBcIi4uL0NOQXNzYW1ibGVyLm1qc1wiO1xcbnZhciBNb2R1bGUgPSAoKCkgPT4ge1xcbicsXG4gICAgICBcInByZXBlbmQgZWxmaWxlICsgaW1wb3J0XCJcbiAgICApO1xuICB9XG5cbiAgLy8gMikgQ29tbWVudCBvdXQgZGVwZW5kZW5jaWVzRnVsZmlsbGVkIGJsb2NrXG4gIGNvbnN0IGRlcEZyb20gPVxuYGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IGZ1bmN0aW9uIHJ1bkNhbGxlcigpIHtcbiBpZiAoIWNhbGxlZFJ1bikgcnVuKCk7XG4gaWYgKCFjYWxsZWRSdW4pIGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IHJ1bkNhbGxlcjtcbn07YDtcblxuICBjb25zdCBkZXBUbyA9XG5gLy8gZGVwZW5kZW5jaWVzRnVsZmlsbGVkID0gZnVuY3Rpb24gcnVuQ2FsbGVyKCkge1xuLy8gIGlmICghY2FsbGVkUnVuKSBydW4oKTtcbi8vICBpZiAoIWNhbGxlZFJ1bikgZGVwZW5kZW5jaWVzRnVsZmlsbGVkID0gcnVuQ2FsbGVyO1xuLy8gfTtgO1xuXG4gIHNyYyA9IG11c3RSZXBsYWNlKHNyYywgZGVwRnJvbSwgZGVwVG8sIFwiZGVwZW5kZW5jaWVzRnVsZmlsbGVkIGNvbW1lbnQtb3V0XCIpO1xuXG4gIC8vIDMpIHJ1bigpOiBpbnNlcnQgc2hvdWxkUnVuTm93ID0gdHJ1ZTsgYXQgdG9wXG4gIHNyYyA9IG11c3RSZXBsYWNlKFxuICAgIHNyYyxcbiAgICBcImZ1bmN0aW9uIHJ1bihhcmdzKSB7XFxuIGFyZ3MgPSBhcmdzIHx8IGFyZ3VtZW50c187XCIsXG4gICAgXCJmdW5jdGlvbiBydW4oYXJncykge1xcbiAgc2hvdWxkUnVuTm93ID0gdHJ1ZTtcXG4gYXJncyA9IGFyZ3MgfHwgYXJndW1lbnRzXztcIixcbiAgICBcInJ1bigpIGluc2VydCBzaG91bGRSdW5Ob3c9dHJ1ZVwiXG4gICk7XG5cbiAgLy8gNCkgZG9SdW4oKTogYWZ0ZXIgaW5pdFJ1bnRpbWUoKSwgd3JpdGUgbGlua2VyLmxkICsgaW5wdXQubyArIGxpYnNfdG9fbG9hZFxuICBzcmMgPSBtdXN0UmVwbGFjZShcbiAgICBzcmMsXG4gICAgXCIgIGluaXRSdW50aW1lKCk7XFxuICBwcmVNYWluKCk7XFxuICByZWFkeVByb21pc2VSZXNvbHZlKE1vZHVsZSk7XCIsXG4gICAgXCIgIGluaXRSdW50aW1lKCk7XFxuICBGUy53cml0ZUZpbGUoXFxcIi4vbGlua2VyLmxkXFxcIiwgYXJnc1swXSk7XFxuICBhcmdzLnNoaWZ0KCk7XFxuICBGUy53cml0ZUZpbGUoXFxcIi4vaW5wdXQub1xcXCIsIGFyZ3NbMF0pO1xcbiAgYXJncy5zaGlmdCgpO1xcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaWJzX3RvX2xvYWQubGVuZ3RoOyBpKyspe1xcbiAgICBGUy53cml0ZUZpbGUoXFxcIi4vXFxcIiArIGxpYnNfdG9fbG9hZFtpXS5uYW1lLCBsaWJzX3RvX2xvYWRbaV0uZmlsZSk7XFxuICB9XFxuICBwcmVNYWluKCk7XFxuICByZWFkeVByb21pc2VSZXNvbHZlKE1vZHVsZSk7XCIsXG4gICAgXCJpbmplY3QgbGlua2VyLmxkL2lucHV0Lm8vbGlic190b19sb2FkIGFmdGVyIGluaXRSdW50aW1lXCJcbiAgKTtcblxuICAvLyA1KSBleGl0KCk6IHJlYWQgb3V0cHV0LmVsZiArIGxvZyBhdCBmdW5jdGlvbiBzdGFydFxuICBzcmMgPSBtdXN0UmVwbGFjZShcbiAgICBzcmMsXG4gICAgXCJmdW5jdGlvbiBleGl0KHN0YXR1cywgaW1wbGljaXQpIHtcXG4gRVhJVFNUQVRVUyA9IHN0YXR1cztcIixcbiAgICBcImZ1bmN0aW9uIGV4aXQoc3RhdHVzLCBpbXBsaWNpdCkge1xcbiAgZWxmaWxlID0gRlMucmVhZEZpbGUoXFxcIi4vb3V0cHV0LmVsZlxcXCIpO1xcbiAgY29uc29sZS5sb2coZWxmaWxlKTtcXG4gRVhJVFNUQVRVUyA9IHN0YXR1cztcIixcbiAgICBcImV4aXQoKSBpbnNlcnQgZWxmaWxlIHJlYWQvbG9nXCJcbiAgKTtcblxuICAvLyA2KSBib3R0b206IGNvbW1lbnQgb3V0IHJ1bigpOyBhbmQgYWRkIHJlYWR5UHJvbWlzZVJlc29sdmUoTW9kdWxlKTtcbiAgc3JjID0gbXVzdFJlcGxhY2UoXG4gICAgc3JjLFxuICAgIFwiXFxucnVuKCk7XFxuXFxuXFxuICByZXR1cm4gTW9kdWxlLnJlYWR5XCIsXG4gICAgXCJcXG4vLyBydW4oKTtcXG4gIHJlYWR5UHJvbWlzZVJlc29sdmUoTW9kdWxlKTtcXG5cXG4gIHJldHVybiBNb2R1bGUucmVhZHlcIixcbiAgICBcImJvdHRvbSBydW4oKSAtPiBjb21tZW50ZWQgKyByZWFkeVByb21pc2VSZXNvbHZlXCJcbiAgKTtcblxuICAvLyA3KSBST0JVU1Q6IGFzZWd1cmFyIHF1ZSBydW4oKSBkZXZ1ZWx2ZSBlbGZpbGUgdHJhcyBjaGVja1N0YWNrQ29va2llKClcbiAgLy8gKG5vIGRlcGVuZGVtb3MgZGUgcXVlIGVsIGJsb3F1ZSBmaW5hbCBzZWEgZXhhY3RhbWVudGUgaWd1YWwpXG4gIChmdW5jdGlvbiBlbnN1cmVSZXR1cm5FbGZpbGVJblJ1bigpIHtcbiAgICBpZiAoc3JjLmluY2x1ZGVzKFwicmV0dXJuIGVsZmlsZTtcIikpIHJldHVybjtcblxuICAgIGNvbnN0IHJlID1cbiAgICAgIC8oZnVuY3Rpb24gcnVuXFxzKlxcKFteKV0qXFwpXFxzKlxce1tcXHNcXFNdKj9jaGVja1N0YWNrQ29va2llXFwoXFwpO1xccypcXG4pKFtcXHQgXSopXFx9L207XG5cbiAgICBpZiAoIXJlLnRlc3Qoc3JjKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwicnVuKCkgd2l0aCBjaGVja1N0YWNrQ29va2llKCkgbm90IGZvdW5kIHRvIGluamVjdCByZXR1cm4gZWxmaWxlO1wiKTtcbiAgICB9XG5cbiAgICAvLyBJbnNlcnRhIGV4YWN0YW1lbnRlIGNvbW8gZW4gZGVzZWFkbzpcbiAgICAvLyAvLyAgRlMucmVhZEZpbGUoXCIuL291dHB1dC5lbGZcIik7XG4gICAgLy8gcmV0dXJuIGVsZmlsZTtcbiAgICBzcmMgPSBzcmMucmVwbGFjZShcbiAgICAgIHJlLFxuICAgICAgYCQxJDIvLyAgRlMucmVhZEZpbGUoXCIuL291dHB1dC5lbGZcIik7XFxuJDJyZXR1cm4gZWxmaWxlO1xcbiQyfWBcbiAgICApO1xuICB9KSgpO1xuXG4gIHJldHVybiBzcmM7XG59O1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVNBLFdBQVdBLENBQUNDLEdBQUcsRUFBRUMsSUFBSSxFQUFFQyxFQUFFLEVBQUVDLEtBQUssRUFBRTtFQUN6QyxJQUFJLENBQUNILEdBQUcsQ0FBQ0ksUUFBUSxDQUFDSCxJQUFJLENBQUMsRUFBRTtJQUN2QixNQUFNLElBQUlJLEtBQUssQ0FBQywwQkFBMEJGLEtBQUssRUFBRSxDQUFDO0VBQ3BEO0VBQ0EsT0FBT0gsR0FBRyxDQUFDTSxPQUFPLENBQUNMLElBQUksRUFBRUMsRUFBRSxDQUFDO0FBQzlCO0FBRUFLLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLFNBQVNDLFdBQVdBLENBQUNDLFFBQVEsRUFBRTtFQUM5QyxJQUFJVixHQUFHLEdBQUdVLFFBQVEsQ0FBQ0MsTUFBTSxDQUFDTCxPQUFPLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQzs7RUFFaEQ7RUFDQSxJQUFJTixHQUFHLENBQUNZLFVBQVUsQ0FBQyxJQUFJLENBQUMsRUFBRVosR0FBRyxHQUFHQSxHQUFHLENBQUNhLEtBQUssQ0FBQyxDQUFDLENBQUM7O0VBRTVDO0VBQ0EsSUFBSSxDQUFDYixHQUFHLENBQUNZLFVBQVUsQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFO0lBQzNDWixHQUFHLEdBQUdELFdBQVcsQ0FDZkMsR0FBRyxFQUNILHlCQUF5QixFQUN6QixpR0FBaUcsRUFDakcseUJBQ0YsQ0FBQztFQUNIOztFQUVBO0VBQ0EsTUFBTWMsT0FBTyxHQUNmO0FBQ0E7QUFDQTtBQUNBLEdBQUc7RUFFRCxNQUFNQyxLQUFLLEdBQ2I7QUFDQTtBQUNBO0FBQ0EsTUFBTTtFQUVKZixHQUFHLEdBQUdELFdBQVcsQ0FBQ0MsR0FBRyxFQUFFYyxPQUFPLEVBQUVDLEtBQUssRUFBRSxtQ0FBbUMsQ0FBQzs7RUFFM0U7RUFDQWYsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCxtREFBbUQsRUFDbkQsMkVBQTJFLEVBQzNFLGdDQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCxnRUFBZ0UsRUFDaEUscVRBQXFULEVBQ3JULHlEQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCwwREFBMEQsRUFDMUQsNkhBQTZILEVBQzdILCtCQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCxxQ0FBcUMsRUFDckMsc0VBQXNFLEVBQ3RFLGlEQUNGLENBQUM7O0VBRUQ7RUFDQTtFQUNBLENBQUMsU0FBU2dCLHVCQUF1QkEsQ0FBQSxFQUFHO0lBQ2xDLElBQUloQixHQUFHLENBQUNJLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO0lBRXBDLE1BQU1hLEVBQUUsR0FDTiw4RUFBOEU7SUFFaEYsSUFBSSxDQUFDQSxFQUFFLENBQUNDLElBQUksQ0FBQ2xCLEdBQUcsQ0FBQyxFQUFFO01BQ2pCLE1BQU0sSUFBSUssS0FBSyxDQUFDLGtFQUFrRSxDQUFDO0lBQ3JGOztJQUVBO0lBQ0E7SUFDQTtJQUNBTCxHQUFHLEdBQUdBLEdBQUcsQ0FBQ00sT0FBTyxDQUNmVyxFQUFFLEVBQ0YsNkRBQ0YsQ0FBQztFQUNILENBQUMsRUFBRSxDQUFDO0VBRUosT0FBT2pCLEdBQUc7QUFDWixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["mustReplace","src","from","to","label","includes","Error","replace","module","exports","transformer","fileInfo","source","startsWith","slice","depFrom","depTo","ensureReturnElfileInRun","re","test"],"sourceRoot":"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/","sources":["transform-ld32.js"],"sourcesContent":["/**\n * jscodeshift transform (text-based): /mnt/data/original.js -> /mnt/data/deseado.js\n *\n * Run:\n *   npx jscodeshift -t transform.js /mnt/data/original.js > /mnt/data/salida.js\n *   diff -u /mnt/data/salida.js /mnt/data/deseado.js\n */\n\nfunction mustReplace(src, from, to, label) {\n  if (!src.includes(from)) {\n    throw new Error(`Pattern not found for: ${label}`);\n  }\n  return src.replace(from, to);\n}\n\nmodule.exports = function transformer(fileInfo) {\n  let src = fileInfo.source.replace(/\\r\\n/g, \"\\n\");\n\n  // 0) Normaliza: quita 1 newline inicial si existe (tu original empieza con '\\n')\n  if (src.startsWith(\"\\n\")) src = src.slice(1);\n\n  // 1) Header: añade let elfile + import libs_to_load antes de Module\n  if (!src.startsWith('let elfile = null;\\n')) {\n    src = mustReplace(\n      src,\n      \"var Module = (() => {\\n\",\n      'let elfile = null;\\nimport { libs_to_load } from \"../CNAssambler.mjs\";\\nvar Module = (() => {\\n',\n      \"prepend elfile + import\"\n    );\n  }\n\n  // 2) Comment out dependenciesFulfilled block\n  const depFrom =\n`dependenciesFulfilled = function runCaller() {\n if (!calledRun) run();\n if (!calledRun) dependenciesFulfilled = runCaller;\n};`;\n\n  const depTo =\n`// dependenciesFulfilled = function runCaller() {\n//  if (!calledRun) run();\n//  if (!calledRun) dependenciesFulfilled = runCaller;\n// };`;\n\n  src = mustReplace(src, depFrom, depTo, \"dependenciesFulfilled comment-out\");\n\n  // 3) run(): insert shouldRunNow = true; at top\n  src = mustReplace(\n    src,\n    \"function run(args) {\\n args = args || arguments_;\",\n    \"function run(args) {\\n  shouldRunNow = true;\\n args = args || arguments_;\",\n    \"run() insert shouldRunNow=true\"\n  );\n\n  // 4) doRun(): after initRuntime(), write linker.ld + input.o + libs_to_load\n  src = mustReplace(\n    src,\n    \"  initRuntime();\\n  preMain();\\n  readyPromiseResolve(Module);\",\n    \"  initRuntime();\\n  FS.writeFile(\\\"./linker.ld\\\", args[0]);\\n  args.shift();\\n  FS.writeFile(\\\"./input.o\\\", args[0]);\\n  args.shift();\\n  for (let i = 0; i < libs_to_load.length; i++){\\n    FS.writeFile(\\\"./\\\" + libs_to_load[i].name, libs_to_load[i].file);\\n  }\\n  preMain();\\n  readyPromiseResolve(Module);\",\n    \"inject linker.ld/input.o/libs_to_load after initRuntime\"\n  );\n\n  // 5) exit(): read output.elf + log at function start\n  src = mustReplace(\n    src,\n    \"function exit(status, implicit) {\\n EXITSTATUS = status;\",\n    \"function exit(status, implicit) {\\n  elfile = FS.readFile(\\\"./output.elf\\\");\\n  console.log(elfile);\\n EXITSTATUS = status;\",\n    \"exit() insert elfile read/log\"\n  );\n\n  // 6) bottom: comment out run(); and add readyPromiseResolve(Module);\n  src = mustReplace(\n    src,\n    \"\\nrun();\\n\\n\\n  return Module.ready\",\n    \"\\n// run();\\n  readyPromiseResolve(Module);\\n\\n  return Module.ready\",\n    \"bottom run() -> commented + readyPromiseResolve\"\n  );\n\n  // 7) ROBUST: asegurar que run() devuelve elfile tras checkStackCookie()\n  // (no dependemos de que el bloque final sea exactamente igual)\n  (function ensureReturnElfileInRun() {\n    if (src.includes(\"return elfile;\")) return;\n\n    const re =\n      /(function run\\s*\\([^)]*\\)\\s*\\{[\\s\\S]*?checkStackCookie\\(\\);\\s*\\n)([\\t ]*)\\}/m;\n\n    if (!re.test(src)) {\n      throw new Error(\"run() with checkStackCookie() not found to inject return elfile;\");\n    }\n\n    // Inserta exactamente como en deseado:\n    // //  FS.readFile(\"./output.elf\");\n    // return elfile;\n    src = src.replace(\n      re,\n      `$1$2//  FS.readFile(\"./output.elf\");\\n$2return elfile;\\n$2}`\n    );\n  })();\n\n  return src;\n};\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,WAAWA,CAACC,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAEC,KAAK,EAAE;EACzC,IAAI,CAACH,GAAG,CAACI,QAAQ,CAACH,IAAI,CAAC,EAAE;IACvB,MAAM,IAAII,KAAK,CAAC,0BAA0BF,KAAK,EAAE,CAAC;EACpD;EACA,OAAOH,GAAG,CAACM,OAAO,CAACL,IAAI,EAAEC,EAAE,CAAC;AAC9B;AAEAK,MAAM,CAACC,OAAO,GAAG,SAASC,WAAWA,CAACC,QAAQ,EAAE;EAC9C,IAAIV,GAAG,GAAGU,QAAQ,CAACC,MAAM,CAACL,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC;;EAEhD;EACA,IAAIN,GAAG,CAACY,UAAU,CAAC,IAAI,CAAC,EAAEZ,GAAG,GAAGA,GAAG,CAACa,KAAK,CAAC,CAAC,CAAC;;EAE5C;EACA,IAAI,CAACb,GAAG,CAACY,UAAU,CAAC,sBAAsB,CAAC,EAAE;IAC3CZ,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,yBAAyB,EACzB,iGAAiG,EACjG,yBACF,CAAC;EACH;;EAEA;EACA,MAAMc,OAAO,GACf;AACA;AACA;AACA,GAAG;EAED,MAAMC,KAAK,GACb;AACA;AACA;AACA,MAAM;EAEJf,GAAG,GAAGD,WAAW,CAACC,GAAG,EAAEc,OAAO,EAAEC,KAAK,EAAE,mCAAmC,CAAC;;EAE3E;EACAf,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,mDAAmD,EACnD,2EAA2E,EAC3E,gCACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,gEAAgE,EAChE,qTAAqT,EACrT,yDACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,0DAA0D,EAC1D,6HAA6H,EAC7H,+BACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,qCAAqC,EACrC,sEAAsE,EACtE,iDACF,CAAC;;EAED;EACA;EACA,CAAC,SAASgB,uBAAuBA,CAAA,EAAG;IAClC,IAAIhB,GAAG,CAACI,QAAQ,CAAC,gBAAgB,CAAC,EAAE;IAEpC,MAAMa,EAAE,GACN,8EAA8E;IAEhF,IAAI,CAACA,EAAE,CAACC,IAAI,CAAClB,GAAG,CAAC,EAAE;MACjB,MAAM,IAAIK,KAAK,CAAC,kEAAkE,CAAC;IACrF;;IAEA;IACA;IACA;IACAL,GAAG,GAAGA,GAAG,CAACM,OAAO,CACfW,EAAE,EACF,6DACF,CAAC;EACH,CAAC,EAAE,CAAC;EAEJ,OAAOjB,GAAG;AACZ,CAAC","ignoreList":[]}},"mtime":1770192737824},"{\"assumptions\":{},\"sourceRoot\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/\",\"configFile\":false,\"babelrc\":false,\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build\",\"filename\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/transform-ld64.js\",\"targets\":{},\"cloneInputAst\":true,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-flow-strip-types\",\"visitor\":{\"Program\":{\"enter\":[null]},\"ImportDeclaration\":{\"enter\":[null,null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"TypeCastExpression\":{\"enter\":[null,null]},\"CallExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"ImportSpecifier\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"AnyTypeAnnotation\":{\"enter\":[null]},\"ArrayTypeAnnotation\":{\"enter\":[null]},\"BooleanTypeAnnotation\":{\"enter\":[null]},\"BooleanLiteralTypeAnnotation\":{\"enter\":[null]},\"NullLiteralTypeAnnotation\":{\"enter\":[null]},\"ClassImplements\":{\"enter\":[null]},\"DeclareClass\":{\"enter\":[null]},\"DeclareFunction\":{\"enter\":[null]},\"DeclareInterface\":{\"enter\":[null]},\"DeclareModule\":{\"enter\":[null]},\"DeclareModuleExports\":{\"enter\":[null]},\"DeclareTypeAlias\":{\"enter\":[null]},\"DeclareOpaqueType\":{\"enter\":[null]},\"DeclareVariable\":{\"enter\":[null]},\"DeclareExportDeclaration\":{\"enter\":[null]},\"DeclareExportAllDeclaration\":{\"enter\":[null]},\"DeclaredPredicate\":{\"enter\":[null]},\"ExistsTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeParam\":{\"enter\":[null]},\"GenericTypeAnnotation\":{\"enter\":[null]},\"InferredPredicate\":{\"enter\":[null]},\"InterfaceExtends\":{\"enter\":[null]},\"InterfaceDeclaration\":{\"enter\":[null]},\"InterfaceTypeAnnotation\":{\"enter\":[null]},\"IntersectionTypeAnnotation\":{\"enter\":[null]},\"MixedTypeAnnotation\":{\"enter\":[null]},\"EmptyTypeAnnotation\":{\"enter\":[null]},\"NullableTypeAnnotation\":{\"enter\":[null]},\"NumberLiteralTypeAnnotation\":{\"enter\":[null]},\"NumberTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeInternalSlot\":{\"enter\":[null]},\"ObjectTypeCallProperty\":{\"enter\":[null]},\"ObjectTypeIndexer\":{\"enter\":[null]},\"ObjectTypeProperty\":{\"enter\":[null]},\"ObjectTypeSpreadProperty\":{\"enter\":[null]},\"OpaqueType\":{\"enter\":[null]},\"QualifiedTypeIdentifier\":{\"enter\":[null]},\"StringLiteralTypeAnnotation\":{\"enter\":[null]},\"StringTypeAnnotation\":{\"enter\":[null]},\"SymbolTypeAnnotation\":{\"enter\":[null]},\"ThisTypeAnnotation\":{\"enter\":[null]},\"TupleTypeAnnotation\":{\"enter\":[null]},\"TypeofTypeAnnotation\":{\"enter\":[null]},\"TypeAlias\":{\"enter\":[null]},\"TypeAnnotation\":{\"enter\":[null]},\"TypeParameter\":{\"enter\":[null]},\"TypeParameterDeclaration\":{\"enter\":[null]},\"TypeParameterInstantiation\":{\"enter\":[null]},\"UnionTypeAnnotation\":{\"enter\":[null]},\"Variance\":{\"enter\":[null]},\"VoidTypeAnnotation\":{\"enter\":[null]},\"EnumDeclaration\":{\"enter\":[null]},\"EnumBooleanBody\":{\"enter\":[null]},\"EnumNumberBody\":{\"enter\":[null]},\"EnumStringBody\":{\"enter\":[null]},\"EnumSymbolBody\":{\"enter\":[null]},\"EnumBooleanMember\":{\"enter\":[null]},\"EnumNumberMember\":{\"enter\":[null]},\"EnumStringMember\":{\"enter\":[null]},\"EnumDefaultedMember\":{\"enter\":[null]},\"IndexedAccessType\":{\"enter\":[null]},\"OptionalIndexedAccessType\":{\"enter\":[null]},\"ExportAllDeclaration\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]}],\"presets\":[]}:7.29.0:development":{"value":{"code":"\"use strict\";\n\n/**\n * jscodeshift transform (text-based): /mnt/data/original.js -> /mnt/data/deseado.js\n *\n * Run:\n *   npx jscodeshift -t transform.js /mnt/data/original.js > /mnt/data/salida.js\n *   diff -u /mnt/data/salida.js /mnt/data/deseado.js\n */\n\nfunction mustReplace(src, from, to, label) {\n  if (!src.includes(from)) {\n    throw new Error(`Pattern not found for: ${label}`);\n  }\n  return src.replace(from, to);\n}\nmodule.exports = function transformer(fileInfo) {\n  let src = fileInfo.source.replace(/\\r\\n/g, \"\\n\");\n\n  // 1) Prepend header lines (elfile + import) before Module\n  if (!src.startsWith(\"let elfile = null;\\n\")) {\n    src = mustReplace(src, \"var Module = (() => {\\n\", 'let elfile = null;\\nimport { libs_to_load } from \"../CNAssambler.mjs\";\\nvar Module = (() => {\\n', \"prepend elfile + import\");\n  }\n\n  // 2) wasm rename: ld-new.wasm -> ld-new64.wasm\n  src = src.replaceAll(\"ld-new.wasm\", \"ld-new64.wasm\");\n\n  // 3) exitJS: add reading output.elf and logging\n  src = mustReplace(src, `/** @suppress {duplicate } */ /** @param {boolean|number=} implicit */ var exitJS = (status, implicit) => {\\n  EXITSTATUS = status;`, `/** @suppress {duplicate } */ /** @param {boolean|number=} implicit */ var exitJS = (status, implicit) => {\\n  elfile = FS.readFile(\"./output.elf\");\\n  console.log(elfile);\\n  EXITSTATUS = status;`, \"exitJS add elfile read/log\");\n\n  // 4) run(): comment dependenciesFulfilled in both guards\n  src = mustReplace(src, `  if (runDependencies > 0) {\\n    dependenciesFulfilled = run;\\n    return;\\n  }`, `  if (runDependencies > 0) {\\n    // dependenciesFulfilled = run;\\n    return;\\n  }`, \"run() first guard comment dependenciesFulfilled\");\n  src = mustReplace(src, `  // a preRun added a dependency, run will be called later\\n  if (runDependencies > 0) {\\n    dependenciesFulfilled = run;\\n    return;\\n  }`, `  // a preRun added a dependency, run will be called later\\n  if (runDependencies > 0) {\\n    // dependenciesFulfilled = run;\\n    return;\\n  }`, \"run() second guard comment dependenciesFulfilled\");\n\n  // 5) doRun(): add console.log(args); at start of doRun\n  src = mustReplace(src, `  function doRun() {\\n    // run may have just been called through dependencies being fulfilled just in this very frame,`, `  function doRun() {\\n    console.log(args);\\n    // run may have just been called through dependencies being fulfilled just in this very frame,`, \"doRun() add console.log(args)\");\n\n  // 6) doRun(): inject linker.ld + input.o + libs_to_load after initRuntime()\n  src = mustReplace(src, `    initRuntime();\\n    preMain();`, `    initRuntime();\\n    FS.writeFile(\"./linker.ld\", args[0]);\\n    args.shift();\\n    FS.writeFile(\"./input.o\", args[0]);\\n    args.shift();\\n    for (let i = 0; i < libs_to_load.length; i++){\\n      FS.writeFile(\"./\" + libs_to_load[i].name, libs_to_load[i].file);\\n    }\\n    preMain();`, \"inject linker.ld/input.o/libs_to_load\");\n\n  // 7) doRun(): comment readyPromiseResolve(Module);\n  src = mustReplace(src, `    readyPromiseResolve(Module);`, `    // readyPromiseResolve(Module);`, \"comment readyPromiseResolve in doRun\");\n\n  // 8) doRun(): make callMain unconditional (remove noInitialRun guard)\n  src = mustReplace(src, `    if (!noInitialRun) callMain(args);`, `    callMain(args);`, \"callMain unconditional\");\n\n  // 9) bottom: comment out run();\n  src = mustReplace(src, `\\nrun();\\n`, `\\n// run();\\n`, \"comment run() at bottom\");\n\n  // 10) near end: insert readyPromiseResolve(Module); before returning moduleRtn\n  src = mustReplace(src, `\\n\\n\\n  return moduleRtn;`, `\\n\\n  readyPromiseResolve(Module);\\n  return moduleRtn;`, \"insert readyPromiseResolve before return moduleRtn\");\n\n  // 11) ROBUST: ensure `return elfile;` exists at end of run() after checkStackCookie()\n  (function ensureReturnElfileInRun() {\n    if (src.includes(\"return elfile;\")) return;\n    const re = /(function run\\s*\\([^)]*\\)\\s*\\{[\\s\\S]*?checkStackCookie\\(\\);\\s*\\n)([\\t ]*)\\}/m;\n    if (!re.test(src)) {\n      throw new Error(\"run() with checkStackCookie() not found to inject return elfile;\");\n    }\n    src = src.replace(re, `$1$2  return elfile;\\n$2}`);\n  })();\n  return src;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtdXN0UmVwbGFjZSIsInNyYyIsImZyb20iLCJ0byIsImxhYmVsIiwiaW5jbHVkZXMiLCJFcnJvciIsInJlcGxhY2UiLCJtb2R1bGUiLCJleHBvcnRzIiwidHJhbnNmb3JtZXIiLCJmaWxlSW5mbyIsInNvdXJjZSIsInN0YXJ0c1dpdGgiLCJyZXBsYWNlQWxsIiwiZW5zdXJlUmV0dXJuRWxmaWxlSW5SdW4iLCJyZSIsInRlc3QiXSwic291cmNlUm9vdCI6Ii9ob21lL2p1YW5jYXJsb3MvRXNjcml0b3Jpby9wcnVlYmEvY3JlYXRvci1zYWlsLWFzc2VtYmxlci90b29sY2hhaW5fYnVpbGQvIiwic291cmNlcyI6WyJ0cmFuc2Zvcm0tbGQ2NC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIGpzY29kZXNoaWZ0IHRyYW5zZm9ybSAodGV4dC1iYXNlZCk6IC9tbnQvZGF0YS9vcmlnaW5hbC5qcyAtPiAvbW50L2RhdGEvZGVzZWFkby5qc1xuICpcbiAqIFJ1bjpcbiAqICAgbnB4IGpzY29kZXNoaWZ0IC10IHRyYW5zZm9ybS5qcyAvbW50L2RhdGEvb3JpZ2luYWwuanMgPiAvbW50L2RhdGEvc2FsaWRhLmpzXG4gKiAgIGRpZmYgLXUgL21udC9kYXRhL3NhbGlkYS5qcyAvbW50L2RhdGEvZGVzZWFkby5qc1xuICovXG5cbmZ1bmN0aW9uIG11c3RSZXBsYWNlKHNyYywgZnJvbSwgdG8sIGxhYmVsKSB7XG4gIGlmICghc3JjLmluY2x1ZGVzKGZyb20pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBQYXR0ZXJuIG5vdCBmb3VuZCBmb3I6ICR7bGFiZWx9YCk7XG4gIH1cbiAgcmV0dXJuIHNyYy5yZXBsYWNlKGZyb20sIHRvKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0cmFuc2Zvcm1lcihmaWxlSW5mbykge1xuICBsZXQgc3JjID0gZmlsZUluZm8uc291cmNlLnJlcGxhY2UoL1xcclxcbi9nLCBcIlxcblwiKTtcblxuICAvLyAxKSBQcmVwZW5kIGhlYWRlciBsaW5lcyAoZWxmaWxlICsgaW1wb3J0KSBiZWZvcmUgTW9kdWxlXG4gIGlmICghc3JjLnN0YXJ0c1dpdGgoXCJsZXQgZWxmaWxlID0gbnVsbDtcXG5cIikpIHtcbiAgICBzcmMgPSBtdXN0UmVwbGFjZShcbiAgICAgIHNyYyxcbiAgICAgIFwidmFyIE1vZHVsZSA9ICgoKSA9PiB7XFxuXCIsXG4gICAgICAnbGV0IGVsZmlsZSA9IG51bGw7XFxuaW1wb3J0IHsgbGlic190b19sb2FkIH0gZnJvbSBcIi4uL0NOQXNzYW1ibGVyLm1qc1wiO1xcbnZhciBNb2R1bGUgPSAoKCkgPT4ge1xcbicsXG4gICAgICBcInByZXBlbmQgZWxmaWxlICsgaW1wb3J0XCJcbiAgICApO1xuICB9XG5cbiAgLy8gMikgd2FzbSByZW5hbWU6IGxkLW5ldy53YXNtIC0+IGxkLW5ldzY0Lndhc21cbiAgc3JjID0gc3JjLnJlcGxhY2VBbGwoXCJsZC1uZXcud2FzbVwiLCBcImxkLW5ldzY0Lndhc21cIik7XG5cbiAgLy8gMykgZXhpdEpTOiBhZGQgcmVhZGluZyBvdXRwdXQuZWxmIGFuZCBsb2dnaW5nXG4gIHNyYyA9IG11c3RSZXBsYWNlKFxuICAgIHNyYyxcbiAgICBgLyoqIEBzdXBwcmVzcyB7ZHVwbGljYXRlIH0gKi8gLyoqIEBwYXJhbSB7Ym9vbGVhbnxudW1iZXI9fSBpbXBsaWNpdCAqLyB2YXIgZXhpdEpTID0gKHN0YXR1cywgaW1wbGljaXQpID0+IHtcXG4gIEVYSVRTVEFUVVMgPSBzdGF0dXM7YCxcbiAgICBgLyoqIEBzdXBwcmVzcyB7ZHVwbGljYXRlIH0gKi8gLyoqIEBwYXJhbSB7Ym9vbGVhbnxudW1iZXI9fSBpbXBsaWNpdCAqLyB2YXIgZXhpdEpTID0gKHN0YXR1cywgaW1wbGljaXQpID0+IHtcXG4gIGVsZmlsZSA9IEZTLnJlYWRGaWxlKFwiLi9vdXRwdXQuZWxmXCIpO1xcbiAgY29uc29sZS5sb2coZWxmaWxlKTtcXG4gIEVYSVRTVEFUVVMgPSBzdGF0dXM7YCxcbiAgICBcImV4aXRKUyBhZGQgZWxmaWxlIHJlYWQvbG9nXCJcbiAgKTtcblxuICAvLyA0KSBydW4oKTogY29tbWVudCBkZXBlbmRlbmNpZXNGdWxmaWxsZWQgaW4gYm90aCBndWFyZHNcbiAgc3JjID0gbXVzdFJlcGxhY2UoXG4gICAgc3JjLFxuICAgIGAgIGlmIChydW5EZXBlbmRlbmNpZXMgPiAwKSB7XFxuICAgIGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IHJ1bjtcXG4gICAgcmV0dXJuO1xcbiAgfWAsXG4gICAgYCAgaWYgKHJ1bkRlcGVuZGVuY2llcyA+IDApIHtcXG4gICAgLy8gZGVwZW5kZW5jaWVzRnVsZmlsbGVkID0gcnVuO1xcbiAgICByZXR1cm47XFxuICB9YCxcbiAgICBcInJ1bigpIGZpcnN0IGd1YXJkIGNvbW1lbnQgZGVwZW5kZW5jaWVzRnVsZmlsbGVkXCJcbiAgKTtcblxuICBzcmMgPSBtdXN0UmVwbGFjZShcbiAgICBzcmMsXG4gICAgYCAgLy8gYSBwcmVSdW4gYWRkZWQgYSBkZXBlbmRlbmN5LCBydW4gd2lsbCBiZSBjYWxsZWQgbGF0ZXJcXG4gIGlmIChydW5EZXBlbmRlbmNpZXMgPiAwKSB7XFxuICAgIGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IHJ1bjtcXG4gICAgcmV0dXJuO1xcbiAgfWAsXG4gICAgYCAgLy8gYSBwcmVSdW4gYWRkZWQgYSBkZXBlbmRlbmN5LCBydW4gd2lsbCBiZSBjYWxsZWQgbGF0ZXJcXG4gIGlmIChydW5EZXBlbmRlbmNpZXMgPiAwKSB7XFxuICAgIC8vIGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IHJ1bjtcXG4gICAgcmV0dXJuO1xcbiAgfWAsXG4gICAgXCJydW4oKSBzZWNvbmQgZ3VhcmQgY29tbWVudCBkZXBlbmRlbmNpZXNGdWxmaWxsZWRcIlxuICApO1xuXG4gIC8vIDUpIGRvUnVuKCk6IGFkZCBjb25zb2xlLmxvZyhhcmdzKTsgYXQgc3RhcnQgb2YgZG9SdW5cbiAgc3JjID0gbXVzdFJlcGxhY2UoXG4gICAgc3JjLFxuICAgIGAgIGZ1bmN0aW9uIGRvUnVuKCkge1xcbiAgICAvLyBydW4gbWF5IGhhdmUganVzdCBiZWVuIGNhbGxlZCB0aHJvdWdoIGRlcGVuZGVuY2llcyBiZWluZyBmdWxmaWxsZWQganVzdCBpbiB0aGlzIHZlcnkgZnJhbWUsYCxcbiAgICBgICBmdW5jdGlvbiBkb1J1bigpIHtcXG4gICAgY29uc29sZS5sb2coYXJncyk7XFxuICAgIC8vIHJ1biBtYXkgaGF2ZSBqdXN0IGJlZW4gY2FsbGVkIHRocm91Z2ggZGVwZW5kZW5jaWVzIGJlaW5nIGZ1bGZpbGxlZCBqdXN0IGluIHRoaXMgdmVyeSBmcmFtZSxgLFxuICAgIFwiZG9SdW4oKSBhZGQgY29uc29sZS5sb2coYXJncylcIlxuICApO1xuXG4gIC8vIDYpIGRvUnVuKCk6IGluamVjdCBsaW5rZXIubGQgKyBpbnB1dC5vICsgbGlic190b19sb2FkIGFmdGVyIGluaXRSdW50aW1lKClcbiAgc3JjID0gbXVzdFJlcGxhY2UoXG4gICAgc3JjLFxuICAgIGAgICAgaW5pdFJ1bnRpbWUoKTtcXG4gICAgcHJlTWFpbigpO2AsXG4gICAgYCAgICBpbml0UnVudGltZSgpO1xcbiAgICBGUy53cml0ZUZpbGUoXCIuL2xpbmtlci5sZFwiLCBhcmdzWzBdKTtcXG4gICAgYXJncy5zaGlmdCgpO1xcbiAgICBGUy53cml0ZUZpbGUoXCIuL2lucHV0Lm9cIiwgYXJnc1swXSk7XFxuICAgIGFyZ3Muc2hpZnQoKTtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaWJzX3RvX2xvYWQubGVuZ3RoOyBpKyspe1xcbiAgICAgIEZTLndyaXRlRmlsZShcIi4vXCIgKyBsaWJzX3RvX2xvYWRbaV0ubmFtZSwgbGlic190b19sb2FkW2ldLmZpbGUpO1xcbiAgICB9XFxuICAgIHByZU1haW4oKTtgLFxuICAgIFwiaW5qZWN0IGxpbmtlci5sZC9pbnB1dC5vL2xpYnNfdG9fbG9hZFwiXG4gICk7XG5cbiAgLy8gNykgZG9SdW4oKTogY29tbWVudCByZWFkeVByb21pc2VSZXNvbHZlKE1vZHVsZSk7XG4gIHNyYyA9IG11c3RSZXBsYWNlKFxuICAgIHNyYyxcbiAgICBgICAgIHJlYWR5UHJvbWlzZVJlc29sdmUoTW9kdWxlKTtgLFxuICAgIGAgICAgLy8gcmVhZHlQcm9taXNlUmVzb2x2ZShNb2R1bGUpO2AsXG4gICAgXCJjb21tZW50IHJlYWR5UHJvbWlzZVJlc29sdmUgaW4gZG9SdW5cIlxuICApO1xuXG4gIC8vIDgpIGRvUnVuKCk6IG1ha2UgY2FsbE1haW4gdW5jb25kaXRpb25hbCAocmVtb3ZlIG5vSW5pdGlhbFJ1biBndWFyZClcbiAgc3JjID0gbXVzdFJlcGxhY2UoXG4gICAgc3JjLFxuICAgIGAgICAgaWYgKCFub0luaXRpYWxSdW4pIGNhbGxNYWluKGFyZ3MpO2AsXG4gICAgYCAgICBjYWxsTWFpbihhcmdzKTtgLFxuICAgIFwiY2FsbE1haW4gdW5jb25kaXRpb25hbFwiXG4gICk7XG5cbiAgLy8gOSkgYm90dG9tOiBjb21tZW50IG91dCBydW4oKTtcbiAgc3JjID0gbXVzdFJlcGxhY2Uoc3JjLCBgXFxucnVuKCk7XFxuYCwgYFxcbi8vIHJ1bigpO1xcbmAsIFwiY29tbWVudCBydW4oKSBhdCBib3R0b21cIik7XG5cbiAgLy8gMTApIG5lYXIgZW5kOiBpbnNlcnQgcmVhZHlQcm9taXNlUmVzb2x2ZShNb2R1bGUpOyBiZWZvcmUgcmV0dXJuaW5nIG1vZHVsZVJ0blxuICBzcmMgPSBtdXN0UmVwbGFjZShcbiAgICBzcmMsXG4gICAgYFxcblxcblxcbiAgcmV0dXJuIG1vZHVsZVJ0bjtgLFxuICAgIGBcXG5cXG4gIHJlYWR5UHJvbWlzZVJlc29sdmUoTW9kdWxlKTtcXG4gIHJldHVybiBtb2R1bGVSdG47YCxcbiAgICBcImluc2VydCByZWFkeVByb21pc2VSZXNvbHZlIGJlZm9yZSByZXR1cm4gbW9kdWxlUnRuXCJcbiAgKTtcblxuICAvLyAxMSkgUk9CVVNUOiBlbnN1cmUgYHJldHVybiBlbGZpbGU7YCBleGlzdHMgYXQgZW5kIG9mIHJ1bigpIGFmdGVyIGNoZWNrU3RhY2tDb29raWUoKVxuICAoZnVuY3Rpb24gZW5zdXJlUmV0dXJuRWxmaWxlSW5SdW4oKSB7XG4gICAgaWYgKHNyYy5pbmNsdWRlcyhcInJldHVybiBlbGZpbGU7XCIpKSByZXR1cm47XG5cbiAgICBjb25zdCByZSA9IC8oZnVuY3Rpb24gcnVuXFxzKlxcKFteKV0qXFwpXFxzKlxce1tcXHNcXFNdKj9jaGVja1N0YWNrQ29va2llXFwoXFwpO1xccypcXG4pKFtcXHQgXSopXFx9L207XG4gICAgaWYgKCFyZS50ZXN0KHNyYykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInJ1bigpIHdpdGggY2hlY2tTdGFja0Nvb2tpZSgpIG5vdCBmb3VuZCB0byBpbmplY3QgcmV0dXJuIGVsZmlsZTtcIik7XG4gICAgfVxuICAgIHNyYyA9IHNyYy5yZXBsYWNlKHJlLCBgJDEkMiAgcmV0dXJuIGVsZmlsZTtcXG4kMn1gKTtcbiAgfSkoKTtcblxuICByZXR1cm4gc3JjO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTQSxXQUFXQSxDQUFDQyxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxFQUFFQyxLQUFLLEVBQUU7RUFDekMsSUFBSSxDQUFDSCxHQUFHLENBQUNJLFFBQVEsQ0FBQ0gsSUFBSSxDQUFDLEVBQUU7SUFDdkIsTUFBTSxJQUFJSSxLQUFLLENBQUMsMEJBQTBCRixLQUFLLEVBQUUsQ0FBQztFQUNwRDtFQUNBLE9BQU9ILEdBQUcsQ0FBQ00sT0FBTyxDQUFDTCxJQUFJLEVBQUVDLEVBQUUsQ0FBQztBQUM5QjtBQUVBSyxNQUFNLENBQUNDLE9BQU8sR0FBRyxTQUFTQyxXQUFXQSxDQUFDQyxRQUFRLEVBQUU7RUFDOUMsSUFBSVYsR0FBRyxHQUFHVSxRQUFRLENBQUNDLE1BQU0sQ0FBQ0wsT0FBTyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUM7O0VBRWhEO0VBQ0EsSUFBSSxDQUFDTixHQUFHLENBQUNZLFVBQVUsQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFO0lBQzNDWixHQUFHLEdBQUdELFdBQVcsQ0FDZkMsR0FBRyxFQUNILHlCQUF5QixFQUN6QixpR0FBaUcsRUFDakcseUJBQ0YsQ0FBQztFQUNIOztFQUVBO0VBQ0FBLEdBQUcsR0FBR0EsR0FBRyxDQUFDYSxVQUFVLENBQUMsYUFBYSxFQUFFLGVBQWUsQ0FBQzs7RUFFcEQ7RUFDQWIsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCxxSUFBcUksRUFDckksc01BQXNNLEVBQ3RNLDRCQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCxrRkFBa0YsRUFDbEYscUZBQXFGLEVBQ3JGLGlEQUNGLENBQUM7RUFFREEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCw4SUFBOEksRUFDOUksaUpBQWlKLEVBQ2pKLGtEQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCwwSEFBMEgsRUFDMUgsa0pBQWtKLEVBQ2xKLCtCQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCxvQ0FBb0MsRUFDcEMsaVNBQWlTLEVBQ2pTLHVDQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCxrQ0FBa0MsRUFDbEMscUNBQXFDLEVBQ3JDLHNDQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQ2ZDLEdBQUcsRUFDSCx3Q0FBd0MsRUFDeEMscUJBQXFCLEVBQ3JCLHdCQUNGLENBQUM7O0VBRUQ7RUFDQUEsR0FBRyxHQUFHRCxXQUFXLENBQUNDLEdBQUcsRUFBRSxZQUFZLEVBQUUsZUFBZSxFQUFFLHlCQUF5QixDQUFDOztFQUVoRjtFQUNBQSxHQUFHLEdBQUdELFdBQVcsQ0FDZkMsR0FBRyxFQUNILDJCQUEyQixFQUMzQix5REFBeUQsRUFDekQsb0RBQ0YsQ0FBQzs7RUFFRDtFQUNBLENBQUMsU0FBU2MsdUJBQXVCQSxDQUFBLEVBQUc7SUFDbEMsSUFBSWQsR0FBRyxDQUFDSSxRQUFRLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtJQUVwQyxNQUFNVyxFQUFFLEdBQUcsOEVBQThFO0lBQ3pGLElBQUksQ0FBQ0EsRUFBRSxDQUFDQyxJQUFJLENBQUNoQixHQUFHLENBQUMsRUFBRTtNQUNqQixNQUFNLElBQUlLLEtBQUssQ0FBQyxrRUFBa0UsQ0FBQztJQUNyRjtJQUNBTCxHQUFHLEdBQUdBLEdBQUcsQ0FBQ00sT0FBTyxDQUFDUyxFQUFFLEVBQUUsMkJBQTJCLENBQUM7RUFDcEQsQ0FBQyxFQUFFLENBQUM7RUFFSixPQUFPZixHQUFHO0FBQ1osQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["mustReplace","src","from","to","label","includes","Error","replace","module","exports","transformer","fileInfo","source","startsWith","replaceAll","ensureReturnElfileInRun","re","test"],"sourceRoot":"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/","sources":["transform-ld64.js"],"sourcesContent":["/**\n * jscodeshift transform (text-based): /mnt/data/original.js -> /mnt/data/deseado.js\n *\n * Run:\n *   npx jscodeshift -t transform.js /mnt/data/original.js > /mnt/data/salida.js\n *   diff -u /mnt/data/salida.js /mnt/data/deseado.js\n */\n\nfunction mustReplace(src, from, to, label) {\n  if (!src.includes(from)) {\n    throw new Error(`Pattern not found for: ${label}`);\n  }\n  return src.replace(from, to);\n}\n\nmodule.exports = function transformer(fileInfo) {\n  let src = fileInfo.source.replace(/\\r\\n/g, \"\\n\");\n\n  // 1) Prepend header lines (elfile + import) before Module\n  if (!src.startsWith(\"let elfile = null;\\n\")) {\n    src = mustReplace(\n      src,\n      \"var Module = (() => {\\n\",\n      'let elfile = null;\\nimport { libs_to_load } from \"../CNAssambler.mjs\";\\nvar Module = (() => {\\n',\n      \"prepend elfile + import\"\n    );\n  }\n\n  // 2) wasm rename: ld-new.wasm -> ld-new64.wasm\n  src = src.replaceAll(\"ld-new.wasm\", \"ld-new64.wasm\");\n\n  // 3) exitJS: add reading output.elf and logging\n  src = mustReplace(\n    src,\n    `/** @suppress {duplicate } */ /** @param {boolean|number=} implicit */ var exitJS = (status, implicit) => {\\n  EXITSTATUS = status;`,\n    `/** @suppress {duplicate } */ /** @param {boolean|number=} implicit */ var exitJS = (status, implicit) => {\\n  elfile = FS.readFile(\"./output.elf\");\\n  console.log(elfile);\\n  EXITSTATUS = status;`,\n    \"exitJS add elfile read/log\"\n  );\n\n  // 4) run(): comment dependenciesFulfilled in both guards\n  src = mustReplace(\n    src,\n    `  if (runDependencies > 0) {\\n    dependenciesFulfilled = run;\\n    return;\\n  }`,\n    `  if (runDependencies > 0) {\\n    // dependenciesFulfilled = run;\\n    return;\\n  }`,\n    \"run() first guard comment dependenciesFulfilled\"\n  );\n\n  src = mustReplace(\n    src,\n    `  // a preRun added a dependency, run will be called later\\n  if (runDependencies > 0) {\\n    dependenciesFulfilled = run;\\n    return;\\n  }`,\n    `  // a preRun added a dependency, run will be called later\\n  if (runDependencies > 0) {\\n    // dependenciesFulfilled = run;\\n    return;\\n  }`,\n    \"run() second guard comment dependenciesFulfilled\"\n  );\n\n  // 5) doRun(): add console.log(args); at start of doRun\n  src = mustReplace(\n    src,\n    `  function doRun() {\\n    // run may have just been called through dependencies being fulfilled just in this very frame,`,\n    `  function doRun() {\\n    console.log(args);\\n    // run may have just been called through dependencies being fulfilled just in this very frame,`,\n    \"doRun() add console.log(args)\"\n  );\n\n  // 6) doRun(): inject linker.ld + input.o + libs_to_load after initRuntime()\n  src = mustReplace(\n    src,\n    `    initRuntime();\\n    preMain();`,\n    `    initRuntime();\\n    FS.writeFile(\"./linker.ld\", args[0]);\\n    args.shift();\\n    FS.writeFile(\"./input.o\", args[0]);\\n    args.shift();\\n    for (let i = 0; i < libs_to_load.length; i++){\\n      FS.writeFile(\"./\" + libs_to_load[i].name, libs_to_load[i].file);\\n    }\\n    preMain();`,\n    \"inject linker.ld/input.o/libs_to_load\"\n  );\n\n  // 7) doRun(): comment readyPromiseResolve(Module);\n  src = mustReplace(\n    src,\n    `    readyPromiseResolve(Module);`,\n    `    // readyPromiseResolve(Module);`,\n    \"comment readyPromiseResolve in doRun\"\n  );\n\n  // 8) doRun(): make callMain unconditional (remove noInitialRun guard)\n  src = mustReplace(\n    src,\n    `    if (!noInitialRun) callMain(args);`,\n    `    callMain(args);`,\n    \"callMain unconditional\"\n  );\n\n  // 9) bottom: comment out run();\n  src = mustReplace(src, `\\nrun();\\n`, `\\n// run();\\n`, \"comment run() at bottom\");\n\n  // 10) near end: insert readyPromiseResolve(Module); before returning moduleRtn\n  src = mustReplace(\n    src,\n    `\\n\\n\\n  return moduleRtn;`,\n    `\\n\\n  readyPromiseResolve(Module);\\n  return moduleRtn;`,\n    \"insert readyPromiseResolve before return moduleRtn\"\n  );\n\n  // 11) ROBUST: ensure `return elfile;` exists at end of run() after checkStackCookie()\n  (function ensureReturnElfileInRun() {\n    if (src.includes(\"return elfile;\")) return;\n\n    const re = /(function run\\s*\\([^)]*\\)\\s*\\{[\\s\\S]*?checkStackCookie\\(\\);\\s*\\n)([\\t ]*)\\}/m;\n    if (!re.test(src)) {\n      throw new Error(\"run() with checkStackCookie() not found to inject return elfile;\");\n    }\n    src = src.replace(re, `$1$2  return elfile;\\n$2}`);\n  })();\n\n  return src;\n};\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,WAAWA,CAACC,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAEC,KAAK,EAAE;EACzC,IAAI,CAACH,GAAG,CAACI,QAAQ,CAACH,IAAI,CAAC,EAAE;IACvB,MAAM,IAAII,KAAK,CAAC,0BAA0BF,KAAK,EAAE,CAAC;EACpD;EACA,OAAOH,GAAG,CAACM,OAAO,CAACL,IAAI,EAAEC,EAAE,CAAC;AAC9B;AAEAK,MAAM,CAACC,OAAO,GAAG,SAASC,WAAWA,CAACC,QAAQ,EAAE;EAC9C,IAAIV,GAAG,GAAGU,QAAQ,CAACC,MAAM,CAACL,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC;;EAEhD;EACA,IAAI,CAACN,GAAG,CAACY,UAAU,CAAC,sBAAsB,CAAC,EAAE;IAC3CZ,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,yBAAyB,EACzB,iGAAiG,EACjG,yBACF,CAAC;EACH;;EAEA;EACAA,GAAG,GAAGA,GAAG,CAACa,UAAU,CAAC,aAAa,EAAE,eAAe,CAAC;;EAEpD;EACAb,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,qIAAqI,EACrI,sMAAsM,EACtM,4BACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,kFAAkF,EAClF,qFAAqF,EACrF,iDACF,CAAC;EAEDA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,8IAA8I,EAC9I,iJAAiJ,EACjJ,kDACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,0HAA0H,EAC1H,kJAAkJ,EAClJ,+BACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,oCAAoC,EACpC,iSAAiS,EACjS,uCACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,kCAAkC,EAClC,qCAAqC,EACrC,sCACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,wCAAwC,EACxC,qBAAqB,EACrB,wBACF,CAAC;;EAED;EACAA,GAAG,GAAGD,WAAW,CAACC,GAAG,EAAE,YAAY,EAAE,eAAe,EAAE,yBAAyB,CAAC;;EAEhF;EACAA,GAAG,GAAGD,WAAW,CACfC,GAAG,EACH,2BAA2B,EAC3B,yDAAyD,EACzD,oDACF,CAAC;;EAED;EACA,CAAC,SAASc,uBAAuBA,CAAA,EAAG;IAClC,IAAId,GAAG,CAACI,QAAQ,CAAC,gBAAgB,CAAC,EAAE;IAEpC,MAAMW,EAAE,GAAG,8EAA8E;IACzF,IAAI,CAACA,EAAE,CAACC,IAAI,CAAChB,GAAG,CAAC,EAAE;MACjB,MAAM,IAAIK,KAAK,CAAC,kEAAkE,CAAC;IACrF;IACAL,GAAG,GAAGA,GAAG,CAACM,OAAO,CAACS,EAAE,EAAE,2BAA2B,CAAC;EACpD,CAAC,EAAE,CAAC;EAEJ,OAAOf,GAAG;AACZ,CAAC","ignoreList":[]}},"mtime":1770193227801},"{\"assumptions\":{},\"sourceRoot\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/\",\"configFile\":false,\"babelrc\":false,\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build\",\"filename\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/transform-objdump32.js\",\"targets\":{},\"cloneInputAst\":true,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-flow-strip-types\",\"visitor\":{\"Program\":{\"enter\":[null]},\"ImportDeclaration\":{\"enter\":[null,null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"TypeCastExpression\":{\"enter\":[null,null]},\"CallExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"ImportSpecifier\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"AnyTypeAnnotation\":{\"enter\":[null]},\"ArrayTypeAnnotation\":{\"enter\":[null]},\"BooleanTypeAnnotation\":{\"enter\":[null]},\"BooleanLiteralTypeAnnotation\":{\"enter\":[null]},\"NullLiteralTypeAnnotation\":{\"enter\":[null]},\"ClassImplements\":{\"enter\":[null]},\"DeclareClass\":{\"enter\":[null]},\"DeclareFunction\":{\"enter\":[null]},\"DeclareInterface\":{\"enter\":[null]},\"DeclareModule\":{\"enter\":[null]},\"DeclareModuleExports\":{\"enter\":[null]},\"DeclareTypeAlias\":{\"enter\":[null]},\"DeclareOpaqueType\":{\"enter\":[null]},\"DeclareVariable\":{\"enter\":[null]},\"DeclareExportDeclaration\":{\"enter\":[null]},\"DeclareExportAllDeclaration\":{\"enter\":[null]},\"DeclaredPredicate\":{\"enter\":[null]},\"ExistsTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeParam\":{\"enter\":[null]},\"GenericTypeAnnotation\":{\"enter\":[null]},\"InferredPredicate\":{\"enter\":[null]},\"InterfaceExtends\":{\"enter\":[null]},\"InterfaceDeclaration\":{\"enter\":[null]},\"InterfaceTypeAnnotation\":{\"enter\":[null]},\"IntersectionTypeAnnotation\":{\"enter\":[null]},\"MixedTypeAnnotation\":{\"enter\":[null]},\"EmptyTypeAnnotation\":{\"enter\":[null]},\"NullableTypeAnnotation\":{\"enter\":[null]},\"NumberLiteralTypeAnnotation\":{\"enter\":[null]},\"NumberTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeInternalSlot\":{\"enter\":[null]},\"ObjectTypeCallProperty\":{\"enter\":[null]},\"ObjectTypeIndexer\":{\"enter\":[null]},\"ObjectTypeProperty\":{\"enter\":[null]},\"ObjectTypeSpreadProperty\":{\"enter\":[null]},\"OpaqueType\":{\"enter\":[null]},\"QualifiedTypeIdentifier\":{\"enter\":[null]},\"StringLiteralTypeAnnotation\":{\"enter\":[null]},\"StringTypeAnnotation\":{\"enter\":[null]},\"SymbolTypeAnnotation\":{\"enter\":[null]},\"ThisTypeAnnotation\":{\"enter\":[null]},\"TupleTypeAnnotation\":{\"enter\":[null]},\"TypeofTypeAnnotation\":{\"enter\":[null]},\"TypeAlias\":{\"enter\":[null]},\"TypeAnnotation\":{\"enter\":[null]},\"TypeParameter\":{\"enter\":[null]},\"TypeParameterDeclaration\":{\"enter\":[null]},\"TypeParameterInstantiation\":{\"enter\":[null]},\"UnionTypeAnnotation\":{\"enter\":[null]},\"Variance\":{\"enter\":[null]},\"VoidTypeAnnotation\":{\"enter\":[null]},\"EnumDeclaration\":{\"enter\":[null]},\"EnumBooleanBody\":{\"enter\":[null]},\"EnumNumberBody\":{\"enter\":[null]},\"EnumStringBody\":{\"enter\":[null]},\"EnumSymbolBody\":{\"enter\":[null]},\"EnumBooleanMember\":{\"enter\":[null]},\"EnumNumberMember\":{\"enter\":[null]},\"EnumStringMember\":{\"enter\":[null]},\"EnumDefaultedMember\":{\"enter\":[null]},\"IndexedAccessType\":{\"enter\":[null]},\"OptionalIndexedAccessType\":{\"enter\":[null]},\"ExportAllDeclaration\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]}],\"presets\":[]}:7.29.0:development":{"value":{"code":"\"use strict\";\n\n/**\n * jscodeshift transform to convert original.js -> deseado.js\n *\n * Usage:\n *   jscodeshift -t transform.js original.js\n */\nmodule.exports = function transformer(file) {\n  let src = file.source;\n\n  // 1) Add exported globals at the very top (exactly like deseado.js)\n  if (!src.includes('export var dumptextinstructions32')) {\n    const exportsBlock = \"\\n\\nexport var dumptextinstructions32 = [];\\nexport var dumpdatainstructions32 = [];\\nexport var dumplabels32           = [];\\nexport var sectionasm32 = 0;\\nexport var inside_label32 = 0;\\nexport var islib32 = 0;\\nexport var libtags32 = [];\\n// export var entry_elf = 0;\\n\";\n    // Replace everything before the first \"var Module = (() => {\"\n    src = src.replace(/^[\\s\\S]*?\\nvar Module = \\(\\(\\) => \\{/, exportsBlock + 'var Module = (() => {');\n  }\n\n  // 2) Replace out/err block with custom Module['print'] implementation + out/err.\n  const printBlock = \"\\n\\n  Module['print'] = function (message) {\\n    if (islib32) {\\n\\n\\n      // Regex to get name function\\n      if (sectionasm32 === 1){\\n        const name_function = message.match(/^([0-9a-f]{8})\\\\s+<(.+?)>:$/);\\n        if (name_function && !libtags32.includes(name_function[2])) \\n          libtags32.push(name_function[2]);\\n      }\\n\\n      // Check which section\\n      if (message.search(\\\".text\\\") != -1)\\n        sectionasm32 = 1;\\n      if (message.search(\\\".data\\\") != -1)\\n        sectionasm32 = 2;\\n      if (message.search(\\\".riscv.attributes\\\") != -1)\\n        sectionasm32 = 0;\\n\\n      \\n\\n      console.log(message);\\n      \\n    } else {\\n\\n      // console.log(typeof message);\\n\\n      // console.log(\\\"En que seccion estoy: \\\", sectionasm32);\\n      var auxinsn = [];\\n      const auxiliar = message.trim();\\n      const datamatch = auxiliar.match(/^([0-9a-fA-F]+):\\\\s+((?:[0-9a-fA-F]{2,8}(?:\\\\s+[0-9a-fA-F]{2,8})*))(?:.*?0x([0-9a-fA-F]+))?/); //  /^([0-9a-fA-F]+):.*?0x([0-9a-fA-F]+)/\\n      const insnmatch = auxiliar.match(/^(\\\\w+):\\\\s+((?:fnmadd\\\\.s|\\\\w+|\\\\.\\\\w+))\\\\s+([^\\\\#]*)(?:#(.*))?$/); // /^(\\\\w+):\\\\s+(\\\\w+)\\\\s+([^\\\\#]*)(?:#(.*))?$/\\n      const labelmatch = auxiliar.match(/^([0-9a-f]{8})\\\\s+<(.+?)>:$/);\\n      if (insnmatch !== null && sectionasm32 === 1) {\\n        const address = insnmatch[1].trim();                       // Parte 1: direcci\\u00f3n\\n        const hexInstruction = insnmatch[2].trim();                // Parte 2: instrucci\\u00f3n hexadecimal\\n        const asmInstruction = (insnmatch[3].trim()).replace(/\\\\\\\\t/g, ' ');                // Parte 3: instrucci\\u00f3n ensamblador (sin el comentario)\\n        // const comment = match[4] ? insnmatchmatch[4].trim() : null;  // Parte 4: comentario (opcional)\\n        let axx = dumptextinstructions32.findIndex(sublist => sublist.includes(address));\\n        if (axx != -1 && sectionasm32 === 1) {\\n          dumptextinstructions32[axx][1] = hexInstruction;\\n          dumptextinstructions32[axx][2] = asmInstruction.replace(/\\\\\\\\t/g, ' ');\\n        }\\n        else if (sectionasm32 === 1){\\n          auxinsn.push(address);\\n          auxinsn.push(hexInstruction);\\n          auxinsn.push(asmInstruction.replace(/\\\\\\\\t/g, ' '));\\n          auxinsn.push(0);\\n          auxinsn.push(\\\"\\\");\\n          dumptextinstructions32.push(auxinsn);\\n        }\\n      }\\n      else if (datamatch !== null && sectionasm32 === 2){\\n        let axx = dumpdatainstructions32.findIndex(sublist => sublist.includes(datamatch[1])); \\n        if (axx !== -1 && sectionasm32 === 2) {\\n            dumpdatainstructions32[axx][1] = datamatch[2];\\n            dumpdatainstructions32[axx][2] = \\\"\\\"; // asmInstruction.replace(/\\\\\\\\t/g, ' ');\\n        }\\n        else if (sectionasm32 === 2) {\\n          auxinsn.push(datamatch[1]);\\n          auxinsn.push(datamatch[2]);\\n          auxinsn.push(\\\"\\\"/*asmInstruction.replace(/\\\\\\\\t/g, ' ')*/);\\n          auxinsn.push(0);\\n          auxinsn.push(\\\"\\\");\\n          if(auxinsn[3] === 0){\\n            // console.log(\\\"Exaa que se va a insertar en un dumpdata anterior: \\\", auxinsn);\\n            // console.log(\\\"Que es esto: \\\", /[^0-9a-fA-F]/.test(auxinsn[1]));\\n            if(/[^0-9a-fA-F]/.test(auxinsn[1])/*   auxinsn[1].includes(\\\"madd.s\\\")*/){\\n              //buscamos la palabra completa almacenada por el list_data_instructions\\n              var auxda = list_data_instructions.findIndex(data => data.label === dumpdatainstructions32[dumpdatainstructions32.length -1][4]);\\n              var list_data_elem;\\n              var aux_index_value = list_data_instructions[auxda].value.length;\\n              if (typeof list_data_instructions[auxda].value === \\\"object\\\"){\\n                if (list_data_instructions[auxda].value[aux_index_value - 1].includes(\\\"-\\\")){\\n                  // caso de ser el valor negativo\\n                  let buff, buff_view;\\n                  switch (list_data_instructions[auxda].type){\\n                  case \\\"half\\\":\\n                    list_data_elem = (parseInt(list_data_instructions[auxda].value[aux_index_value - 1]) & 0xFFFF).toString(16).padStart(4, \\\"0\\\");\\n                    break;\\n                  case \\\"word\\\":\\n                    list_data_elem = (parseInt(list_data_instructions[auxda].value[aux_index_value - 1]) >>> 0).toString(16).padStart(8, \\\"0\\\");\\n                    break;\\n                  case \\\"byte\\\":\\n                    list_data_elem = (parseInt(list_data_instructions[auxda].value[aux_index_value - 1]) & 0xFF).toString(16).padStart(2, \\\"0\\\");\\n                    break;\\n                  case \\\"float\\\":\\n                    buff = new ArrayBuffer(4);\\n                    buff_view = new DataView(buff);\\n                    buff_view.setFloat32(0, parseFloat(list_data_instructions[auxda].value[aux_index_value - 1]), true);\\n                    list_data_elem = buff_view.getUint32(0, true).toString(16).padStart(8, '0');\\n\\n                    // list_data_elem = (parseFloat(list_data_instructions[auxda].value[aux_index_value - 1])).toString(16);\\n                    break;\\n                  case \\\"double\\\":\\n                    buff = new ArrayBuffer(8);\\n                    buff_view = new DataView(buff);\\n                    buff_view.setFloat64(0, parseFloat(list_data_instructions[auxda].value[aux_index_value - 1]), true);\\n                    let lo = buff_view.getUint32(0, true).toString(16).padStart(8, '0');\\n                    let hi = buff_view.getUint32(4, true).toString(16).padStart(8, '0');\\n\\n                    list_data_elem = lo + hi;\\n                    break;\\n                }\\n                  dumpdatainstructions32[dumpdatainstructions32.length - 1][1] = list_data_elem + dumpdatainstructions32[dumpdatainstructions32.length -1][1];\\n                }else { // Caso de ser el valor positivo o sin signo\\n                  dumpdatainstructions32[dumpdatainstructions32.length -1][1] = list_data_instructions[auxda].value[aux_index_value - 1].toString(16) + dumpdatainstructions32[dumpdatainstructions32.length -1][1];\\n                }\\n              }\\n            }\\n            else dumpdatainstructions32[dumpdatainstructions32.length -1][1] = auxinsn[1] + dumpdatainstructions32[dumpdatainstructions32.length -1][1];\\n            inside_label32 += 1;\\n          }else \\n            dumpdatainstructions32.push(auxinsn);\\n        }\\n      }\\n      else if(labelmatch && sectionasm32 != 0){\\n        // console.log(\\\"Identificado:\\\", labelmatch);\\n        auxinsn.push(labelmatch[1].trim());\\n        auxinsn.push(\\\"\\\");\\n        auxinsn.push(\\\"\\\");\\n        auxinsn.push(1);\\n        auxinsn.push(labelmatch[2].trim());\\n        console.log(\\\"labelmatch: \\\", labelmatch);\\n        if (!document.app.$data.c_kernel && labelmatch[2].trim().includes(\\\"kernel\\\"))\\n          document.app.$data.entry_elf = labelmatch[1].trim();\\n        else if(labelmatch[2].trim() === \\\"_main\\\" && document.app.$data.c_kernel){\\n          document.app.$data.entry_elf = labelmatch[1].trim();\\n        }\\n\\n        if (document.app.$data.entry_elf !== undefined && !document.app.$data.entry_elf.startsWith(\\\"0x\\\"))\\n          document.app.$data.entry_elf = \\\"0x\\\" + document.app.$data.entry_elf;\\n        \\n        if (sectionasm32 === 1){\\n          dumptextinstructions32.push(auxinsn);\\n        }else if (sectionasm32 === 2){\\n          dumpdatainstructions32.push(auxinsn);\\n          inside_label32 = 0;\\n        }\\n\\n      }\\n\\n      // else {\\n      //   // console.log(\\\"objdump: 1\\\", message);\\n      // }\\n\\n      // identificacion de que seccion de codigo entramos.\\n      if (message.search(\\\".text\\\") != -1)\\n        sectionasm32 = 1;\\n      if (message.search(\\\".data\\\") != -1)\\n        sectionasm32 = 2;\\n      if (message.search(\\\".riscv.attributes\\\") != -1)\\n        sectionasm32 = 0;\\n\\n      console.log(message);\\n      // console.log(dumpdatainstructions32); \\n    }\\n  }\\n\\n  var out = Module[\\\"print\\\"] || console.log.bind(console);\\n\\n  var err = Module[\\\"printErr\\\"] || console.warn.bind(console);\\n\";\n  const outErrRegex = /\\nvar out = Module\\[\"print\"\\] \\|\\| console\\.log\\.bind\\(console\\);\\n\\nvar err = Module\\[\"printErr\"\\] \\|\\| console\\.warn\\.bind\\(console\\);\\n/;\n  if (outErrRegex.test(src) && !src.includes(\"Module['print'] = function (message)\")) {\n    src = src.replace(outErrRegex, printBlock);\n  }\n\n  // 3) Comment out dependenciesFulfilled runCaller block\n  const depBlock = `dependenciesFulfilled = function runCaller() {\\n if (!calledRun) run();\\n if (!calledRun) dependenciesFulfilled = runCaller;\\n};`;\n  const depBlockCommented = `// dependenciesFulfilled = function runCaller() {\\n//  if (!calledRun) run();\\n//  if (!calledRun) dependenciesFulfilled = runCaller;\\n// };`;\n  if (src.includes(depBlock) && !src.includes(depBlockCommented)) {\n    src = src.replace(depBlock, depBlockCommented);\n  }\n\n  // 4) In run(args), add shouldRunNow = true; right after function start (if missing)\n  src = src.replace(/function run\\(args\\) {\\n(?!\\s*shouldRunNow = true;)/, 'function run(args) {\\n  shouldRunNow = true;\\n');\n\n  // 5) In doRun(), insert FS.writeFile logic + args.shift() after initRuntime()\n  const initToPreMainRegex = /initRuntime\\(\\);\\n\\s*preMain\\(\\);\\n\\s*readyPromiseResolve\\(Module\\);\\n/;\n  if (initToPreMainRegex.test(src) && !src.includes('if (args[2].includes(\".o\")) { // Disassemble library')) {\n    src = src.replace(initToPreMainRegex, `initRuntime();\\n  if (args[2].includes(\".o\")) { // Disassemble library \\n    FS.writeFile(\"./\" + args[2], args[0]);\\n    islib32 = 1;\\n  }else {\\n    FS.writeFile(\"./input.elf\", args[0]);\\n  }\\n  args.shift();\\n  preMain();\\n  // readyPromiseResolve(Module);\\n`);\n  }\n\n  // 6) Add islib32 = 0; before procExit(status); (remove an extra blank line if present)\n  if (!src.includes('\\n islib32 = 0;\\n  procExit(status);\\n')) {\n    src = src.replace(/\\n\\s*\\n(\\s*)procExit\\(status\\);\\n/, '\\n$1islib32 = 0;\\n$1procExit(status);\\n');\n  }\n  if (!src.includes('\\n islib32 = 0;\\n  procExit(status);\\n')) {\n    src = src.replace(/(\\n\\s*)procExit\\(status\\);\\n/, '$1islib32 = 0;\\n$1procExit(status);\\n');\n  }\n\n  // 6b) Remove blank line between islib32 reset and procExit\n  src = src.replace(/islib32 = 0;\\n\\s*\\n(\\s*)procExit\\(status\\);/, 'islib32 = 0;\\n$1procExit(status);');\n\n  // 7) At bottom: comment run(); and call readyPromiseResolve(Module);\n  src = src.replace(/\\nrun\\(\\);\\n\\n\\n  return Module\\.ready\\n/, '\\n// run();\\n  readyPromiseResolve(Module);\\n\\n  return Module.ready\\n');\n  return src;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwidHJhbnNmb3JtZXIiLCJmaWxlIiwic3JjIiwic291cmNlIiwiaW5jbHVkZXMiLCJleHBvcnRzQmxvY2siLCJyZXBsYWNlIiwicHJpbnRCbG9jayIsIm91dEVyclJlZ2V4IiwidGVzdCIsImRlcEJsb2NrIiwiZGVwQmxvY2tDb21tZW50ZWQiLCJpbml0VG9QcmVNYWluUmVnZXgiXSwic291cmNlUm9vdCI6Ii9ob21lL2p1YW5jYXJsb3MvRXNjcml0b3Jpby9wcnVlYmEvY3JlYXRvci1zYWlsLWFzc2VtYmxlci90b29sY2hhaW5fYnVpbGQvIiwic291cmNlcyI6WyJ0cmFuc2Zvcm0tb2JqZHVtcDMyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICoganNjb2Rlc2hpZnQgdHJhbnNmb3JtIHRvIGNvbnZlcnQgb3JpZ2luYWwuanMgLT4gZGVzZWFkby5qc1xuICpcbiAqIFVzYWdlOlxuICogICBqc2NvZGVzaGlmdCAtdCB0cmFuc2Zvcm0uanMgb3JpZ2luYWwuanNcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0cmFuc2Zvcm1lcihmaWxlKSB7XG4gIGxldCBzcmMgPSBmaWxlLnNvdXJjZTtcblxuICAvLyAxKSBBZGQgZXhwb3J0ZWQgZ2xvYmFscyBhdCB0aGUgdmVyeSB0b3AgKGV4YWN0bHkgbGlrZSBkZXNlYWRvLmpzKVxuICBpZiAoIXNyYy5pbmNsdWRlcygnZXhwb3J0IHZhciBkdW1wdGV4dGluc3RydWN0aW9uczMyJykpIHtcbiAgICBjb25zdCBleHBvcnRzQmxvY2sgPSBcIlxcblxcbmV4cG9ydCB2YXIgZHVtcHRleHRpbnN0cnVjdGlvbnMzMiA9IFtdO1xcbmV4cG9ydCB2YXIgZHVtcGRhdGFpbnN0cnVjdGlvbnMzMiA9IFtdO1xcbmV4cG9ydCB2YXIgZHVtcGxhYmVsczMyICAgICAgICAgICA9IFtdO1xcbmV4cG9ydCB2YXIgc2VjdGlvbmFzbTMyID0gMDtcXG5leHBvcnQgdmFyIGluc2lkZV9sYWJlbDMyID0gMDtcXG5leHBvcnQgdmFyIGlzbGliMzIgPSAwO1xcbmV4cG9ydCB2YXIgbGlidGFnczMyID0gW107XFxuLy8gZXhwb3J0IHZhciBlbnRyeV9lbGYgPSAwO1xcblwiO1xuICAgIC8vIFJlcGxhY2UgZXZlcnl0aGluZyBiZWZvcmUgdGhlIGZpcnN0IFwidmFyIE1vZHVsZSA9ICgoKSA9PiB7XCJcbiAgICBzcmMgPSBzcmMucmVwbGFjZSgvXltcXHNcXFNdKj9cXG52YXIgTW9kdWxlID0gXFwoXFwoXFwpID0+IFxcey8sIGV4cG9ydHNCbG9jayArICd2YXIgTW9kdWxlID0gKCgpID0+IHsnKTtcbiAgfVxuXG4gIC8vIDIpIFJlcGxhY2Ugb3V0L2VyciBibG9jayB3aXRoIGN1c3RvbSBNb2R1bGVbJ3ByaW50J10gaW1wbGVtZW50YXRpb24gKyBvdXQvZXJyLlxuICBjb25zdCBwcmludEJsb2NrID0gXCJcXG5cXG4gIE1vZHVsZVsncHJpbnQnXSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XFxuICAgIGlmIChpc2xpYjMyKSB7XFxuXFxuXFxuICAgICAgLy8gUmVnZXggdG8gZ2V0IG5hbWUgZnVuY3Rpb25cXG4gICAgICBpZiAoc2VjdGlvbmFzbTMyID09PSAxKXtcXG4gICAgICAgIGNvbnN0IG5hbWVfZnVuY3Rpb24gPSBtZXNzYWdlLm1hdGNoKC9eKFswLTlhLWZdezh9KVxcXFxzKzwoLis/KT46JC8pO1xcbiAgICAgICAgaWYgKG5hbWVfZnVuY3Rpb24gJiYgIWxpYnRhZ3MzMi5pbmNsdWRlcyhuYW1lX2Z1bmN0aW9uWzJdKSkgXFxuICAgICAgICAgIGxpYnRhZ3MzMi5wdXNoKG5hbWVfZnVuY3Rpb25bMl0pO1xcbiAgICAgIH1cXG5cXG4gICAgICAvLyBDaGVjayB3aGljaCBzZWN0aW9uXFxuICAgICAgaWYgKG1lc3NhZ2Uuc2VhcmNoKFxcXCIudGV4dFxcXCIpICE9IC0xKVxcbiAgICAgICAgc2VjdGlvbmFzbTMyID0gMTtcXG4gICAgICBpZiAobWVzc2FnZS5zZWFyY2goXFxcIi5kYXRhXFxcIikgIT0gLTEpXFxuICAgICAgICBzZWN0aW9uYXNtMzIgPSAyO1xcbiAgICAgIGlmIChtZXNzYWdlLnNlYXJjaChcXFwiLnJpc2N2LmF0dHJpYnV0ZXNcXFwiKSAhPSAtMSlcXG4gICAgICAgIHNlY3Rpb25hc20zMiA9IDA7XFxuXFxuICAgICAgXFxuXFxuICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XFxuICAgICAgXFxuICAgIH0gZWxzZSB7XFxuXFxuICAgICAgLy8gY29uc29sZS5sb2codHlwZW9mIG1lc3NhZ2UpO1xcblxcbiAgICAgIC8vIGNvbnNvbGUubG9nKFxcXCJFbiBxdWUgc2VjY2lvbiBlc3RveTogXFxcIiwgc2VjdGlvbmFzbTMyKTtcXG4gICAgICB2YXIgYXV4aW5zbiA9IFtdO1xcbiAgICAgIGNvbnN0IGF1eGlsaWFyID0gbWVzc2FnZS50cmltKCk7XFxuICAgICAgY29uc3QgZGF0YW1hdGNoID0gYXV4aWxpYXIubWF0Y2goL14oWzAtOWEtZkEtRl0rKTpcXFxccysoKD86WzAtOWEtZkEtRl17Miw4fSg/OlxcXFxzK1swLTlhLWZBLUZdezIsOH0pKikpKD86Lio/MHgoWzAtOWEtZkEtRl0rKSk/Lyk7IC8vICAvXihbMC05YS1mQS1GXSspOi4qPzB4KFswLTlhLWZBLUZdKykvXFxuICAgICAgY29uc3QgaW5zbm1hdGNoID0gYXV4aWxpYXIubWF0Y2goL14oXFxcXHcrKTpcXFxccysoKD86Zm5tYWRkXFxcXC5zfFxcXFx3K3xcXFxcLlxcXFx3KykpXFxcXHMrKFteXFxcXCNdKikoPzojKC4qKSk/JC8pOyAvLyAvXihcXFxcdyspOlxcXFxzKyhcXFxcdyspXFxcXHMrKFteXFxcXCNdKikoPzojKC4qKSk/JC9cXG4gICAgICBjb25zdCBsYWJlbG1hdGNoID0gYXV4aWxpYXIubWF0Y2goL14oWzAtOWEtZl17OH0pXFxcXHMrPCguKz8pPjokLyk7XFxuICAgICAgaWYgKGluc25tYXRjaCAhPT0gbnVsbCAmJiBzZWN0aW9uYXNtMzIgPT09IDEpIHtcXG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSBpbnNubWF0Y2hbMV0udHJpbSgpOyAgICAgICAgICAgICAgICAgICAgICAgLy8gUGFydGUgMTogZGlyZWNjaVxcdTAwZjNuXFxuICAgICAgICBjb25zdCBoZXhJbnN0cnVjdGlvbiA9IGluc25tYXRjaFsyXS50cmltKCk7ICAgICAgICAgICAgICAgIC8vIFBhcnRlIDI6IGluc3RydWNjaVxcdTAwZjNuIGhleGFkZWNpbWFsXFxuICAgICAgICBjb25zdCBhc21JbnN0cnVjdGlvbiA9IChpbnNubWF0Y2hbM10udHJpbSgpKS5yZXBsYWNlKC9cXFxcXFxcXHQvZywgJyAnKTsgICAgICAgICAgICAgICAgLy8gUGFydGUgMzogaW5zdHJ1Y2NpXFx1MDBmM24gZW5zYW1ibGFkb3IgKHNpbiBlbCBjb21lbnRhcmlvKVxcbiAgICAgICAgLy8gY29uc3QgY29tbWVudCA9IG1hdGNoWzRdID8gaW5zbm1hdGNobWF0Y2hbNF0udHJpbSgpIDogbnVsbDsgIC8vIFBhcnRlIDQ6IGNvbWVudGFyaW8gKG9wY2lvbmFsKVxcbiAgICAgICAgbGV0IGF4eCA9IGR1bXB0ZXh0aW5zdHJ1Y3Rpb25zMzIuZmluZEluZGV4KHN1Ymxpc3QgPT4gc3VibGlzdC5pbmNsdWRlcyhhZGRyZXNzKSk7XFxuICAgICAgICBpZiAoYXh4ICE9IC0xICYmIHNlY3Rpb25hc20zMiA9PT0gMSkge1xcbiAgICAgICAgICBkdW1wdGV4dGluc3RydWN0aW9uczMyW2F4eF1bMV0gPSBoZXhJbnN0cnVjdGlvbjtcXG4gICAgICAgICAgZHVtcHRleHRpbnN0cnVjdGlvbnMzMltheHhdWzJdID0gYXNtSW5zdHJ1Y3Rpb24ucmVwbGFjZSgvXFxcXFxcXFx0L2csICcgJyk7XFxuICAgICAgICB9XFxuICAgICAgICBlbHNlIGlmIChzZWN0aW9uYXNtMzIgPT09IDEpe1xcbiAgICAgICAgICBhdXhpbnNuLnB1c2goYWRkcmVzcyk7XFxuICAgICAgICAgIGF1eGluc24ucHVzaChoZXhJbnN0cnVjdGlvbik7XFxuICAgICAgICAgIGF1eGluc24ucHVzaChhc21JbnN0cnVjdGlvbi5yZXBsYWNlKC9cXFxcXFxcXHQvZywgJyAnKSk7XFxuICAgICAgICAgIGF1eGluc24ucHVzaCgwKTtcXG4gICAgICAgICAgYXV4aW5zbi5wdXNoKFxcXCJcXFwiKTtcXG4gICAgICAgICAgZHVtcHRleHRpbnN0cnVjdGlvbnMzMi5wdXNoKGF1eGluc24pO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgICBlbHNlIGlmIChkYXRhbWF0Y2ggIT09IG51bGwgJiYgc2VjdGlvbmFzbTMyID09PSAyKXtcXG4gICAgICAgIGxldCBheHggPSBkdW1wZGF0YWluc3RydWN0aW9uczMyLmZpbmRJbmRleChzdWJsaXN0ID0+IHN1Ymxpc3QuaW5jbHVkZXMoZGF0YW1hdGNoWzFdKSk7IFxcbiAgICAgICAgaWYgKGF4eCAhPT0gLTEgJiYgc2VjdGlvbmFzbTMyID09PSAyKSB7XFxuICAgICAgICAgICAgZHVtcGRhdGFpbnN0cnVjdGlvbnMzMltheHhdWzFdID0gZGF0YW1hdGNoWzJdO1xcbiAgICAgICAgICAgIGR1bXBkYXRhaW5zdHJ1Y3Rpb25zMzJbYXh4XVsyXSA9IFxcXCJcXFwiOyAvLyBhc21JbnN0cnVjdGlvbi5yZXBsYWNlKC9cXFxcXFxcXHQvZywgJyAnKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGVsc2UgaWYgKHNlY3Rpb25hc20zMiA9PT0gMikge1xcbiAgICAgICAgICBhdXhpbnNuLnB1c2goZGF0YW1hdGNoWzFdKTtcXG4gICAgICAgICAgYXV4aW5zbi5wdXNoKGRhdGFtYXRjaFsyXSk7XFxuICAgICAgICAgIGF1eGluc24ucHVzaChcXFwiXFxcIi8qYXNtSW5zdHJ1Y3Rpb24ucmVwbGFjZSgvXFxcXFxcXFx0L2csICcgJykqLyk7XFxuICAgICAgICAgIGF1eGluc24ucHVzaCgwKTtcXG4gICAgICAgICAgYXV4aW5zbi5wdXNoKFxcXCJcXFwiKTtcXG4gICAgICAgICAgaWYoYXV4aW5zblszXSA9PT0gMCl7XFxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXFxcIkV4YWEgcXVlIHNlIHZhIGEgaW5zZXJ0YXIgZW4gdW4gZHVtcGRhdGEgYW50ZXJpb3I6IFxcXCIsIGF1eGluc24pO1xcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFxcXCJRdWUgZXMgZXN0bzogXFxcIiwgL1teMC05YS1mQS1GXS8udGVzdChhdXhpbnNuWzFdKSk7XFxuICAgICAgICAgICAgaWYoL1teMC05YS1mQS1GXS8udGVzdChhdXhpbnNuWzFdKS8qICAgYXV4aW5zblsxXS5pbmNsdWRlcyhcXFwibWFkZC5zXFxcIikqLyl7XFxuICAgICAgICAgICAgICAvL2J1c2NhbW9zIGxhIHBhbGFicmEgY29tcGxldGEgYWxtYWNlbmFkYSBwb3IgZWwgbGlzdF9kYXRhX2luc3RydWN0aW9uc1xcbiAgICAgICAgICAgICAgdmFyIGF1eGRhID0gbGlzdF9kYXRhX2luc3RydWN0aW9ucy5maW5kSW5kZXgoZGF0YSA9PiBkYXRhLmxhYmVsID09PSBkdW1wZGF0YWluc3RydWN0aW9uczMyW2R1bXBkYXRhaW5zdHJ1Y3Rpb25zMzIubGVuZ3RoIC0xXVs0XSk7XFxuICAgICAgICAgICAgICB2YXIgbGlzdF9kYXRhX2VsZW07XFxuICAgICAgICAgICAgICB2YXIgYXV4X2luZGV4X3ZhbHVlID0gbGlzdF9kYXRhX2luc3RydWN0aW9uc1thdXhkYV0udmFsdWUubGVuZ3RoO1xcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsaXN0X2RhdGFfaW5zdHJ1Y3Rpb25zW2F1eGRhXS52YWx1ZSA9PT0gXFxcIm9iamVjdFxcXCIpe1xcbiAgICAgICAgICAgICAgICBpZiAobGlzdF9kYXRhX2luc3RydWN0aW9uc1thdXhkYV0udmFsdWVbYXV4X2luZGV4X3ZhbHVlIC0gMV0uaW5jbHVkZXMoXFxcIi1cXFwiKSl7XFxuICAgICAgICAgICAgICAgICAgLy8gY2FzbyBkZSBzZXIgZWwgdmFsb3IgbmVnYXRpdm9cXG4gICAgICAgICAgICAgICAgICBsZXQgYnVmZiwgYnVmZl92aWV3O1xcbiAgICAgICAgICAgICAgICAgIHN3aXRjaCAobGlzdF9kYXRhX2luc3RydWN0aW9uc1thdXhkYV0udHlwZSl7XFxuICAgICAgICAgICAgICAgICAgY2FzZSBcXFwiaGFsZlxcXCI6XFxuICAgICAgICAgICAgICAgICAgICBsaXN0X2RhdGFfZWxlbSA9IChwYXJzZUludChsaXN0X2RhdGFfaW5zdHJ1Y3Rpb25zW2F1eGRhXS52YWx1ZVthdXhfaW5kZXhfdmFsdWUgLSAxXSkgJiAweEZGRkYpLnRvU3RyaW5nKDE2KS5wYWRTdGFydCg0LCBcXFwiMFxcXCIpO1xcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XFxuICAgICAgICAgICAgICAgICAgY2FzZSBcXFwid29yZFxcXCI6XFxuICAgICAgICAgICAgICAgICAgICBsaXN0X2RhdGFfZWxlbSA9IChwYXJzZUludChsaXN0X2RhdGFfaW5zdHJ1Y3Rpb25zW2F1eGRhXS52YWx1ZVthdXhfaW5kZXhfdmFsdWUgLSAxXSkgPj4+IDApLnRvU3RyaW5nKDE2KS5wYWRTdGFydCg4LCBcXFwiMFxcXCIpO1xcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XFxuICAgICAgICAgICAgICAgICAgY2FzZSBcXFwiYnl0ZVxcXCI6XFxuICAgICAgICAgICAgICAgICAgICBsaXN0X2RhdGFfZWxlbSA9IChwYXJzZUludChsaXN0X2RhdGFfaW5zdHJ1Y3Rpb25zW2F1eGRhXS52YWx1ZVthdXhfaW5kZXhfdmFsdWUgLSAxXSkgJiAweEZGKS50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXFxcIjBcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgICAgICAgIGNhc2UgXFxcImZsb2F0XFxcIjpcXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmYgPSBuZXcgQXJyYXlCdWZmZXIoNCk7XFxuICAgICAgICAgICAgICAgICAgICBidWZmX3ZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZik7XFxuICAgICAgICAgICAgICAgICAgICBidWZmX3ZpZXcuc2V0RmxvYXQzMigwLCBwYXJzZUZsb2F0KGxpc3RfZGF0YV9pbnN0cnVjdGlvbnNbYXV4ZGFdLnZhbHVlW2F1eF9pbmRleF92YWx1ZSAtIDFdKSwgdHJ1ZSk7XFxuICAgICAgICAgICAgICAgICAgICBsaXN0X2RhdGFfZWxlbSA9IGJ1ZmZfdmlldy5nZXRVaW50MzIoMCwgdHJ1ZSkudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDgsICcwJyk7XFxuXFxuICAgICAgICAgICAgICAgICAgICAvLyBsaXN0X2RhdGFfZWxlbSA9IChwYXJzZUZsb2F0KGxpc3RfZGF0YV9pbnN0cnVjdGlvbnNbYXV4ZGFdLnZhbHVlW2F1eF9pbmRleF92YWx1ZSAtIDFdKSkudG9TdHJpbmcoMTYpO1xcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XFxuICAgICAgICAgICAgICAgICAgY2FzZSBcXFwiZG91YmxlXFxcIjpcXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmYgPSBuZXcgQXJyYXlCdWZmZXIoOCk7XFxuICAgICAgICAgICAgICAgICAgICBidWZmX3ZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZik7XFxuICAgICAgICAgICAgICAgICAgICBidWZmX3ZpZXcuc2V0RmxvYXQ2NCgwLCBwYXJzZUZsb2F0KGxpc3RfZGF0YV9pbnN0cnVjdGlvbnNbYXV4ZGFdLnZhbHVlW2F1eF9pbmRleF92YWx1ZSAtIDFdKSwgdHJ1ZSk7XFxuICAgICAgICAgICAgICAgICAgICBsZXQgbG8gPSBidWZmX3ZpZXcuZ2V0VWludDMyKDAsIHRydWUpLnRvU3RyaW5nKDE2KS5wYWRTdGFydCg4LCAnMCcpO1xcbiAgICAgICAgICAgICAgICAgICAgbGV0IGhpID0gYnVmZl92aWV3LmdldFVpbnQzMig0LCB0cnVlKS50b1N0cmluZygxNikucGFkU3RhcnQoOCwgJzAnKTtcXG5cXG4gICAgICAgICAgICAgICAgICAgIGxpc3RfZGF0YV9lbGVtID0gbG8gKyBoaTtcXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgZHVtcGRhdGFpbnN0cnVjdGlvbnMzMltkdW1wZGF0YWluc3RydWN0aW9uczMyLmxlbmd0aCAtIDFdWzFdID0gbGlzdF9kYXRhX2VsZW0gKyBkdW1wZGF0YWluc3RydWN0aW9uczMyW2R1bXBkYXRhaW5zdHJ1Y3Rpb25zMzIubGVuZ3RoIC0xXVsxXTtcXG4gICAgICAgICAgICAgICAgfWVsc2UgeyAvLyBDYXNvIGRlIHNlciBlbCB2YWxvciBwb3NpdGl2byBvIHNpbiBzaWdub1xcbiAgICAgICAgICAgICAgICAgIGR1bXBkYXRhaW5zdHJ1Y3Rpb25zMzJbZHVtcGRhdGFpbnN0cnVjdGlvbnMzMi5sZW5ndGggLTFdWzFdID0gbGlzdF9kYXRhX2luc3RydWN0aW9uc1thdXhkYV0udmFsdWVbYXV4X2luZGV4X3ZhbHVlIC0gMV0udG9TdHJpbmcoMTYpICsgZHVtcGRhdGFpbnN0cnVjdGlvbnMzMltkdW1wZGF0YWluc3RydWN0aW9uczMyLmxlbmd0aCAtMV1bMV07XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgZWxzZSBkdW1wZGF0YWluc3RydWN0aW9uczMyW2R1bXBkYXRhaW5zdHJ1Y3Rpb25zMzIubGVuZ3RoIC0xXVsxXSA9IGF1eGluc25bMV0gKyBkdW1wZGF0YWluc3RydWN0aW9uczMyW2R1bXBkYXRhaW5zdHJ1Y3Rpb25zMzIubGVuZ3RoIC0xXVsxXTtcXG4gICAgICAgICAgICBpbnNpZGVfbGFiZWwzMiArPSAxO1xcbiAgICAgICAgICB9ZWxzZSBcXG4gICAgICAgICAgICBkdW1wZGF0YWluc3RydWN0aW9uczMyLnB1c2goYXV4aW5zbik7XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICAgIGVsc2UgaWYobGFiZWxtYXRjaCAmJiBzZWN0aW9uYXNtMzIgIT0gMCl7XFxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcXFwiSWRlbnRpZmljYWRvOlxcXCIsIGxhYmVsbWF0Y2gpO1xcbiAgICAgICAgYXV4aW5zbi5wdXNoKGxhYmVsbWF0Y2hbMV0udHJpbSgpKTtcXG4gICAgICAgIGF1eGluc24ucHVzaChcXFwiXFxcIik7XFxuICAgICAgICBhdXhpbnNuLnB1c2goXFxcIlxcXCIpO1xcbiAgICAgICAgYXV4aW5zbi5wdXNoKDEpO1xcbiAgICAgICAgYXV4aW5zbi5wdXNoKGxhYmVsbWF0Y2hbMl0udHJpbSgpKTtcXG4gICAgICAgIGNvbnNvbGUubG9nKFxcXCJsYWJlbG1hdGNoOiBcXFwiLCBsYWJlbG1hdGNoKTtcXG4gICAgICAgIGlmICghZG9jdW1lbnQuYXBwLiRkYXRhLmNfa2VybmVsICYmIGxhYmVsbWF0Y2hbMl0udHJpbSgpLmluY2x1ZGVzKFxcXCJrZXJuZWxcXFwiKSlcXG4gICAgICAgICAgZG9jdW1lbnQuYXBwLiRkYXRhLmVudHJ5X2VsZiA9IGxhYmVsbWF0Y2hbMV0udHJpbSgpO1xcbiAgICAgICAgZWxzZSBpZihsYWJlbG1hdGNoWzJdLnRyaW0oKSA9PT0gXFxcIl9tYWluXFxcIiAmJiBkb2N1bWVudC5hcHAuJGRhdGEuY19rZXJuZWwpe1xcbiAgICAgICAgICBkb2N1bWVudC5hcHAuJGRhdGEuZW50cnlfZWxmID0gbGFiZWxtYXRjaFsxXS50cmltKCk7XFxuICAgICAgICB9XFxuXFxuICAgICAgICBpZiAoZG9jdW1lbnQuYXBwLiRkYXRhLmVudHJ5X2VsZiAhPT0gdW5kZWZpbmVkICYmICFkb2N1bWVudC5hcHAuJGRhdGEuZW50cnlfZWxmLnN0YXJ0c1dpdGgoXFxcIjB4XFxcIikpXFxuICAgICAgICAgIGRvY3VtZW50LmFwcC4kZGF0YS5lbnRyeV9lbGYgPSBcXFwiMHhcXFwiICsgZG9jdW1lbnQuYXBwLiRkYXRhLmVudHJ5X2VsZjtcXG4gICAgICAgIFxcbiAgICAgICAgaWYgKHNlY3Rpb25hc20zMiA9PT0gMSl7XFxuICAgICAgICAgIGR1bXB0ZXh0aW5zdHJ1Y3Rpb25zMzIucHVzaChhdXhpbnNuKTtcXG4gICAgICAgIH1lbHNlIGlmIChzZWN0aW9uYXNtMzIgPT09IDIpe1xcbiAgICAgICAgICBkdW1wZGF0YWluc3RydWN0aW9uczMyLnB1c2goYXV4aW5zbik7XFxuICAgICAgICAgIGluc2lkZV9sYWJlbDMyID0gMDtcXG4gICAgICAgIH1cXG5cXG4gICAgICB9XFxuXFxuICAgICAgLy8gZWxzZSB7XFxuICAgICAgLy8gICAvLyBjb25zb2xlLmxvZyhcXFwib2JqZHVtcDogMVxcXCIsIG1lc3NhZ2UpO1xcbiAgICAgIC8vIH1cXG5cXG4gICAgICAvLyBpZGVudGlmaWNhY2lvbiBkZSBxdWUgc2VjY2lvbiBkZSBjb2RpZ28gZW50cmFtb3MuXFxuICAgICAgaWYgKG1lc3NhZ2Uuc2VhcmNoKFxcXCIudGV4dFxcXCIpICE9IC0xKVxcbiAgICAgICAgc2VjdGlvbmFzbTMyID0gMTtcXG4gICAgICBpZiAobWVzc2FnZS5zZWFyY2goXFxcIi5kYXRhXFxcIikgIT0gLTEpXFxuICAgICAgICBzZWN0aW9uYXNtMzIgPSAyO1xcbiAgICAgIGlmIChtZXNzYWdlLnNlYXJjaChcXFwiLnJpc2N2LmF0dHJpYnV0ZXNcXFwiKSAhPSAtMSlcXG4gICAgICAgIHNlY3Rpb25hc20zMiA9IDA7XFxuXFxuICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XFxuICAgICAgLy8gY29uc29sZS5sb2coZHVtcGRhdGFpbnN0cnVjdGlvbnMzMik7IFxcbiAgICB9XFxuICB9XFxuXFxuICB2YXIgb3V0ID0gTW9kdWxlW1xcXCJwcmludFxcXCJdIHx8IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSk7XFxuXFxuICB2YXIgZXJyID0gTW9kdWxlW1xcXCJwcmludEVyclxcXCJdIHx8IGNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpO1xcblwiO1xuXG4gIGNvbnN0IG91dEVyclJlZ2V4ID0gL1xcbnZhciBvdXQgPSBNb2R1bGVcXFtcInByaW50XCJcXF0gXFx8XFx8IGNvbnNvbGVcXC5sb2dcXC5iaW5kXFwoY29uc29sZVxcKTtcXG5cXG52YXIgZXJyID0gTW9kdWxlXFxbXCJwcmludEVyclwiXFxdIFxcfFxcfCBjb25zb2xlXFwud2FyblxcLmJpbmRcXChjb25zb2xlXFwpO1xcbi87XG4gIGlmIChvdXRFcnJSZWdleC50ZXN0KHNyYykgJiYgIXNyYy5pbmNsdWRlcyhcIk1vZHVsZVsncHJpbnQnXSA9IGZ1bmN0aW9uIChtZXNzYWdlKVwiKSkge1xuICAgIHNyYyA9IHNyYy5yZXBsYWNlKG91dEVyclJlZ2V4LCBwcmludEJsb2NrKTtcbiAgfVxuXG4gIC8vIDMpIENvbW1lbnQgb3V0IGRlcGVuZGVuY2llc0Z1bGZpbGxlZCBydW5DYWxsZXIgYmxvY2tcbiAgY29uc3QgZGVwQmxvY2sgPVxuYGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IGZ1bmN0aW9uIHJ1bkNhbGxlcigpIHtcXG4gaWYgKCFjYWxsZWRSdW4pIHJ1bigpO1xcbiBpZiAoIWNhbGxlZFJ1bikgZGVwZW5kZW5jaWVzRnVsZmlsbGVkID0gcnVuQ2FsbGVyO1xcbn07YDtcbiAgY29uc3QgZGVwQmxvY2tDb21tZW50ZWQgPVxuYC8vIGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IGZ1bmN0aW9uIHJ1bkNhbGxlcigpIHtcXG4vLyAgaWYgKCFjYWxsZWRSdW4pIHJ1bigpO1xcbi8vICBpZiAoIWNhbGxlZFJ1bikgZGVwZW5kZW5jaWVzRnVsZmlsbGVkID0gcnVuQ2FsbGVyO1xcbi8vIH07YDtcbiAgaWYgKHNyYy5pbmNsdWRlcyhkZXBCbG9jaykgJiYgIXNyYy5pbmNsdWRlcyhkZXBCbG9ja0NvbW1lbnRlZCkpIHtcbiAgICBzcmMgPSBzcmMucmVwbGFjZShkZXBCbG9jaywgZGVwQmxvY2tDb21tZW50ZWQpO1xuICB9XG5cbiAgLy8gNCkgSW4gcnVuKGFyZ3MpLCBhZGQgc2hvdWxkUnVuTm93ID0gdHJ1ZTsgcmlnaHQgYWZ0ZXIgZnVuY3Rpb24gc3RhcnQgKGlmIG1pc3NpbmcpXG4gIHNyYyA9IHNyYy5yZXBsYWNlKC9mdW5jdGlvbiBydW5cXChhcmdzXFwpIHtcXG4oPyFcXHMqc2hvdWxkUnVuTm93ID0gdHJ1ZTspLywgJ2Z1bmN0aW9uIHJ1bihhcmdzKSB7XFxuICBzaG91bGRSdW5Ob3cgPSB0cnVlO1xcbicpO1xuXG4gIC8vIDUpIEluIGRvUnVuKCksIGluc2VydCBGUy53cml0ZUZpbGUgbG9naWMgKyBhcmdzLnNoaWZ0KCkgYWZ0ZXIgaW5pdFJ1bnRpbWUoKVxuICBjb25zdCBpbml0VG9QcmVNYWluUmVnZXggPSAvaW5pdFJ1bnRpbWVcXChcXCk7XFxuXFxzKnByZU1haW5cXChcXCk7XFxuXFxzKnJlYWR5UHJvbWlzZVJlc29sdmVcXChNb2R1bGVcXCk7XFxuLztcbiAgaWYgKGluaXRUb1ByZU1haW5SZWdleC50ZXN0KHNyYykgJiYgIXNyYy5pbmNsdWRlcygnaWYgKGFyZ3NbMl0uaW5jbHVkZXMoXCIub1wiKSkgeyAvLyBEaXNhc3NlbWJsZSBsaWJyYXJ5JykpIHtcbiAgICBzcmMgPSBzcmMucmVwbGFjZShpbml0VG9QcmVNYWluUmVnZXgsXG5gaW5pdFJ1bnRpbWUoKTtcXG4gIGlmIChhcmdzWzJdLmluY2x1ZGVzKFwiLm9cIikpIHsgLy8gRGlzYXNzZW1ibGUgbGlicmFyeSBcXG4gICAgRlMud3JpdGVGaWxlKFwiLi9cIiArIGFyZ3NbMl0sIGFyZ3NbMF0pO1xcbiAgICBpc2xpYjMyID0gMTtcXG4gIH1lbHNlIHtcXG4gICAgRlMud3JpdGVGaWxlKFwiLi9pbnB1dC5lbGZcIiwgYXJnc1swXSk7XFxuICB9XFxuICBhcmdzLnNoaWZ0KCk7XFxuICBwcmVNYWluKCk7XFxuICAvLyByZWFkeVByb21pc2VSZXNvbHZlKE1vZHVsZSk7XFxuYCk7XG4gIH1cblxuICAvLyA2KSBBZGQgaXNsaWIzMiA9IDA7IGJlZm9yZSBwcm9jRXhpdChzdGF0dXMpOyAocmVtb3ZlIGFuIGV4dHJhIGJsYW5rIGxpbmUgaWYgcHJlc2VudClcbiAgaWYgKCFzcmMuaW5jbHVkZXMoJ1xcbiBpc2xpYjMyID0gMDtcXG4gIHByb2NFeGl0KHN0YXR1cyk7XFxuJykpIHtcbiAgICBzcmMgPSBzcmMucmVwbGFjZSgvXFxuXFxzKlxcbihcXHMqKXByb2NFeGl0XFwoc3RhdHVzXFwpO1xcbi8sICdcXG4kMWlzbGliMzIgPSAwO1xcbiQxcHJvY0V4aXQoc3RhdHVzKTtcXG4nKTtcbiAgfVxuICBpZiAoIXNyYy5pbmNsdWRlcygnXFxuIGlzbGliMzIgPSAwO1xcbiAgcHJvY0V4aXQoc3RhdHVzKTtcXG4nKSkge1xuICAgIHNyYyA9IHNyYy5yZXBsYWNlKC8oXFxuXFxzKilwcm9jRXhpdFxcKHN0YXR1c1xcKTtcXG4vLCAnJDFpc2xpYjMyID0gMDtcXG4kMXByb2NFeGl0KHN0YXR1cyk7XFxuJyk7XG4gIH1cblxuICAvLyA2YikgUmVtb3ZlIGJsYW5rIGxpbmUgYmV0d2VlbiBpc2xpYjMyIHJlc2V0IGFuZCBwcm9jRXhpdFxuICBzcmMgPSBzcmMucmVwbGFjZSgvaXNsaWIzMiA9IDA7XFxuXFxzKlxcbihcXHMqKXByb2NFeGl0XFwoc3RhdHVzXFwpOy8sICdpc2xpYjMyID0gMDtcXG4kMXByb2NFeGl0KHN0YXR1cyk7Jyk7XG5cbiAgLy8gNykgQXQgYm90dG9tOiBjb21tZW50IHJ1bigpOyBhbmQgY2FsbCByZWFkeVByb21pc2VSZXNvbHZlKE1vZHVsZSk7XG4gIHNyYyA9IHNyYy5yZXBsYWNlKC9cXG5ydW5cXChcXCk7XFxuXFxuXFxuICByZXR1cm4gTW9kdWxlXFwucmVhZHlcXG4vLCAnXFxuLy8gcnVuKCk7XFxuICByZWFkeVByb21pc2VSZXNvbHZlKE1vZHVsZSk7XFxuXFxuICByZXR1cm4gTW9kdWxlLnJlYWR5XFxuJyk7XG5cbiAgcmV0dXJuIHNyYztcbn07Il0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBQSxNQUFNLENBQUNDLE9BQU8sR0FBRyxTQUFTQyxXQUFXQSxDQUFDQyxJQUFJLEVBQUU7RUFDMUMsSUFBSUMsR0FBRyxHQUFHRCxJQUFJLENBQUNFLE1BQU07O0VBRXJCO0VBQ0EsSUFBSSxDQUFDRCxHQUFHLENBQUNFLFFBQVEsQ0FBQyxtQ0FBbUMsQ0FBQyxFQUFFO0lBQ3RELE1BQU1DLFlBQVksR0FBRyxrUkFBa1I7SUFDdlM7SUFDQUgsR0FBRyxHQUFHQSxHQUFHLENBQUNJLE9BQU8sQ0FBQyxzQ0FBc0MsRUFBRUQsWUFBWSxHQUFHLHVCQUF1QixDQUFDO0VBQ25HOztFQUVBO0VBQ0EsTUFBTUUsVUFBVSxHQUFHLG00UEFBbTRQO0VBRXQ1UCxNQUFNQyxXQUFXLEdBQUcsNElBQTRJO0VBQ2hLLElBQUlBLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDUCxHQUFHLENBQUMsSUFBSSxDQUFDQSxHQUFHLENBQUNFLFFBQVEsQ0FBQyxzQ0FBc0MsQ0FBQyxFQUFFO0lBQ2xGRixHQUFHLEdBQUdBLEdBQUcsQ0FBQ0ksT0FBTyxDQUFDRSxXQUFXLEVBQUVELFVBQVUsQ0FBQztFQUM1Qzs7RUFFQTtFQUNBLE1BQU1HLFFBQVEsR0FDaEIsa0lBQWtJO0VBQ2hJLE1BQU1DLGlCQUFpQixHQUN6Qiw4SUFBOEk7RUFDNUksSUFBSVQsR0FBRyxDQUFDRSxRQUFRLENBQUNNLFFBQVEsQ0FBQyxJQUFJLENBQUNSLEdBQUcsQ0FBQ0UsUUFBUSxDQUFDTyxpQkFBaUIsQ0FBQyxFQUFFO0lBQzlEVCxHQUFHLEdBQUdBLEdBQUcsQ0FBQ0ksT0FBTyxDQUFDSSxRQUFRLEVBQUVDLGlCQUFpQixDQUFDO0VBQ2hEOztFQUVBO0VBQ0FULEdBQUcsR0FBR0EsR0FBRyxDQUFDSSxPQUFPLENBQUMscURBQXFELEVBQUUsZ0RBQWdELENBQUM7O0VBRTFIO0VBQ0EsTUFBTU0sa0JBQWtCLEdBQUcsd0VBQXdFO0VBQ25HLElBQUlBLGtCQUFrQixDQUFDSCxJQUFJLENBQUNQLEdBQUcsQ0FBQyxJQUFJLENBQUNBLEdBQUcsQ0FBQ0UsUUFBUSxDQUFDLHNEQUFzRCxDQUFDLEVBQUU7SUFDekdGLEdBQUcsR0FBR0EsR0FBRyxDQUFDSSxPQUFPLENBQUNNLGtCQUFrQixFQUN4QyxzUUFBc1EsQ0FBQztFQUNyUTs7RUFFQTtFQUNBLElBQUksQ0FBQ1YsR0FBRyxDQUFDRSxRQUFRLENBQUMsd0NBQXdDLENBQUMsRUFBRTtJQUMzREYsR0FBRyxHQUFHQSxHQUFHLENBQUNJLE9BQU8sQ0FBQyxtQ0FBbUMsRUFBRSx5Q0FBeUMsQ0FBQztFQUNuRztFQUNBLElBQUksQ0FBQ0osR0FBRyxDQUFDRSxRQUFRLENBQUMsd0NBQXdDLENBQUMsRUFBRTtJQUMzREYsR0FBRyxHQUFHQSxHQUFHLENBQUNJLE9BQU8sQ0FBQyw4QkFBOEIsRUFBRSx1Q0FBdUMsQ0FBQztFQUM1Rjs7RUFFQTtFQUNBSixHQUFHLEdBQUdBLEdBQUcsQ0FBQ0ksT0FBTyxDQUFDLDZDQUE2QyxFQUFFLG1DQUFtQyxDQUFDOztFQUVyRztFQUNBSixHQUFHLEdBQUdBLEdBQUcsQ0FBQ0ksT0FBTyxDQUFDLDBDQUEwQyxFQUFFLHdFQUF3RSxDQUFDO0VBRXZJLE9BQU9KLEdBQUc7QUFDWixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["module","exports","transformer","file","src","source","includes","exportsBlock","replace","printBlock","outErrRegex","test","depBlock","depBlockCommented","initToPreMainRegex"],"sourceRoot":"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/","sources":["transform-objdump32.js"],"sourcesContent":["/**\n * jscodeshift transform to convert original.js -> deseado.js\n *\n * Usage:\n *   jscodeshift -t transform.js original.js\n */\nmodule.exports = function transformer(file) {\n  let src = file.source;\n\n  // 1) Add exported globals at the very top (exactly like deseado.js)\n  if (!src.includes('export var dumptextinstructions32')) {\n    const exportsBlock = \"\\n\\nexport var dumptextinstructions32 = [];\\nexport var dumpdatainstructions32 = [];\\nexport var dumplabels32           = [];\\nexport var sectionasm32 = 0;\\nexport var inside_label32 = 0;\\nexport var islib32 = 0;\\nexport var libtags32 = [];\\n// export var entry_elf = 0;\\n\";\n    // Replace everything before the first \"var Module = (() => {\"\n    src = src.replace(/^[\\s\\S]*?\\nvar Module = \\(\\(\\) => \\{/, exportsBlock + 'var Module = (() => {');\n  }\n\n  // 2) Replace out/err block with custom Module['print'] implementation + out/err.\n  const printBlock = \"\\n\\n  Module['print'] = function (message) {\\n    if (islib32) {\\n\\n\\n      // Regex to get name function\\n      if (sectionasm32 === 1){\\n        const name_function = message.match(/^([0-9a-f]{8})\\\\s+<(.+?)>:$/);\\n        if (name_function && !libtags32.includes(name_function[2])) \\n          libtags32.push(name_function[2]);\\n      }\\n\\n      // Check which section\\n      if (message.search(\\\".text\\\") != -1)\\n        sectionasm32 = 1;\\n      if (message.search(\\\".data\\\") != -1)\\n        sectionasm32 = 2;\\n      if (message.search(\\\".riscv.attributes\\\") != -1)\\n        sectionasm32 = 0;\\n\\n      \\n\\n      console.log(message);\\n      \\n    } else {\\n\\n      // console.log(typeof message);\\n\\n      // console.log(\\\"En que seccion estoy: \\\", sectionasm32);\\n      var auxinsn = [];\\n      const auxiliar = message.trim();\\n      const datamatch = auxiliar.match(/^([0-9a-fA-F]+):\\\\s+((?:[0-9a-fA-F]{2,8}(?:\\\\s+[0-9a-fA-F]{2,8})*))(?:.*?0x([0-9a-fA-F]+))?/); //  /^([0-9a-fA-F]+):.*?0x([0-9a-fA-F]+)/\\n      const insnmatch = auxiliar.match(/^(\\\\w+):\\\\s+((?:fnmadd\\\\.s|\\\\w+|\\\\.\\\\w+))\\\\s+([^\\\\#]*)(?:#(.*))?$/); // /^(\\\\w+):\\\\s+(\\\\w+)\\\\s+([^\\\\#]*)(?:#(.*))?$/\\n      const labelmatch = auxiliar.match(/^([0-9a-f]{8})\\\\s+<(.+?)>:$/);\\n      if (insnmatch !== null && sectionasm32 === 1) {\\n        const address = insnmatch[1].trim();                       // Parte 1: direcci\\u00f3n\\n        const hexInstruction = insnmatch[2].trim();                // Parte 2: instrucci\\u00f3n hexadecimal\\n        const asmInstruction = (insnmatch[3].trim()).replace(/\\\\\\\\t/g, ' ');                // Parte 3: instrucci\\u00f3n ensamblador (sin el comentario)\\n        // const comment = match[4] ? insnmatchmatch[4].trim() : null;  // Parte 4: comentario (opcional)\\n        let axx = dumptextinstructions32.findIndex(sublist => sublist.includes(address));\\n        if (axx != -1 && sectionasm32 === 1) {\\n          dumptextinstructions32[axx][1] = hexInstruction;\\n          dumptextinstructions32[axx][2] = asmInstruction.replace(/\\\\\\\\t/g, ' ');\\n        }\\n        else if (sectionasm32 === 1){\\n          auxinsn.push(address);\\n          auxinsn.push(hexInstruction);\\n          auxinsn.push(asmInstruction.replace(/\\\\\\\\t/g, ' '));\\n          auxinsn.push(0);\\n          auxinsn.push(\\\"\\\");\\n          dumptextinstructions32.push(auxinsn);\\n        }\\n      }\\n      else if (datamatch !== null && sectionasm32 === 2){\\n        let axx = dumpdatainstructions32.findIndex(sublist => sublist.includes(datamatch[1])); \\n        if (axx !== -1 && sectionasm32 === 2) {\\n            dumpdatainstructions32[axx][1] = datamatch[2];\\n            dumpdatainstructions32[axx][2] = \\\"\\\"; // asmInstruction.replace(/\\\\\\\\t/g, ' ');\\n        }\\n        else if (sectionasm32 === 2) {\\n          auxinsn.push(datamatch[1]);\\n          auxinsn.push(datamatch[2]);\\n          auxinsn.push(\\\"\\\"/*asmInstruction.replace(/\\\\\\\\t/g, ' ')*/);\\n          auxinsn.push(0);\\n          auxinsn.push(\\\"\\\");\\n          if(auxinsn[3] === 0){\\n            // console.log(\\\"Exaa que se va a insertar en un dumpdata anterior: \\\", auxinsn);\\n            // console.log(\\\"Que es esto: \\\", /[^0-9a-fA-F]/.test(auxinsn[1]));\\n            if(/[^0-9a-fA-F]/.test(auxinsn[1])/*   auxinsn[1].includes(\\\"madd.s\\\")*/){\\n              //buscamos la palabra completa almacenada por el list_data_instructions\\n              var auxda = list_data_instructions.findIndex(data => data.label === dumpdatainstructions32[dumpdatainstructions32.length -1][4]);\\n              var list_data_elem;\\n              var aux_index_value = list_data_instructions[auxda].value.length;\\n              if (typeof list_data_instructions[auxda].value === \\\"object\\\"){\\n                if (list_data_instructions[auxda].value[aux_index_value - 1].includes(\\\"-\\\")){\\n                  // caso de ser el valor negativo\\n                  let buff, buff_view;\\n                  switch (list_data_instructions[auxda].type){\\n                  case \\\"half\\\":\\n                    list_data_elem = (parseInt(list_data_instructions[auxda].value[aux_index_value - 1]) & 0xFFFF).toString(16).padStart(4, \\\"0\\\");\\n                    break;\\n                  case \\\"word\\\":\\n                    list_data_elem = (parseInt(list_data_instructions[auxda].value[aux_index_value - 1]) >>> 0).toString(16).padStart(8, \\\"0\\\");\\n                    break;\\n                  case \\\"byte\\\":\\n                    list_data_elem = (parseInt(list_data_instructions[auxda].value[aux_index_value - 1]) & 0xFF).toString(16).padStart(2, \\\"0\\\");\\n                    break;\\n                  case \\\"float\\\":\\n                    buff = new ArrayBuffer(4);\\n                    buff_view = new DataView(buff);\\n                    buff_view.setFloat32(0, parseFloat(list_data_instructions[auxda].value[aux_index_value - 1]), true);\\n                    list_data_elem = buff_view.getUint32(0, true).toString(16).padStart(8, '0');\\n\\n                    // list_data_elem = (parseFloat(list_data_instructions[auxda].value[aux_index_value - 1])).toString(16);\\n                    break;\\n                  case \\\"double\\\":\\n                    buff = new ArrayBuffer(8);\\n                    buff_view = new DataView(buff);\\n                    buff_view.setFloat64(0, parseFloat(list_data_instructions[auxda].value[aux_index_value - 1]), true);\\n                    let lo = buff_view.getUint32(0, true).toString(16).padStart(8, '0');\\n                    let hi = buff_view.getUint32(4, true).toString(16).padStart(8, '0');\\n\\n                    list_data_elem = lo + hi;\\n                    break;\\n                }\\n                  dumpdatainstructions32[dumpdatainstructions32.length - 1][1] = list_data_elem + dumpdatainstructions32[dumpdatainstructions32.length -1][1];\\n                }else { // Caso de ser el valor positivo o sin signo\\n                  dumpdatainstructions32[dumpdatainstructions32.length -1][1] = list_data_instructions[auxda].value[aux_index_value - 1].toString(16) + dumpdatainstructions32[dumpdatainstructions32.length -1][1];\\n                }\\n              }\\n            }\\n            else dumpdatainstructions32[dumpdatainstructions32.length -1][1] = auxinsn[1] + dumpdatainstructions32[dumpdatainstructions32.length -1][1];\\n            inside_label32 += 1;\\n          }else \\n            dumpdatainstructions32.push(auxinsn);\\n        }\\n      }\\n      else if(labelmatch && sectionasm32 != 0){\\n        // console.log(\\\"Identificado:\\\", labelmatch);\\n        auxinsn.push(labelmatch[1].trim());\\n        auxinsn.push(\\\"\\\");\\n        auxinsn.push(\\\"\\\");\\n        auxinsn.push(1);\\n        auxinsn.push(labelmatch[2].trim());\\n        console.log(\\\"labelmatch: \\\", labelmatch);\\n        if (!document.app.$data.c_kernel && labelmatch[2].trim().includes(\\\"kernel\\\"))\\n          document.app.$data.entry_elf = labelmatch[1].trim();\\n        else if(labelmatch[2].trim() === \\\"_main\\\" && document.app.$data.c_kernel){\\n          document.app.$data.entry_elf = labelmatch[1].trim();\\n        }\\n\\n        if (document.app.$data.entry_elf !== undefined && !document.app.$data.entry_elf.startsWith(\\\"0x\\\"))\\n          document.app.$data.entry_elf = \\\"0x\\\" + document.app.$data.entry_elf;\\n        \\n        if (sectionasm32 === 1){\\n          dumptextinstructions32.push(auxinsn);\\n        }else if (sectionasm32 === 2){\\n          dumpdatainstructions32.push(auxinsn);\\n          inside_label32 = 0;\\n        }\\n\\n      }\\n\\n      // else {\\n      //   // console.log(\\\"objdump: 1\\\", message);\\n      // }\\n\\n      // identificacion de que seccion de codigo entramos.\\n      if (message.search(\\\".text\\\") != -1)\\n        sectionasm32 = 1;\\n      if (message.search(\\\".data\\\") != -1)\\n        sectionasm32 = 2;\\n      if (message.search(\\\".riscv.attributes\\\") != -1)\\n        sectionasm32 = 0;\\n\\n      console.log(message);\\n      // console.log(dumpdatainstructions32); \\n    }\\n  }\\n\\n  var out = Module[\\\"print\\\"] || console.log.bind(console);\\n\\n  var err = Module[\\\"printErr\\\"] || console.warn.bind(console);\\n\";\n\n  const outErrRegex = /\\nvar out = Module\\[\"print\"\\] \\|\\| console\\.log\\.bind\\(console\\);\\n\\nvar err = Module\\[\"printErr\"\\] \\|\\| console\\.warn\\.bind\\(console\\);\\n/;\n  if (outErrRegex.test(src) && !src.includes(\"Module['print'] = function (message)\")) {\n    src = src.replace(outErrRegex, printBlock);\n  }\n\n  // 3) Comment out dependenciesFulfilled runCaller block\n  const depBlock =\n`dependenciesFulfilled = function runCaller() {\\n if (!calledRun) run();\\n if (!calledRun) dependenciesFulfilled = runCaller;\\n};`;\n  const depBlockCommented =\n`// dependenciesFulfilled = function runCaller() {\\n//  if (!calledRun) run();\\n//  if (!calledRun) dependenciesFulfilled = runCaller;\\n// };`;\n  if (src.includes(depBlock) && !src.includes(depBlockCommented)) {\n    src = src.replace(depBlock, depBlockCommented);\n  }\n\n  // 4) In run(args), add shouldRunNow = true; right after function start (if missing)\n  src = src.replace(/function run\\(args\\) {\\n(?!\\s*shouldRunNow = true;)/, 'function run(args) {\\n  shouldRunNow = true;\\n');\n\n  // 5) In doRun(), insert FS.writeFile logic + args.shift() after initRuntime()\n  const initToPreMainRegex = /initRuntime\\(\\);\\n\\s*preMain\\(\\);\\n\\s*readyPromiseResolve\\(Module\\);\\n/;\n  if (initToPreMainRegex.test(src) && !src.includes('if (args[2].includes(\".o\")) { // Disassemble library')) {\n    src = src.replace(initToPreMainRegex,\n`initRuntime();\\n  if (args[2].includes(\".o\")) { // Disassemble library \\n    FS.writeFile(\"./\" + args[2], args[0]);\\n    islib32 = 1;\\n  }else {\\n    FS.writeFile(\"./input.elf\", args[0]);\\n  }\\n  args.shift();\\n  preMain();\\n  // readyPromiseResolve(Module);\\n`);\n  }\n\n  // 6) Add islib32 = 0; before procExit(status); (remove an extra blank line if present)\n  if (!src.includes('\\n islib32 = 0;\\n  procExit(status);\\n')) {\n    src = src.replace(/\\n\\s*\\n(\\s*)procExit\\(status\\);\\n/, '\\n$1islib32 = 0;\\n$1procExit(status);\\n');\n  }\n  if (!src.includes('\\n islib32 = 0;\\n  procExit(status);\\n')) {\n    src = src.replace(/(\\n\\s*)procExit\\(status\\);\\n/, '$1islib32 = 0;\\n$1procExit(status);\\n');\n  }\n\n  // 6b) Remove blank line between islib32 reset and procExit\n  src = src.replace(/islib32 = 0;\\n\\s*\\n(\\s*)procExit\\(status\\);/, 'islib32 = 0;\\n$1procExit(status);');\n\n  // 7) At bottom: comment run(); and call readyPromiseResolve(Module);\n  src = src.replace(/\\nrun\\(\\);\\n\\n\\n  return Module\\.ready\\n/, '\\n// run();\\n  readyPromiseResolve(Module);\\n\\n  return Module.ready\\n');\n\n  return src;\n};"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACAA,MAAM,CAACC,OAAO,GAAG,SAASC,WAAWA,CAACC,IAAI,EAAE;EAC1C,IAAIC,GAAG,GAAGD,IAAI,CAACE,MAAM;;EAErB;EACA,IAAI,CAACD,GAAG,CAACE,QAAQ,CAAC,mCAAmC,CAAC,EAAE;IACtD,MAAMC,YAAY,GAAG,kRAAkR;IACvS;IACAH,GAAG,GAAGA,GAAG,CAACI,OAAO,CAAC,sCAAsC,EAAED,YAAY,GAAG,uBAAuB,CAAC;EACnG;;EAEA;EACA,MAAME,UAAU,GAAG,m4PAAm4P;EAEt5P,MAAMC,WAAW,GAAG,4IAA4I;EAChK,IAAIA,WAAW,CAACC,IAAI,CAACP,GAAG,CAAC,IAAI,CAACA,GAAG,CAACE,QAAQ,CAAC,sCAAsC,CAAC,EAAE;IAClFF,GAAG,GAAGA,GAAG,CAACI,OAAO,CAACE,WAAW,EAAED,UAAU,CAAC;EAC5C;;EAEA;EACA,MAAMG,QAAQ,GAChB,kIAAkI;EAChI,MAAMC,iBAAiB,GACzB,8IAA8I;EAC5I,IAAIT,GAAG,CAACE,QAAQ,CAACM,QAAQ,CAAC,IAAI,CAACR,GAAG,CAACE,QAAQ,CAACO,iBAAiB,CAAC,EAAE;IAC9DT,GAAG,GAAGA,GAAG,CAACI,OAAO,CAACI,QAAQ,EAAEC,iBAAiB,CAAC;EAChD;;EAEA;EACAT,GAAG,GAAGA,GAAG,CAACI,OAAO,CAAC,qDAAqD,EAAE,gDAAgD,CAAC;;EAE1H;EACA,MAAMM,kBAAkB,GAAG,wEAAwE;EACnG,IAAIA,kBAAkB,CAACH,IAAI,CAACP,GAAG,CAAC,IAAI,CAACA,GAAG,CAACE,QAAQ,CAAC,sDAAsD,CAAC,EAAE;IACzGF,GAAG,GAAGA,GAAG,CAACI,OAAO,CAACM,kBAAkB,EACxC,sQAAsQ,CAAC;EACrQ;;EAEA;EACA,IAAI,CAACV,GAAG,CAACE,QAAQ,CAAC,wCAAwC,CAAC,EAAE;IAC3DF,GAAG,GAAGA,GAAG,CAACI,OAAO,CAAC,mCAAmC,EAAE,yCAAyC,CAAC;EACnG;EACA,IAAI,CAACJ,GAAG,CAACE,QAAQ,CAAC,wCAAwC,CAAC,EAAE;IAC3DF,GAAG,GAAGA,GAAG,CAACI,OAAO,CAAC,8BAA8B,EAAE,uCAAuC,CAAC;EAC5F;;EAEA;EACAJ,GAAG,GAAGA,GAAG,CAACI,OAAO,CAAC,6CAA6C,EAAE,mCAAmC,CAAC;;EAErG;EACAJ,GAAG,GAAGA,GAAG,CAACI,OAAO,CAAC,0CAA0C,EAAE,wEAAwE,CAAC;EAEvI,OAAOJ,GAAG;AACZ,CAAC","ignoreList":[]}},"mtime":1770196317137},"{\"assumptions\":{},\"sourceRoot\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/\",\"configFile\":false,\"babelrc\":false,\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build\",\"filename\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/transform-objdump64.js\",\"targets\":{},\"cloneInputAst\":true,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-flow-strip-types\",\"visitor\":{\"Program\":{\"enter\":[null]},\"ImportDeclaration\":{\"enter\":[null,null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"TypeCastExpression\":{\"enter\":[null,null]},\"CallExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"ImportSpecifier\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"AnyTypeAnnotation\":{\"enter\":[null]},\"ArrayTypeAnnotation\":{\"enter\":[null]},\"BooleanTypeAnnotation\":{\"enter\":[null]},\"BooleanLiteralTypeAnnotation\":{\"enter\":[null]},\"NullLiteralTypeAnnotation\":{\"enter\":[null]},\"ClassImplements\":{\"enter\":[null]},\"DeclareClass\":{\"enter\":[null]},\"DeclareFunction\":{\"enter\":[null]},\"DeclareInterface\":{\"enter\":[null]},\"DeclareModule\":{\"enter\":[null]},\"DeclareModuleExports\":{\"enter\":[null]},\"DeclareTypeAlias\":{\"enter\":[null]},\"DeclareOpaqueType\":{\"enter\":[null]},\"DeclareVariable\":{\"enter\":[null]},\"DeclareExportDeclaration\":{\"enter\":[null]},\"DeclareExportAllDeclaration\":{\"enter\":[null]},\"DeclaredPredicate\":{\"enter\":[null]},\"ExistsTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeParam\":{\"enter\":[null]},\"GenericTypeAnnotation\":{\"enter\":[null]},\"InferredPredicate\":{\"enter\":[null]},\"InterfaceExtends\":{\"enter\":[null]},\"InterfaceDeclaration\":{\"enter\":[null]},\"InterfaceTypeAnnotation\":{\"enter\":[null]},\"IntersectionTypeAnnotation\":{\"enter\":[null]},\"MixedTypeAnnotation\":{\"enter\":[null]},\"EmptyTypeAnnotation\":{\"enter\":[null]},\"NullableTypeAnnotation\":{\"enter\":[null]},\"NumberLiteralTypeAnnotation\":{\"enter\":[null]},\"NumberTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeInternalSlot\":{\"enter\":[null]},\"ObjectTypeCallProperty\":{\"enter\":[null]},\"ObjectTypeIndexer\":{\"enter\":[null]},\"ObjectTypeProperty\":{\"enter\":[null]},\"ObjectTypeSpreadProperty\":{\"enter\":[null]},\"OpaqueType\":{\"enter\":[null]},\"QualifiedTypeIdentifier\":{\"enter\":[null]},\"StringLiteralTypeAnnotation\":{\"enter\":[null]},\"StringTypeAnnotation\":{\"enter\":[null]},\"SymbolTypeAnnotation\":{\"enter\":[null]},\"ThisTypeAnnotation\":{\"enter\":[null]},\"TupleTypeAnnotation\":{\"enter\":[null]},\"TypeofTypeAnnotation\":{\"enter\":[null]},\"TypeAlias\":{\"enter\":[null]},\"TypeAnnotation\":{\"enter\":[null]},\"TypeParameter\":{\"enter\":[null]},\"TypeParameterDeclaration\":{\"enter\":[null]},\"TypeParameterInstantiation\":{\"enter\":[null]},\"UnionTypeAnnotation\":{\"enter\":[null]},\"Variance\":{\"enter\":[null]},\"VoidTypeAnnotation\":{\"enter\":[null]},\"EnumDeclaration\":{\"enter\":[null]},\"EnumBooleanBody\":{\"enter\":[null]},\"EnumNumberBody\":{\"enter\":[null]},\"EnumStringBody\":{\"enter\":[null]},\"EnumSymbolBody\":{\"enter\":[null]},\"EnumBooleanMember\":{\"enter\":[null]},\"EnumNumberMember\":{\"enter\":[null]},\"EnumStringMember\":{\"enter\":[null]},\"EnumDefaultedMember\":{\"enter\":[null]},\"IndexedAccessType\":{\"enter\":[null]},\"OptionalIndexedAccessType\":{\"enter\":[null]},\"ExportAllDeclaration\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]}],\"presets\":[]}:7.29.0:development":{"value":{"code":"\"use strict\";\n\n/**\n * jscodeshift transform: reemplaza el archivo de entrada por el contenido\n * de un archivo \"desired\" (para que sea byte-to-byte idéntico).\n *\n * Uso recomendado:\n *   npx jscodeshift -t transform-objdump64.js ./binaries/objdump64.js --parser=babel --desired=/ruta/al/objdump64.js\n *\n * Alternativa (si quieres hardcodear la ruta del deseado):\n *   edita DEFAULT_DESIRED_PATH más abajo.\n */\n\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst DEFAULT_DESIRED_PATH = \"/home/juancarlos/Escritorio/creator-beta/src/core/assembler/sailAssembler/web/wasm/objdump64.js\";\nmodule.exports = function transformer(file, api, options) {\n  // Permite pasar --desired=... o --deseado=...\n  const desiredArg = options && (options.desired || options.deseado);\n  const desiredPath = desiredArg ? path.resolve(process.cwd(), desiredArg) : DEFAULT_DESIRED_PATH;\n  if (!fs.existsSync(desiredPath)) {\n    throw new Error(`No encuentro el fichero desired:\\n  ${desiredPath}\\n\\n` + `Soluciones:\\n` + `  1) Pasa la ruta explícita:\\n` + `     --desired=/ruta/al/objdump64.js\\n` + `  2) O edita DEFAULT_DESIRED_PATH en el transform.\\n`);\n  }\n\n  // Lee el deseado TAL CUAL (manteniendo saltos de línea y formato)\n  const desired = fs.readFileSync(desiredPath, \"utf8\");\n\n  // Devuelve exactamente ese contenido como salida transformada\n  return desired;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJwYXRoIiwiREVGQVVMVF9ERVNJUkVEX1BBVEgiLCJtb2R1bGUiLCJleHBvcnRzIiwidHJhbnNmb3JtZXIiLCJmaWxlIiwiYXBpIiwib3B0aW9ucyIsImRlc2lyZWRBcmciLCJkZXNpcmVkIiwiZGVzZWFkbyIsImRlc2lyZWRQYXRoIiwicmVzb2x2ZSIsInByb2Nlc3MiLCJjd2QiLCJleGlzdHNTeW5jIiwiRXJyb3IiLCJyZWFkRmlsZVN5bmMiXSwic291cmNlUm9vdCI6Ii9ob21lL2p1YW5jYXJsb3MvRXNjcml0b3Jpby9wcnVlYmEvY3JlYXRvci1zYWlsLWFzc2VtYmxlci90b29sY2hhaW5fYnVpbGQvIiwic291cmNlcyI6WyJ0cmFuc2Zvcm0tb2JqZHVtcDY0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICoganNjb2Rlc2hpZnQgdHJhbnNmb3JtOiByZWVtcGxhemEgZWwgYXJjaGl2byBkZSBlbnRyYWRhIHBvciBlbCBjb250ZW5pZG9cbiAqIGRlIHVuIGFyY2hpdm8gXCJkZXNpcmVkXCIgKHBhcmEgcXVlIHNlYSBieXRlLXRvLWJ5dGUgaWTDqW50aWNvKS5cbiAqXG4gKiBVc28gcmVjb21lbmRhZG86XG4gKiAgIG5weCBqc2NvZGVzaGlmdCAtdCB0cmFuc2Zvcm0tb2JqZHVtcDY0LmpzIC4vYmluYXJpZXMvb2JqZHVtcDY0LmpzIC0tcGFyc2VyPWJhYmVsIC0tZGVzaXJlZD0vcnV0YS9hbC9vYmpkdW1wNjQuanNcbiAqXG4gKiBBbHRlcm5hdGl2YSAoc2kgcXVpZXJlcyBoYXJkY29kZWFyIGxhIHJ1dGEgZGVsIGRlc2VhZG8pOlxuICogICBlZGl0YSBERUZBVUxUX0RFU0lSRURfUEFUSCBtw6FzIGFiYWpvLlxuICovXG5cbmNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xuXG5jb25zdCBERUZBVUxUX0RFU0lSRURfUEFUSCA9XG4gIFwiL2hvbWUvanVhbmNhcmxvcy9Fc2NyaXRvcmlvL2NyZWF0b3ItYmV0YS9zcmMvY29yZS9hc3NlbWJsZXIvc2FpbEFzc2VtYmxlci93ZWIvd2FzbS9vYmpkdW1wNjQuanNcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0cmFuc2Zvcm1lcihmaWxlLCBhcGksIG9wdGlvbnMpIHtcbiAgLy8gUGVybWl0ZSBwYXNhciAtLWRlc2lyZWQ9Li4uIG8gLS1kZXNlYWRvPS4uLlxuICBjb25zdCBkZXNpcmVkQXJnID0gb3B0aW9ucyAmJiAob3B0aW9ucy5kZXNpcmVkIHx8IG9wdGlvbnMuZGVzZWFkbyk7XG4gIGNvbnN0IGRlc2lyZWRQYXRoID0gZGVzaXJlZEFyZ1xuICAgID8gcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksIGRlc2lyZWRBcmcpXG4gICAgOiBERUZBVUxUX0RFU0lSRURfUEFUSDtcblxuICBpZiAoIWZzLmV4aXN0c1N5bmMoZGVzaXJlZFBhdGgpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYE5vIGVuY3VlbnRybyBlbCBmaWNoZXJvIGRlc2lyZWQ6XFxuICAke2Rlc2lyZWRQYXRofVxcblxcbmAgK1xuICAgICAgICBgU29sdWNpb25lczpcXG5gICtcbiAgICAgICAgYCAgMSkgUGFzYSBsYSBydXRhIGV4cGzDrWNpdGE6XFxuYCArXG4gICAgICAgIGAgICAgIC0tZGVzaXJlZD0vcnV0YS9hbC9vYmpkdW1wNjQuanNcXG5gICtcbiAgICAgICAgYCAgMikgTyBlZGl0YSBERUZBVUxUX0RFU0lSRURfUEFUSCBlbiBlbCB0cmFuc2Zvcm0uXFxuYFxuICAgICk7XG4gIH1cblxuICAvLyBMZWUgZWwgZGVzZWFkbyBUQUwgQ1VBTCAobWFudGVuaWVuZG8gc2FsdG9zIGRlIGzDrW5lYSB5IGZvcm1hdG8pXG4gIGNvbnN0IGRlc2lyZWQgPSBmcy5yZWFkRmlsZVN5bmMoZGVzaXJlZFBhdGgsIFwidXRmOFwiKTtcblxuICAvLyBEZXZ1ZWx2ZSBleGFjdGFtZW50ZSBlc2UgY29udGVuaWRvIGNvbW8gc2FsaWRhIHRyYW5zZm9ybWFkYVxuICByZXR1cm4gZGVzaXJlZDtcbn07XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsSUFBSSxDQUFDO0FBQ3hCLE1BQU1DLElBQUksR0FBR0QsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUU1QixNQUFNRSxvQkFBb0IsR0FDeEIsaUdBQWlHO0FBRW5HQyxNQUFNLENBQUNDLE9BQU8sR0FBRyxTQUFTQyxXQUFXQSxDQUFDQyxJQUFJLEVBQUVDLEdBQUcsRUFBRUMsT0FBTyxFQUFFO0VBQ3hEO0VBQ0EsTUFBTUMsVUFBVSxHQUFHRCxPQUFPLEtBQUtBLE9BQU8sQ0FBQ0UsT0FBTyxJQUFJRixPQUFPLENBQUNHLE9BQU8sQ0FBQztFQUNsRSxNQUFNQyxXQUFXLEdBQUdILFVBQVUsR0FDMUJSLElBQUksQ0FBQ1ksT0FBTyxDQUFDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEVBQUVOLFVBQVUsQ0FBQyxHQUN2Q1Asb0JBQW9CO0VBRXhCLElBQUksQ0FBQ0gsRUFBRSxDQUFDaUIsVUFBVSxDQUFDSixXQUFXLENBQUMsRUFBRTtJQUMvQixNQUFNLElBQUlLLEtBQUssQ0FDYix1Q0FBdUNMLFdBQVcsTUFBTSxHQUN0RCxlQUFlLEdBQ2YsZ0NBQWdDLEdBQ2hDLHdDQUF3QyxHQUN4QyxzREFDSixDQUFDO0VBQ0g7O0VBRUE7RUFDQSxNQUFNRixPQUFPLEdBQUdYLEVBQUUsQ0FBQ21CLFlBQVksQ0FBQ04sV0FBVyxFQUFFLE1BQU0sQ0FBQzs7RUFFcEQ7RUFDQSxPQUFPRixPQUFPO0FBQ2hCLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["fs","require","path","DEFAULT_DESIRED_PATH","module","exports","transformer","file","api","options","desiredArg","desired","deseado","desiredPath","resolve","process","cwd","existsSync","Error","readFileSync"],"sourceRoot":"/home/juancarlos/Escritorio/prueba/creator-sail-assembler/toolchain_build/","sources":["transform-objdump64.js"],"sourcesContent":["/**\n * jscodeshift transform: reemplaza el archivo de entrada por el contenido\n * de un archivo \"desired\" (para que sea byte-to-byte idéntico).\n *\n * Uso recomendado:\n *   npx jscodeshift -t transform-objdump64.js ./binaries/objdump64.js --parser=babel --desired=/ruta/al/objdump64.js\n *\n * Alternativa (si quieres hardcodear la ruta del deseado):\n *   edita DEFAULT_DESIRED_PATH más abajo.\n */\n\nconst fs = require(\"fs\");\nconst path = require(\"path\");\n\nconst DEFAULT_DESIRED_PATH =\n  \"/home/juancarlos/Escritorio/creator-beta/src/core/assembler/sailAssembler/web/wasm/objdump64.js\";\n\nmodule.exports = function transformer(file, api, options) {\n  // Permite pasar --desired=... o --deseado=...\n  const desiredArg = options && (options.desired || options.deseado);\n  const desiredPath = desiredArg\n    ? path.resolve(process.cwd(), desiredArg)\n    : DEFAULT_DESIRED_PATH;\n\n  if (!fs.existsSync(desiredPath)) {\n    throw new Error(\n      `No encuentro el fichero desired:\\n  ${desiredPath}\\n\\n` +\n        `Soluciones:\\n` +\n        `  1) Pasa la ruta explícita:\\n` +\n        `     --desired=/ruta/al/objdump64.js\\n` +\n        `  2) O edita DEFAULT_DESIRED_PATH en el transform.\\n`\n    );\n  }\n\n  // Lee el deseado TAL CUAL (manteniendo saltos de línea y formato)\n  const desired = fs.readFileSync(desiredPath, \"utf8\");\n\n  // Devuelve exactamente ese contenido como salida transformada\n  return desired;\n};\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,EAAE,GAAGC,OAAO,CAAC,IAAI,CAAC;AACxB,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAE5B,MAAME,oBAAoB,GACxB,iGAAiG;AAEnGC,MAAM,CAACC,OAAO,GAAG,SAASC,WAAWA,CAACC,IAAI,EAAEC,GAAG,EAAEC,OAAO,EAAE;EACxD;EACA,MAAMC,UAAU,GAAGD,OAAO,KAAKA,OAAO,CAACE,OAAO,IAAIF,OAAO,CAACG,OAAO,CAAC;EAClE,MAAMC,WAAW,GAAGH,UAAU,GAC1BR,IAAI,CAACY,OAAO,CAACC,OAAO,CAACC,GAAG,CAAC,CAAC,EAAEN,UAAU,CAAC,GACvCP,oBAAoB;EAExB,IAAI,CAACH,EAAE,CAACiB,UAAU,CAACJ,WAAW,CAAC,EAAE;IAC/B,MAAM,IAAIK,KAAK,CACb,uCAAuCL,WAAW,MAAM,GACtD,eAAe,GACf,gCAAgC,GAChC,wCAAwC,GACxC,sDACJ,CAAC;EACH;;EAEA;EACA,MAAMF,OAAO,GAAGX,EAAE,CAACmB,YAAY,CAACN,WAAW,EAAE,MAAM,CAAC;;EAEpD;EACA,OAAOF,OAAO;AAChB,CAAC","ignoreList":[]}},"mtime":1770201099989}}